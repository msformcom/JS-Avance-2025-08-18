import{Scheduler}from"../Scheduler";class AsyncScheduler extends Scheduler{constructor(e,t=Scheduler.now){super(e,t),this.actions=[],this._active=!1}flush(t){var s=this.actions;if(this._active)s.push(t);else{let e;this._active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=s.shift());if(this._active=!1,e){for(;t=s.shift();)t.unsubscribe();throw e}}}}export{AsyncScheduler};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9zY2hlZHVsZXIvQXN5bmNTY2hlZHVsZXIudHMiXSwibmFtZXMiOlsiU2NoZWR1bGVyIiwiQXN5bmNTY2hlZHVsZXIiLCJjb25zdHJ1Y3RvciIsIlNjaGVkdWxlckFjdGlvbiIsIm5vdyIsInN1cGVyIiwidGhpcyIsImFjdGlvbnMiLCJfYWN0aXZlIiwiZmx1c2giLCJhY3Rpb24iLCJwdXNoIiwibGV0IiwiZXJyb3IiLCJleGVjdXRlIiwic3RhdGUiLCJkZWxheSIsInNoaWZ0IiwidW5zdWJzY3JpYmUiXSwibWFwcGluZ3MiOiJPQUFTQSxTQUErQixLQUFkLHFCQUtiQyx1QkFBdUJELFVBZ0JsQ0UsWUFBWUMsRUFBZ0NDLEVBQW9CSixVQUFVSSxLQUN4RUMsTUFBTUYsRUFBaUJDLENBQUcsRUFoQnJCRSxLQUFBQyxRQUFtQyxHQU1uQ0QsS0FBQUUsUUFBbUIsQ0FBQSxDQVcxQixDQUVPQyxNQUFNQyxHQUNYLElBQVFILEVBQVlELEtBQUwsUUFFZixHQUFJQSxLQUFLRSxRQUNQRCxFQUFRSSxLQUFLRCxDQUFNLE1BRHJCLENBS0FFLElBQUlDLEVBQ0pQLEtBQUtFLFFBQVUsQ0FBQSxFQUVmLEdBQ0UsR0FBS0ssRUFBUUgsRUFBT0ksUUFBUUosRUFBT0ssTUFBT0wsRUFBT00sS0FBSyxFQUNwRCxLQUNGLE9BQ1FOLEVBQVNILEVBQVFVLE1BQUssR0FJaEMsR0FGQVgsS0FBS0UsUUFBVSxDQUFBLEVBRVhLLEVBQU8sQ0FDVCxLQUFRSCxFQUFTSCxFQUFRVSxNQUFLLEdBQzVCUCxFQUFPUSxZQUFXLEVBRXBCLE1BQU1MLENBQ1IsQ0FsQkEsQ0FtQkYsQyxRQTdDV1osYyIsImZpbGUiOiJub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZWR1bGVyIH0gZnJvbSAnLi4vU2NoZWR1bGVyJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4vQWN0aW9uJztcbmltcG9ydCB7IEFzeW5jQWN0aW9uIH0gZnJvbSAnLi9Bc3luY0FjdGlvbic7XG5pbXBvcnQgeyBUaW1lckhhbmRsZSB9IGZyb20gJy4vdGltZXJIYW5kbGUnO1xuXG5leHBvcnQgY2xhc3MgQXN5bmNTY2hlZHVsZXIgZXh0ZW5kcyBTY2hlZHVsZXIge1xuICBwdWJsaWMgYWN0aW9uczogQXJyYXk8QXN5bmNBY3Rpb248YW55Pj4gPSBbXTtcbiAgLyoqXG4gICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBTY2hlZHVsZXIgaXMgY3VycmVudGx5IGV4ZWN1dGluZyBhIGJhdGNoIG9mXG4gICAqIHF1ZXVlZCBhY3Rpb25zLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHB1YmxpYyBfYWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gIC8qKlxuICAgKiBBbiBpbnRlcm5hbCBJRCB1c2VkIHRvIHRyYWNrIHRoZSBsYXRlc3QgYXN5bmNocm9ub3VzIHRhc2sgc3VjaCBhcyB0aG9zZVxuICAgKiBjb21pbmcgZnJvbSBgc2V0VGltZW91dGAsIGBzZXRJbnRlcnZhbGAsIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCBhbmRcbiAgICogb3RoZXJzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHB1YmxpYyBfc2NoZWR1bGVkOiBUaW1lckhhbmRsZSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihTY2hlZHVsZXJBY3Rpb246IHR5cGVvZiBBY3Rpb24sIG5vdzogKCkgPT4gbnVtYmVyID0gU2NoZWR1bGVyLm5vdykge1xuICAgIHN1cGVyKFNjaGVkdWxlckFjdGlvbiwgbm93KTtcbiAgfVxuXG4gIHB1YmxpYyBmbHVzaChhY3Rpb246IEFzeW5jQWN0aW9uPGFueT4pOiB2b2lkIHtcbiAgICBjb25zdCB7IGFjdGlvbnMgfSA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICBhY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZXJyb3I6IGFueTtcbiAgICB0aGlzLl9hY3RpdmUgPSB0cnVlO1xuXG4gICAgZG8ge1xuICAgICAgaWYgKChlcnJvciA9IGFjdGlvbi5leGVjdXRlKGFjdGlvbi5zdGF0ZSwgYWN0aW9uLmRlbGF5KSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSEpKTsgLy8gZXhoYXVzdCB0aGUgc2NoZWR1bGVyIHF1ZXVlXG5cbiAgICB0aGlzLl9hY3RpdmUgPSBmYWxzZTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgd2hpbGUgKChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkhKSkge1xuICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuIl19
