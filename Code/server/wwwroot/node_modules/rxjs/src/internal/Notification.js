import{EMPTY}from"./observable/empty";import{of}from"./observable/of";import{throwError}from"./observable/throwError";import{isFunction}from"./util/isFunction";var NotificationKind;(i=>{i.NEXT="N",i.ERROR="E",i.COMPLETE="C"})(NotificationKind=NotificationKind||{});class Notification{constructor(i,t,o){this.kind=i,this.value=t,this.error=o,this.hasValue="N"===i}observe(i){return observeNotification(this,i)}do(i,t,o){var{kind:r,value:e,error:n}=this;return"N"===r?i?.(e):"E"===r?t?.(n):o?.()}accept(i,t,o){return isFunction(i?.next)?this.observe(i):this.do(i,t,o)}toObservable(){let{kind:i,value:t,error:o}=this;var r="N"===i?of(t):"E"===i?throwError(()=>o):"C"===i?EMPTY:0;if(r)return r;throw new TypeError("Unexpected notification kind "+i)}static createNext(i){return new Notification("N",i)}static createError(i){return new Notification("E",void 0,i)}static createComplete(){return Notification.completeNotification}}function observeNotification(i,t){var{kind:i,value:o,error:r}=i;if("string"!=typeof i)throw new TypeError('Invalid notification, missing "kind"');"N"===i?t.next?.(o):"E"===i?t.error?.(r):t.complete?.()}Notification.completeNotification=new Notification("C");export{NotificationKind,Notification,observeNotification};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9Ob3RpZmljYXRpb24udHMiXSwibmFtZXMiOlsiRU1QVFkiLCJvZiIsInRocm93RXJyb3IiLCJpc0Z1bmN0aW9uIiwiTm90aWZpY2F0aW9uS2luZCIsIk5vdGlmaWNhdGlvbiIsImNvbnN0cnVjdG9yIiwia2luZCIsInZhbHVlIiwiZXJyb3IiLCJ0aGlzIiwiaGFzVmFsdWUiLCJvYnNlcnZlIiwib2JzZXJ2ZXIiLCJvYnNlcnZlTm90aWZpY2F0aW9uIiwiZG8iLCJuZXh0SGFuZGxlciIsImVycm9ySGFuZGxlciIsImNvbXBsZXRlSGFuZGxlciIsImFjY2VwdCIsIm5leHRPck9ic2VydmVyIiwiY29tcGxldGUiLCJuZXh0IiwidG9PYnNlcnZhYmxlIiwicmVzdWx0IiwiVHlwZUVycm9yIiwiY3JlYXRlTmV4dCIsImNyZWF0ZUVycm9yIiwiZXJyIiwidW5kZWZpbmVkIiwiY3JlYXRlQ29tcGxldGUiLCJjb21wbGV0ZU5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbiJdLCJtYXBwaW5ncyI6Ik9BRVNBLEtBQWlDLEtBQXBCLDRCQUNiQyxFQUEyQixLQUFqQix5QkFDVkMsVUFBMkMsS0FBekIsaUNBQ2xCQyxVQUFxQyxLQUFuQixvQkFPM0IsSUFBWUMsa0JBQUFBLElBQ1ZBLEVBQUEsS0FBQSxJQUNBQSxFQUFBLE1BQUEsSUFDQUEsRUFBQSxTQUFBLEdBQ0QsR0FKV0EsaUJBQUFBLGtCQUFnQixFQUFBLFFBc0JmQyxhQTZCWEMsWUFBNEJDLEVBQXVDQyxFQUEyQkMsR0FBbEVDLEtBQUFILEtBQUFBLEVBQXVDRyxLQUFBRixNQUFBQSxFQUEyQkUsS0FBQUQsTUFBQUEsRUFDNUZDLEtBQUtDLFNBQW9CLE1BQVRKLENBQ2xCLENBUUFLLFFBQVFDLEdBQ04sT0FBT0Msb0JBQW9CSixLQUFtQ0csQ0FBUSxDQUN4RSxDQTRCQUUsR0FBR0MsRUFBaUNDLEVBQW1DQyxHQUNyRSxHQUFNLENBQUVYLEtBQUFBLEVBQU1DLE1BQUFBLEVBQU9DLE1BQUFBLENBQUssRUFBS0MsS0FDL0IsTUFBZ0IsTUFBVEgsRUFBZVMsSUFBY1IsQ0FBTSxFQUFhLE1BQVRELEVBQWVVLElBQWVSLENBQUssRUFBSVMsSUFBaUIsQ0FDeEcsQ0FxQ0FDLE9BQU9DLEVBQTJEWCxFQUE0QlksR0FDNUYsT0FBT2xCLFdBQVlpQixHQUF3QkUsSUFBSSxFQUMzQ1osS0FBS0UsUUFBUVEsQ0FBb0MsRUFDakRWLEtBQUtLLEdBQUdLLEVBQXNDWCxFQUFjWSxDQUFlLENBQ2pGLENBU0FFLGVBQ0UsR0FBTSxDQUFFaEIsS0FBQUEsRUFBTUMsTUFBQUEsRUFBT0MsTUFBQUEsQ0FBSyxFQUFLQyxLQUUvQixJQUFNYyxFQUNLLE1BQVRqQixFQUVJTixHQUFHTyxDQUFNLEVBRUYsTUFBVEQsRUFFRUwsV0FBVyxJQUFNTyxDQUFLLEVBRWYsTUFBVEYsRUFFRVAsTUFFQSxFQUNOLEdBQUt3QixFQU1MLE9BQU9BLEVBRkwsTUFBTSxJQUFJQyxVQUFVLGdDQUFnQ2xCLENBQU0sQ0FHOUQsQ0FhQW1CLGtCQUFxQmxCLEdBQ25CLE9BQU8sSUFBSUgsYUFBYSxJQUFLRyxDQUFLLENBQ3BDLENBWUFtQixtQkFBbUJDLEdBQ2pCLE9BQU8sSUFBSXZCLGFBQWEsSUFBS3dCLEtBQUFBLEVBQVdELENBQUcsQ0FDN0MsQ0FVQUUsd0JBQ0UsT0FBT3pCLGFBQWEwQixvQkFDdEIsQyxDQVVJLFNBQVVqQixvQkFBdUJrQixFQUF5Q25CLEdBQzlFLEdBQU0sQ0FBRU4sS0FBQUEsRUFBTUMsTUFBQUEsRUFBT0MsTUFBQUEsQ0FBSyxFQUFLdUIsRUFDL0IsR0FBb0IsVUFBaEIsT0FBT3pCLEVBQ1QsTUFBTSxJQUFJa0IsVUFBVSxzQ0FBc0MsRUFFbkQsTUFBVGxCLEVBQWVNLEVBQVNTLE9BQU9kLENBQU0sRUFBYSxNQUFURCxFQUFlTSxFQUFTSixRQUFRQSxDQUFLLEVBQUlJLEVBQVNRLFdBQVUsQ0FDdkcsQ0F2RGlCaEIsYUFBQTBCLHFCQUF1QixJQUFJMUIsYUFBYSxHQUFHLFNBMUtoREQsaUJBc0JDQyxhQXFNR1MsbUJBTWhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9Ob3RpZmljYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYXJ0aWFsT2JzZXJ2ZXIsIE9ic2VydmFibGVOb3RpZmljYXRpb24sIENvbXBsZXRlTm90aWZpY2F0aW9uLCBOZXh0Tm90aWZpY2F0aW9uLCBFcnJvck5vdGlmaWNhdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBFTVBUWSB9IGZyb20gJy4vb2JzZXJ2YWJsZS9lbXB0eSc7XG5pbXBvcnQgeyBvZiB9IGZyb20gJy4vb2JzZXJ2YWJsZS9vZic7XG5pbXBvcnQgeyB0aHJvd0Vycm9yIH0gZnJvbSAnLi9vYnNlcnZhYmxlL3Rocm93RXJyb3InO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcblxuLy8gVE9ETzogV2hlbiB0aGlzIGVudW0gaXMgcmVtb3ZlZCwgcmVwbGFjZSBpdCB3aXRoIGEgdHlwZSBhbGlhcy4gU2VlICM0NTU2LlxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgYSBzdHJpbmcgbGl0ZXJhbCBpbnN0ZWFkLiBgTm90aWZpY2F0aW9uS2luZGAgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgdHlwZSBhbGlhcyBpbiB2OC5cbiAqIEl0IHdpbGwgbm90IGJlIHJlcGxhY2VkIHdpdGggYSBjb25zdCBlbnVtIGFzIHRob3NlIGFyZSBub3QgY29tcGF0aWJsZSB3aXRoIGlzb2xhdGVkIG1vZHVsZXMuXG4gKi9cbmV4cG9ydCBlbnVtIE5vdGlmaWNhdGlvbktpbmQge1xuICBORVhUID0gJ04nLFxuICBFUlJPUiA9ICdFJyxcbiAgQ09NUExFVEUgPSAnQycsXG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHB1c2gtYmFzZWQgZXZlbnQgb3IgdmFsdWUgdGhhdCBhbiB7QGxpbmsgT2JzZXJ2YWJsZX0gY2FuIGVtaXQuXG4gKiBUaGlzIGNsYXNzIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIG9wZXJhdG9ycyB0aGF0IG1hbmFnZSBub3RpZmljYXRpb25zLFxuICogbGlrZSB7QGxpbmsgbWF0ZXJpYWxpemV9LCB7QGxpbmsgZGVtYXRlcmlhbGl6ZX0sIHtAbGluayBvYnNlcnZlT259LCBhbmRcbiAqIG90aGVycy4gQmVzaWRlcyB3cmFwcGluZyB0aGUgYWN0dWFsIGRlbGl2ZXJlZCB2YWx1ZSwgaXQgYWxzbyBhbm5vdGF0ZXMgaXRcbiAqIHdpdGggbWV0YWRhdGEgb2YsIGZvciBpbnN0YW5jZSwgd2hhdCB0eXBlIG9mIHB1c2ggbWVzc2FnZSBpdCBpcyAoYG5leHRgLFxuICogYGVycm9yYCwgb3IgYGNvbXBsZXRlYCkuXG4gKlxuICogQHNlZSB7QGxpbmsgbWF0ZXJpYWxpemV9XG4gKiBAc2VlIHtAbGluayBkZW1hdGVyaWFsaXplfVxuICogQHNlZSB7QGxpbmsgb2JzZXJ2ZU9ufVxuICogQGRlcHJlY2F0ZWQgSXQgaXMgTk9UIHJlY29tbWVuZGVkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYE5vdGlmaWNhdGlvbmAgZGlyZWN0bHkuXG4gKiBSYXRoZXIsIHRyeSB0byBjcmVhdGUgUE9KT3MgbWF0Y2hpbmcgdGhlIHNpZ25hdHVyZSBvdXRsaW5lZCBpbiB7QGxpbmsgT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbn0uXG4gKiBGb3IgZXhhbXBsZTogYHsga2luZDogJ04nLCB2YWx1ZTogMSB9YCwgYHsga2luZDogJ0UnLCBlcnJvcjogbmV3IEVycm9yKCdiYWQnKSB9YCwgb3IgYHsga2luZDogJ0MnIH1gLlxuICogV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICovXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uPFQ+IHtcbiAgLyoqXG4gICAqIEEgdmFsdWUgc2lnbmlmeWluZyB0aGF0IHRoZSBub3RpZmljYXRpb24gd2lsbCBcIm5leHRcIiBpZiBvYnNlcnZlZC4gSW4gdHJ1dGgsXG4gICAqIFRoaXMgaXMgcmVhbGx5IHN5bm9ueW1vdXMgd2l0aCBqdXN0IGNoZWNraW5nIGBraW5kID09PSBcIk5cImAuXG4gICAqIEBkZXByZWNhdGVkIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC4gSW5zdGVhZCwganVzdCBjaGVjayB0byBzZWUgaWYgdGhlIHZhbHVlIG9mIGBraW5kYCBpcyBgXCJOXCJgLlxuICAgKi9cbiAgcmVhZG9ubHkgaGFzVmFsdWU6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBcIk5leHRcIiBub3RpZmljYXRpb24gb2JqZWN0LlxuICAgKiBAcGFyYW0ga2luZCBBbHdheXMgYCdOJ2BcbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBub3RpZnkgd2l0aCBpZiBvYnNlcnZlZC5cbiAgICogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLiBVc2Uge0BsaW5rIE5vdGlmaWNhdGlvbiNjcmVhdGVOZXh0IGNyZWF0ZU5leHR9IGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihraW5kOiAnTicsIHZhbHVlPzogVCk7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIFwiRXJyb3JcIiBub3RpZmljYXRpb24gb2JqZWN0LlxuICAgKiBAcGFyYW0ga2luZCBBbHdheXMgYCdFJ2BcbiAgICogQHBhcmFtIHZhbHVlIEFsd2F5cyBgdW5kZWZpbmVkYFxuICAgKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRvIG5vdGlmeSB3aXRoIGlmIG9ic2VydmVkLlxuICAgKiBAZGVwcmVjYXRlZCBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwuIFVzZSB7QGxpbmsgTm90aWZpY2F0aW9uI2NyZWF0ZUVycm9yIGNyZWF0ZUVycm9yfSBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioa2luZDogJ0UnLCB2YWx1ZTogdW5kZWZpbmVkLCBlcnJvcjogYW55KTtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBcImNvbXBsZXRpb25cIiBub3RpZmljYXRpb24gb2JqZWN0LlxuICAgKiBAcGFyYW0ga2luZCBBbHdheXMgYCdDJ2BcbiAgICogQGRlcHJlY2F0ZWQgSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLiBVc2Uge0BsaW5rIE5vdGlmaWNhdGlvbiNjcmVhdGVDb21wbGV0ZSBjcmVhdGVDb21wbGV0ZX0gaW5zdGVhZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGtpbmQ6ICdDJyk7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBraW5kOiAnTicgfCAnRScgfCAnQycsIHB1YmxpYyByZWFkb25seSB2YWx1ZT86IFQsIHB1YmxpYyByZWFkb25seSBlcnJvcj86IGFueSkge1xuICAgIHRoaXMuaGFzVmFsdWUgPSBraW5kID09PSAnTic7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXIgb24gYSBwYXNzZWQgYG9ic2VydmVyYCBnaXZlbiB0aGUgYGtpbmRgIG9mIG5vdGlmaWNhdGlvbi5cbiAgICogSWYgdGhlIGhhbmRsZXIgaXMgbWlzc2luZyBpdCB3aWxsIGRvIG5vdGhpbmcuIEV2ZW4gaWYgdGhlIG5vdGlmaWNhdGlvbiBpcyBhbiBlcnJvciwgaWZcbiAgICogdGhlcmUgaXMgbm8gZXJyb3IgaGFuZGxlciBvbiB0aGUgb2JzZXJ2ZXIsIGFuIGVycm9yIHdpbGwgbm90IGJlIHRocm93biwgaXQgd2lsbCBub29wLlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXIgVGhlIG9ic2VydmVyIHRvIG5vdGlmeS5cbiAgICovXG4gIG9ic2VydmUob2JzZXJ2ZXI6IFBhcnRpYWxPYnNlcnZlcjxUPik6IHZvaWQge1xuICAgIHJldHVybiBvYnNlcnZlTm90aWZpY2F0aW9uKHRoaXMgYXMgT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbjxUPiwgb2JzZXJ2ZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGEgbm90aWZpY2F0aW9uIG9uIHRoZSBhcHByb3ByaWF0ZSBoYW5kbGVyIGZyb20gYSBsaXN0IHByb3ZpZGVkLlxuICAgKiBJZiBhIGhhbmRsZXIgaXMgbWlzc2luZyBmb3IgdGhlIGtpbmQgb2Ygbm90aWZpY2F0aW9uLCBub3RoaW5nIGlzIGNhbGxlZFxuICAgKiBhbmQgbm8gZXJyb3IgaXMgdGhyb3duLCBpdCB3aWxsIGJlIGEgbm9vcC5cbiAgICogQHBhcmFtIG5leHQgQSBuZXh0IGhhbmRsZXJcbiAgICogQHBhcmFtIGVycm9yIEFuIGVycm9yIGhhbmRsZXJcbiAgICogQHBhcmFtIGNvbXBsZXRlIEEgY29tcGxldGUgaGFuZGxlclxuICAgKiBAZGVwcmVjYXRlZCBSZXBsYWNlZCB3aXRoIHtAbGluayBOb3RpZmljYXRpb24jb2JzZXJ2ZSBvYnNlcnZlfS4gV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgZG8obmV4dDogKHZhbHVlOiBUKSA9PiB2b2lkLCBlcnJvcjogKGVycjogYW55KSA9PiB2b2lkLCBjb21wbGV0ZTogKCkgPT4gdm9pZCk6IHZvaWQ7XG4gIC8qKlxuICAgKiBFeGVjdXRlcyBhIG5vdGlmaWNhdGlvbiBvbiB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlciBmcm9tIGEgbGlzdCBwcm92aWRlZC5cbiAgICogSWYgYSBoYW5kbGVyIGlzIG1pc3NpbmcgZm9yIHRoZSBraW5kIG9mIG5vdGlmaWNhdGlvbiwgbm90aGluZyBpcyBjYWxsZWRcbiAgICogYW5kIG5vIGVycm9yIGlzIHRocm93biwgaXQgd2lsbCBiZSBhIG5vb3AuXG4gICAqIEBwYXJhbSBuZXh0IEEgbmV4dCBoYW5kbGVyXG4gICAqIEBwYXJhbSBlcnJvciBBbiBlcnJvciBoYW5kbGVyXG4gICAqIEBkZXByZWNhdGVkIFJlcGxhY2VkIHdpdGgge0BsaW5rIE5vdGlmaWNhdGlvbiNvYnNlcnZlIG9ic2VydmV9LiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gICAqL1xuICBkbyhuZXh0OiAodmFsdWU6IFQpID0+IHZvaWQsIGVycm9yOiAoZXJyOiBhbnkpID0+IHZvaWQpOiB2b2lkO1xuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIG5leHQgaGFuZGxlciBpZiB0aGUgTm90aWZpY2F0aW9uIGlzIG9mIGBraW5kYCBgXCJOXCJgLiBPdGhlcndpc2VcbiAgICogdGhpcyB3aWxsIG5vdCBlcnJvciwgYW5kIGl0IHdpbGwgYmUgYSBub29wLlxuICAgKiBAcGFyYW0gbmV4dCBUaGUgbmV4dCBoYW5kbGVyXG4gICAqIEBkZXByZWNhdGVkIFJlcGxhY2VkIHdpdGgge0BsaW5rIE5vdGlmaWNhdGlvbiNvYnNlcnZlIG9ic2VydmV9LiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gICAqL1xuICBkbyhuZXh0OiAodmFsdWU6IFQpID0+IHZvaWQpOiB2b2lkO1xuICBkbyhuZXh0SGFuZGxlcjogKHZhbHVlOiBUKSA9PiB2b2lkLCBlcnJvckhhbmRsZXI/OiAoZXJyOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlSGFuZGxlcj86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBjb25zdCB7IGtpbmQsIHZhbHVlLCBlcnJvciB9ID0gdGhpcztcbiAgICByZXR1cm4ga2luZCA9PT0gJ04nID8gbmV4dEhhbmRsZXI/Lih2YWx1ZSEpIDoga2luZCA9PT0gJ0UnID8gZXJyb3JIYW5kbGVyPy4oZXJyb3IpIDogY29tcGxldGVIYW5kbGVyPy4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBhIG5vdGlmaWNhdGlvbiBvbiB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlciBmcm9tIGEgbGlzdCBwcm92aWRlZC5cbiAgICogSWYgYSBoYW5kbGVyIGlzIG1pc3NpbmcgZm9yIHRoZSBraW5kIG9mIG5vdGlmaWNhdGlvbiwgbm90aGluZyBpcyBjYWxsZWRcbiAgICogYW5kIG5vIGVycm9yIGlzIHRocm93biwgaXQgd2lsbCBiZSBhIG5vb3AuXG4gICAqIEBwYXJhbSBuZXh0IEEgbmV4dCBoYW5kbGVyXG4gICAqIEBwYXJhbSBlcnJvciBBbiBlcnJvciBoYW5kbGVyXG4gICAqIEBwYXJhbSBjb21wbGV0ZSBBIGNvbXBsZXRlIGhhbmRsZXJcbiAgICogQGRlcHJlY2F0ZWQgUmVwbGFjZWQgd2l0aCB7QGxpbmsgTm90aWZpY2F0aW9uI29ic2VydmUgb2JzZXJ2ZX0uIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC5cbiAgICovXG4gIGFjY2VwdChuZXh0OiAodmFsdWU6IFQpID0+IHZvaWQsIGVycm9yOiAoZXJyOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlOiAoKSA9PiB2b2lkKTogdm9pZDtcbiAgLyoqXG4gICAqIEV4ZWN1dGVzIGEgbm90aWZpY2F0aW9uIG9uIHRoZSBhcHByb3ByaWF0ZSBoYW5kbGVyIGZyb20gYSBsaXN0IHByb3ZpZGVkLlxuICAgKiBJZiBhIGhhbmRsZXIgaXMgbWlzc2luZyBmb3IgdGhlIGtpbmQgb2Ygbm90aWZpY2F0aW9uLCBub3RoaW5nIGlzIGNhbGxlZFxuICAgKiBhbmQgbm8gZXJyb3IgaXMgdGhyb3duLCBpdCB3aWxsIGJlIGEgbm9vcC5cbiAgICogQHBhcmFtIG5leHQgQSBuZXh0IGhhbmRsZXJcbiAgICogQHBhcmFtIGVycm9yIEFuIGVycm9yIGhhbmRsZXJcbiAgICogQGRlcHJlY2F0ZWQgUmVwbGFjZWQgd2l0aCB7QGxpbmsgTm90aWZpY2F0aW9uI29ic2VydmUgb2JzZXJ2ZX0uIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC5cbiAgICovXG4gIGFjY2VwdChuZXh0OiAodmFsdWU6IFQpID0+IHZvaWQsIGVycm9yOiAoZXJyOiBhbnkpID0+IHZvaWQpOiB2b2lkO1xuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIG5leHQgaGFuZGxlciBpZiB0aGUgTm90aWZpY2F0aW9uIGlzIG9mIGBraW5kYCBgXCJOXCJgLiBPdGhlcndpc2VcbiAgICogdGhpcyB3aWxsIG5vdCBlcnJvciwgYW5kIGl0IHdpbGwgYmUgYSBub29wLlxuICAgKiBAcGFyYW0gbmV4dCBUaGUgbmV4dCBoYW5kbGVyXG4gICAqIEBkZXByZWNhdGVkIFJlcGxhY2VkIHdpdGgge0BsaW5rIE5vdGlmaWNhdGlvbiNvYnNlcnZlIG9ic2VydmV9LiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gICAqL1xuICBhY2NlcHQobmV4dDogKHZhbHVlOiBUKSA9PiB2b2lkKTogdm9pZDtcblxuICAvKipcbiAgICogRXhlY3V0ZXMgdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXIgb24gYSBwYXNzZWQgYG9ic2VydmVyYCBnaXZlbiB0aGUgYGtpbmRgIG9mIG5vdGlmaWNhdGlvbi5cbiAgICogSWYgdGhlIGhhbmRsZXIgaXMgbWlzc2luZyBpdCB3aWxsIGRvIG5vdGhpbmcuIEV2ZW4gaWYgdGhlIG5vdGlmaWNhdGlvbiBpcyBhbiBlcnJvciwgaWZcbiAgICogdGhlcmUgaXMgbm8gZXJyb3IgaGFuZGxlciBvbiB0aGUgb2JzZXJ2ZXIsIGFuIGVycm9yIHdpbGwgbm90IGJlIHRocm93biwgaXQgd2lsbCBub29wLlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXIgVGhlIG9ic2VydmVyIHRvIG5vdGlmeS5cbiAgICogQGRlcHJlY2F0ZWQgUmVwbGFjZWQgd2l0aCB7QGxpbmsgTm90aWZpY2F0aW9uI29ic2VydmUgb2JzZXJ2ZX0uIFdpbGwgYmUgcmVtb3ZlZCBpbiB2OC5cbiAgICovXG4gIGFjY2VwdChvYnNlcnZlcjogUGFydGlhbE9ic2VydmVyPFQ+KTogdm9pZDtcbiAgYWNjZXB0KG5leHRPck9ic2VydmVyOiBQYXJ0aWFsT2JzZXJ2ZXI8VD4gfCAoKHZhbHVlOiBUKSA9PiB2b2lkKSwgZXJyb3I/OiAoZXJyOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlPzogKCkgPT4gdm9pZCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKChuZXh0T3JPYnNlcnZlciBhcyBhbnkpPy5uZXh0KVxuICAgICAgPyB0aGlzLm9ic2VydmUobmV4dE9yT2JzZXJ2ZXIgYXMgUGFydGlhbE9ic2VydmVyPFQ+KVxuICAgICAgOiB0aGlzLmRvKG5leHRPck9ic2VydmVyIGFzICh2YWx1ZTogVCkgPT4gdm9pZCwgZXJyb3IgYXMgYW55LCBjb21wbGV0ZSBhcyBhbnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IGp1c3QgZGVsaXZlcnMgdGhlIG5vdGlmaWNhdGlvbiByZXByZXNlbnRlZFxuICAgKiBieSB0aGlzIE5vdGlmaWNhdGlvbiBpbnN0YW5jZS5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgV2lsbCBiZSByZW1vdmVkIGluIHY4LiBUbyBjb252ZXJ0IGEgYE5vdGlmaWNhdGlvbmAgdG8gYW4ge0BsaW5rIE9ic2VydmFibGV9LFxuICAgKiB1c2Uge0BsaW5rIG9mfSBhbmQge0BsaW5rIGRlbWF0ZXJpYWxpemV9OiBgb2Yobm90aWZpY2F0aW9uKS5waXBlKGRlbWF0ZXJpYWxpemUoKSlgLlxuICAgKi9cbiAgdG9PYnNlcnZhYmxlKCk6IE9ic2VydmFibGU8VD4ge1xuICAgIGNvbnN0IHsga2luZCwgdmFsdWUsIGVycm9yIH0gPSB0aGlzO1xuICAgIC8vIFNlbGVjdCB0aGUgb2JzZXJ2YWJsZSB0byByZXR1cm4gYnkgYGtpbmRgXG4gICAgY29uc3QgcmVzdWx0ID1cbiAgICAgIGtpbmQgPT09ICdOJ1xuICAgICAgICA/IC8vIE5leHQga2luZC4gUmV0dXJuIGFuIG9ic2VydmFibGUgb2YgdGhhdCB2YWx1ZS5cbiAgICAgICAgICBvZih2YWx1ZSEpXG4gICAgICAgIDogLy9cbiAgICAgICAga2luZCA9PT0gJ0UnXG4gICAgICAgID8gLy8gRXJyb3Iga2luZC4gUmV0dXJuIGFuIG9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgZXJyb3IuXG4gICAgICAgICAgdGhyb3dFcnJvcigoKSA9PiBlcnJvcilcbiAgICAgICAgOiAvL1xuICAgICAgICBraW5kID09PSAnQydcbiAgICAgICAgPyAvLyBDb21wbGV0aW9uIGtpbmQuIEtpbmQgaXMgXCJDXCIsIHJldHVybiBhbiBvYnNlcnZhYmxlIHRoYXQganVzdCBjb21wbGV0ZXMuXG4gICAgICAgICAgRU1QVFlcbiAgICAgICAgOiAvLyBVbmtub3duIGtpbmQsIHJldHVybiBmYWxzeSwgc28gd2UgZXJyb3IgYmVsb3cuXG4gICAgICAgICAgMDtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgLy8gVE9ETzogY29uc2lkZXIgcmVtb3ZpbmcgdGhpcyBjaGVjay4gVGhlIG9ubHkgd2F5IHRvIGNhdXNlIHRoaXMgd291bGQgYmUgdG9cbiAgICAgIC8vIHVzZSB0aGUgTm90aWZpY2F0aW9uIGNvbnN0cnVjdG9yIGRpcmVjdGx5IGluIGEgd2F5IHRoYXQgaXMgbm90IHR5cGUtc2FmZS5cbiAgICAgIC8vIGFuZCBkaXJlY3QgdXNlIG9mIHRoZSBOb3RpZmljYXRpb24gY29uc3RydWN0b3IgaXMgZGVwcmVjYXRlZC5cbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVuZXhwZWN0ZWQgbm90aWZpY2F0aW9uIGtpbmQgJHtraW5kfWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJykgYXMgTm90aWZpY2F0aW9uPG5ldmVyPiAmIENvbXBsZXRlTm90aWZpY2F0aW9uO1xuICAvKipcbiAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgKiBnaXZlbiB2YWx1ZS5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSBgbmV4dGAgdmFsdWUuXG4gICAqIEByZXR1cm4gVGhlIFwibmV4dFwiIE5vdGlmaWNhdGlvbiByZXByZXNlbnRpbmcgdGhlIGFyZ3VtZW50LlxuICAgKiBAZGVwcmVjYXRlZCBJdCBpcyBOT1QgcmVjb21tZW5kZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBgTm90aWZpY2F0aW9uYCBkaXJlY3RseS5cbiAgICogUmF0aGVyLCB0cnkgdG8gY3JlYXRlIFBPSk9zIG1hdGNoaW5nIHRoZSBzaWduYXR1cmUgb3V0bGluZWQgaW4ge0BsaW5rIE9ic2VydmFibGVOb3RpZmljYXRpb259LlxuICAgKiBGb3IgZXhhbXBsZTogYHsga2luZDogJ04nLCB2YWx1ZTogMSB9YCwgYHsga2luZDogJ0UnLCBlcnJvcjogbmV3IEVycm9yKCdiYWQnKSB9YCwgb3IgYHsga2luZDogJ0MnIH1gLlxuICAgKiBXaWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTmV4dDxUPih2YWx1ZTogVCkge1xuICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdOJywgdmFsdWUpIGFzIE5vdGlmaWNhdGlvbjxUPiAmIE5leHROb3RpZmljYXRpb248VD47XG4gIH1cblxuICAvKipcbiAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYGVycm9yYCBmcm9tIGFcbiAgICogZ2l2ZW4gZXJyb3IuXG4gICAqIEBwYXJhbSBlcnIgVGhlIGBlcnJvcmAgZXJyb3IuXG4gICAqIEByZXR1cm4gVGhlIFwiZXJyb3JcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZSBhcmd1bWVudC5cbiAgICogQGRlcHJlY2F0ZWQgSXQgaXMgTk9UIHJlY29tbWVuZGVkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYE5vdGlmaWNhdGlvbmAgZGlyZWN0bHkuXG4gICAqIFJhdGhlciwgdHJ5IHRvIGNyZWF0ZSBQT0pPcyBtYXRjaGluZyB0aGUgc2lnbmF0dXJlIG91dGxpbmVkIGluIHtAbGluayBPYnNlcnZhYmxlTm90aWZpY2F0aW9ufS5cbiAgICogRm9yIGV4YW1wbGU6IGB7IGtpbmQ6ICdOJywgdmFsdWU6IDEgfWAsIGB7IGtpbmQ6ICdFJywgZXJyb3I6IG5ldyBFcnJvcignYmFkJykgfWAsIG9yIGB7IGtpbmQ6ICdDJyB9YC5cbiAgICogV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUVycm9yKGVycj86IGFueSkge1xuICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdFJywgdW5kZWZpbmVkLCBlcnIpIGFzIE5vdGlmaWNhdGlvbjxuZXZlcj4gJiBFcnJvck5vdGlmaWNhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgY29tcGxldGVgLlxuICAgKiBAcmV0dXJuIFRoZSB2YWx1ZWxlc3MgXCJjb21wbGV0ZVwiIE5vdGlmaWNhdGlvbi5cbiAgICogQGRlcHJlY2F0ZWQgSXQgaXMgTk9UIHJlY29tbWVuZGVkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYE5vdGlmaWNhdGlvbmAgZGlyZWN0bHkuXG4gICAqIFJhdGhlciwgdHJ5IHRvIGNyZWF0ZSBQT0pPcyBtYXRjaGluZyB0aGUgc2lnbmF0dXJlIG91dGxpbmVkIGluIHtAbGluayBPYnNlcnZhYmxlTm90aWZpY2F0aW9ufS5cbiAgICogRm9yIGV4YW1wbGU6IGB7IGtpbmQ6ICdOJywgdmFsdWU6IDEgfWAsIGB7IGtpbmQ6ICdFJywgZXJyb3I6IG5ldyBFcnJvcignYmFkJykgfWAsIG9yIGB7IGtpbmQ6ICdDJyB9YC5cbiAgICogV2lsbCBiZSByZW1vdmVkIGluIHY4LlxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUNvbXBsZXRlKCk6IE5vdGlmaWNhdGlvbjxuZXZlcj4gJiBDb21wbGV0ZU5vdGlmaWNhdGlvbiB7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbi5jb21wbGV0ZU5vdGlmaWNhdGlvbjtcbiAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBhcHByb3ByaWF0ZSBoYW5kbGVyIG9uIGEgcGFzc2VkIGBvYnNlcnZlcmAgZ2l2ZW4gdGhlIGBraW5kYCBvZiBub3RpZmljYXRpb24uXG4gKiBJZiB0aGUgaGFuZGxlciBpcyBtaXNzaW5nIGl0IHdpbGwgZG8gbm90aGluZy4gRXZlbiBpZiB0aGUgbm90aWZpY2F0aW9uIGlzIGFuIGVycm9yLCBpZlxuICogdGhlcmUgaXMgbm8gZXJyb3IgaGFuZGxlciBvbiB0aGUgb2JzZXJ2ZXIsIGFuIGVycm9yIHdpbGwgbm90IGJlIHRocm93biwgaXQgd2lsbCBub29wLlxuICogQHBhcmFtIG5vdGlmaWNhdGlvbiBUaGUgbm90aWZpY2F0aW9uIG9iamVjdCB0byBvYnNlcnZlLlxuICogQHBhcmFtIG9ic2VydmVyIFRoZSBvYnNlcnZlciB0byBub3RpZnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlTm90aWZpY2F0aW9uPFQ+KG5vdGlmaWNhdGlvbjogT2JzZXJ2YWJsZU5vdGlmaWNhdGlvbjxUPiwgb2JzZXJ2ZXI6IFBhcnRpYWxPYnNlcnZlcjxUPikge1xuICBjb25zdCB7IGtpbmQsIHZhbHVlLCBlcnJvciB9ID0gbm90aWZpY2F0aW9uIGFzIGFueTtcbiAgaWYgKHR5cGVvZiBraW5kICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm90aWZpY2F0aW9uLCBtaXNzaW5nIFwia2luZFwiJyk7XG4gIH1cbiAga2luZCA9PT0gJ04nID8gb2JzZXJ2ZXIubmV4dD8uKHZhbHVlISkgOiBraW5kID09PSAnRScgPyBvYnNlcnZlci5lcnJvcj8uKGVycm9yKSA6IG9ic2VydmVyLmNvbXBsZXRlPy4oKTtcbn1cbiJdfQ==
