import{Observable}from"../Observable";import{Subscription}from"../Subscription";import{SubscriptionLoggable}from"./SubscriptionLoggable";import{applyMixins}from"../util/applyMixins";import{observeNotification}from"../Notification";class ColdObservable extends Observable{constructor(s,e){super(function(s){let e=this,i=e.logSubscribedFrame();var r=new Subscription;return r.add(new Subscription(()=>{e.logUnsubscribedFrame(i)})),e.scheduleMessages(s),r}),this.messages=s,this.subscriptions=[],this.scheduler=e}scheduleMessages(e){var i=this.messages.length;for(let s=0;s<i;s++){var r=this.messages[s];e.add(this.scheduler.schedule(s=>{var{message:{notification:s},subscriber:e}=s;observeNotification(s,e)},r.frame,{message:r,subscriber:e}))}}}applyMixins(ColdObservable,[SubscriptionLoggable]);export{ColdObservable};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC90ZXN0aW5nL0NvbGRPYnNlcnZhYmxlLnRzIl0sIm5hbWVzIjpbIk9ic2VydmFibGUiLCJTdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb25Mb2dnYWJsZSIsImFwcGx5TWl4aW5zIiwib2JzZXJ2ZU5vdGlmaWNhdGlvbiIsIkNvbGRPYnNlcnZhYmxlIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlcyIsInNjaGVkdWxlciIsInN1cGVyIiwic3Vic2NyaWJlciIsIm9ic2VydmFibGUiLCJ0aGlzIiwiaW5kZXgiLCJsb2dTdWJzY3JpYmVkRnJhbWUiLCJzdWJzY3JpcHRpb24iLCJhZGQiLCJsb2dVbnN1YnNjcmliZWRGcmFtZSIsInNjaGVkdWxlTWVzc2FnZXMiLCJzdWJzY3JpcHRpb25zIiwibWVzc2FnZXNMZW5ndGgiLCJsZW5ndGgiLCJsZXQiLCJpIiwibWVzc2FnZSIsInNjaGVkdWxlIiwibm90aWZpY2F0aW9uIiwiZGVzdGluYXRpb24iLCJzdGF0ZSIsImZyYW1lIl0sIm1hcHBpbmdzIjoiT0FBU0EsVUFBaUMsS0FBZix1QkFDbEJDLFlBQXFDLEtBQWpCLHlCQUlwQkMsb0JBQW9ELEtBQXhCLGdDQUM1QkMsV0FBd0MsS0FBckIsNkJBRW5CQyxtQkFBNEMsS0FBakIsd0JBRXZCQyx1QkFBMEJMLFdBUXJDTSxZQUFtQkMsRUFBeUJDLEdBQzFDQyxNQUFNLFNBQStCQyxHQUNuQyxJQUFNQyxFQUFnQ0MsS0FDaENDLEVBQVFGLEVBQVdHLG1CQUFrQixFQUMzQyxJQUFNQyxFQUFlLElBQUlkLGFBT3pCLE9BTkFjLEVBQWFDLElBQ1gsSUFBSWYsYUFBYSxLQUNmVSxFQUFXTSxxQkFBcUJKLENBQUssQ0FDdkMsQ0FBQyxDQUFDLEVBRUpGLEVBQVdPLGlCQUFpQlIsQ0FBVSxFQUMvQkssQ0FDVCxDQUFDLEVBWmdCSCxLQUFBTCxTQUFBQSxFQVBaSyxLQUFBTyxjQUFtQyxHQW9CeENQLEtBQUtKLFVBQVlBLENBQ25CLENBRUFVLGlCQUFpQlIsR0FDZixJQUFNVSxFQUFpQlIsS0FBS0wsU0FBU2MsT0FDckMsSUFBS0MsSUFBSUMsRUFBSSxFQUFHQSxFQUFJSCxFQUFnQkcsQ0FBQyxHQUFJLENBQ3ZDLElBQU1DLEVBQVVaLEtBQUtMLFNBQVNnQixHQUM5QmIsRUFBV00sSUFDVEosS0FBS0osVUFBVWlCLFNBQ2IsSUFDRSxHQUFNLENBQUVELFFBQVMsQ0FBRUUsYUFBQUEsQ0FBWSxFQUFJaEIsV0FBWWlCLENBQVcsRUFBS0MsRUFDL0R4QixvQkFBb0JzQixFQUFjQyxDQUFXLENBQy9DLEVBQ0FILEVBQVFLLE1BQ1IsQ0FBRUwsUUFBQUEsRUFBU2QsV0FBQUEsQ0FBVSxDQUFFLENBQ3hCLENBRUwsQ0FDRixDLENBRUZQLFlBQVlFLGVBQWdCLENBQUNILHFCQUFxQixTQXpDckNHLGNBeUNzQyIsImZpbGUiOiJub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvdGVzdGluZy9Db2xkT2JzZXJ2YWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTY2hlZHVsZXIgfSBmcm9tICcuLi9TY2hlZHVsZXInO1xuaW1wb3J0IHsgVGVzdE1lc3NhZ2UgfSBmcm9tICcuL1Rlc3RNZXNzYWdlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbkxvZyB9IGZyb20gJy4vU3Vic2NyaXB0aW9uTG9nJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbkxvZ2dhYmxlIH0gZnJvbSAnLi9TdWJzY3JpcHRpb25Mb2dnYWJsZSc7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gJy4uL3V0aWwvYXBwbHlNaXhpbnMnO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgb2JzZXJ2ZU5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL05vdGlmaWNhdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBDb2xkT2JzZXJ2YWJsZTxUPiBleHRlbmRzIE9ic2VydmFibGU8VD4gaW1wbGVtZW50cyBTdWJzY3JpcHRpb25Mb2dnYWJsZSB7XG4gIHB1YmxpYyBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25Mb2dbXSA9IFtdO1xuICBzY2hlZHVsZXI6IFNjaGVkdWxlcjtcbiAgLy8gQHRzLWlnbm9yZTogUHJvcGVydHkgaGFzIG5vIGluaXRpYWxpemVyIGFuZCBpcyBub3QgZGVmaW5pdGVseSBhc3NpZ25lZFxuICBsb2dTdWJzY3JpYmVkRnJhbWU6ICgpID0+IG51bWJlcjtcbiAgLy8gQHRzLWlnbm9yZTogUHJvcGVydHkgaGFzIG5vIGluaXRpYWxpemVyIGFuZCBpcyBub3QgZGVmaW5pdGVseSBhc3NpZ25lZFxuICBsb2dVbnN1YnNjcmliZWRGcmFtZTogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IocHVibGljIG1lc3NhZ2VzOiBUZXN0TWVzc2FnZVtdLCBzY2hlZHVsZXI6IFNjaGVkdWxlcikge1xuICAgIHN1cGVyKGZ1bmN0aW9uICh0aGlzOiBPYnNlcnZhYmxlPFQ+LCBzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pIHtcbiAgICAgIGNvbnN0IG9ic2VydmFibGU6IENvbGRPYnNlcnZhYmxlPFQ+ID0gdGhpcyBhcyBhbnk7XG4gICAgICBjb25zdCBpbmRleCA9IG9ic2VydmFibGUubG9nU3Vic2NyaWJlZEZyYW1lKCk7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICBzdWJzY3JpcHRpb24uYWRkKFxuICAgICAgICBuZXcgU3Vic2NyaXB0aW9uKCgpID0+IHtcbiAgICAgICAgICBvYnNlcnZhYmxlLmxvZ1Vuc3Vic2NyaWJlZEZyYW1lKGluZGV4KTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBvYnNlcnZhYmxlLnNjaGVkdWxlTWVzc2FnZXMoc3Vic2NyaWJlcik7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH0pO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICB9XG5cbiAgc2NoZWR1bGVNZXNzYWdlcyhzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPGFueT4pIHtcbiAgICBjb25zdCBtZXNzYWdlc0xlbmd0aCA9IHRoaXMubWVzc2FnZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXNMZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV07XG4gICAgICBzdWJzY3JpYmVyLmFkZChcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoXG4gICAgICAgICAgKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG1lc3NhZ2U6IHsgbm90aWZpY2F0aW9uIH0sIHN1YnNjcmliZXI6IGRlc3RpbmF0aW9uIH0gPSBzdGF0ZSE7XG4gICAgICAgICAgICBvYnNlcnZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgZGVzdGluYXRpb24pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVzc2FnZS5mcmFtZSxcbiAgICAgICAgICB7IG1lc3NhZ2UsIHN1YnNjcmliZXIgfVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuYXBwbHlNaXhpbnMoQ29sZE9ic2VydmFibGUsIFtTdWJzY3JpcHRpb25Mb2dnYWJsZV0pO1xuIl19
