import{Subject}from"../Subject";import{Subscription}from"../Subscription";import{SubscriptionLoggable}from"./SubscriptionLoggable";import{applyMixins}from"../util/applyMixins";import{observeNotification}from"../Notification";class HotObservable extends Subject{constructor(e,i){super(),this.messages=e,this.subscriptions=[],this.scheduler=i}_subscribe(e){let i=this,s=i.logSubscribedFrame();var t=new Subscription;return t.add(new Subscription(()=>{i.logUnsubscribedFrame(s)})),t.add(super._subscribe(e)),t}setup(){let t=this;var e=t.messages.length;for(let s=0;s<e;s++)(()=>{let{notification:e,frame:i}=t.messages[s];t.scheduler.schedule(()=>{observeNotification(e,t)},i)})()}}applyMixins(HotObservable,[SubscriptionLoggable]);export{HotObservable};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC90ZXN0aW5nL0hvdE9ic2VydmFibGUudHMiXSwibmFtZXMiOlsiU3ViamVjdCIsIlN1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbkxvZ2dhYmxlIiwiYXBwbHlNaXhpbnMiLCJvYnNlcnZlTm90aWZpY2F0aW9uIiwiSG90T2JzZXJ2YWJsZSIsImNvbnN0cnVjdG9yIiwibWVzc2FnZXMiLCJzY2hlZHVsZXIiLCJzdXBlciIsInRoaXMiLCJzdWJzY3JpcHRpb25zIiwiX3N1YnNjcmliZSIsInN1YnNjcmliZXIiLCJzdWJqZWN0IiwiaW5kZXgiLCJsb2dTdWJzY3JpYmVkRnJhbWUiLCJzdWJzY3JpcHRpb24iLCJhZGQiLCJsb2dVbnN1YnNjcmliZWRGcmFtZSIsInNldHVwIiwibWVzc2FnZXNMZW5ndGgiLCJsZW5ndGgiLCJsZXQiLCJpIiwibm90aWZpY2F0aW9uIiwiZnJhbWUiLCJzY2hlZHVsZSJdLCJtYXBwaW5ncyI6Ik9BQVNBLE9BQTJCLEtBQVosb0JBRWZDLFlBQXFDLEtBQWpCLHlCQUlwQkMsb0JBQW9ELEtBQXhCLGdDQUM1QkMsV0FBd0MsS0FBckIsNkJBQ25CQyxtQkFBNEMsS0FBakIsd0JBRXZCQyxzQkFBeUJMLFFBUXBDTSxZQUFtQkMsRUFBeUJDLEdBQzFDQyxNQUFLLEVBRFlDLEtBQUFILFNBQUFBLEVBUFpHLEtBQUFDLGNBQW1DLEdBU3hDRCxLQUFLRixVQUFZQSxDQUNuQixDQUdVSSxXQUFXQyxHQUNuQixJQUFNQyxFQUE0QkosS0FDNUJLLEVBQVFELEVBQVFFLG1CQUFrQixFQUN4QyxJQUFNQyxFQUFlLElBQUloQixhQU96QixPQU5BZ0IsRUFBYUMsSUFDWCxJQUFJakIsYUFBYSxLQUNmYSxFQUFRSyxxQkFBcUJKLENBQUssQ0FDcEMsQ0FBQyxDQUFDLEVBRUpFLEVBQWFDLElBQUlULE1BQU1HLFdBQVdDLENBQVUsQ0FBQyxFQUN0Q0ksQ0FDVCxDQUVBRyxRQUNFLElBQU1OLEVBQVVKLEtBQ2hCLElBQU1XLEVBQWlCUCxFQUFRUCxTQUFTZSxPQUV4QyxJQUFLQyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlILEVBQWdCRyxDQUFDLElBQ25DLEtBQ0UsR0FBTSxDQUFFQyxhQUFBQSxFQUFjQyxNQUFBQSxDQUFLLEVBQUtaLEVBQVFQLFNBQVNpQixHQUVqRFYsRUFBUU4sVUFBVW1CLFNBQVMsS0FDekJ2QixvQkFBb0JxQixFQUFjWCxDQUFPLENBQzNDLEVBQUdZLENBQUssQ0FDVCxHQUFDLENBRU4sQyxDQUVGdkIsWUFBWUUsY0FBZSxDQUFDSCxxQkFBcUIsU0ExQ3BDRyxhQTBDcUMiLCJmaWxlIjoibm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL3Rlc3RpbmcvSG90T2JzZXJ2YWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuLi9TdWJqZWN0JztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTY2hlZHVsZXIgfSBmcm9tICcuLi9TY2hlZHVsZXInO1xuaW1wb3J0IHsgVGVzdE1lc3NhZ2UgfSBmcm9tICcuL1Rlc3RNZXNzYWdlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbkxvZyB9IGZyb20gJy4vU3Vic2NyaXB0aW9uTG9nJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbkxvZ2dhYmxlIH0gZnJvbSAnLi9TdWJzY3JpcHRpb25Mb2dnYWJsZSc7XG5pbXBvcnQgeyBhcHBseU1peGlucyB9IGZyb20gJy4uL3V0aWwvYXBwbHlNaXhpbnMnO1xuaW1wb3J0IHsgb2JzZXJ2ZU5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL05vdGlmaWNhdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBIb3RPYnNlcnZhYmxlPFQ+IGV4dGVuZHMgU3ViamVjdDxUPiBpbXBsZW1lbnRzIFN1YnNjcmlwdGlvbkxvZ2dhYmxlIHtcbiAgcHVibGljIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbkxvZ1tdID0gW107XG4gIHNjaGVkdWxlcjogU2NoZWR1bGVyO1xuICAvLyBAdHMtaWdub3JlOiBQcm9wZXJ0eSBoYXMgbm8gaW5pdGlhbGl6ZXIgYW5kIGlzIG5vdCBkZWZpbml0ZWx5IGFzc2lnbmVkXG4gIGxvZ1N1YnNjcmliZWRGcmFtZTogKCkgPT4gbnVtYmVyO1xuICAvLyBAdHMtaWdub3JlOiBQcm9wZXJ0eSBoYXMgbm8gaW5pdGlhbGl6ZXIgYW5kIGlzIG5vdCBkZWZpbml0ZWx5IGFzc2lnbmVkXG4gIGxvZ1Vuc3Vic2NyaWJlZEZyYW1lOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbWVzc2FnZXM6IFRlc3RNZXNzYWdlW10sIHNjaGVkdWxlcjogU2NoZWR1bGVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJvdGVjdGVkIF9zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxhbnk+KTogU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdCBzdWJqZWN0OiBIb3RPYnNlcnZhYmxlPFQ+ID0gdGhpcztcbiAgICBjb25zdCBpbmRleCA9IHN1YmplY3QubG9nU3Vic2NyaWJlZEZyYW1lKCk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgIHN1YnNjcmlwdGlvbi5hZGQoXG4gICAgICBuZXcgU3Vic2NyaXB0aW9uKCgpID0+IHtcbiAgICAgICAgc3ViamVjdC5sb2dVbnN1YnNjcmliZWRGcmFtZShpbmRleCk7XG4gICAgICB9KVxuICAgICk7XG4gICAgc3Vic2NyaXB0aW9uLmFkZChzdXBlci5fc3Vic2NyaWJlKHN1YnNjcmliZXIpKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG5cbiAgc2V0dXAoKSB7XG4gICAgY29uc3Qgc3ViamVjdCA9IHRoaXM7XG4gICAgY29uc3QgbWVzc2FnZXNMZW5ndGggPSBzdWJqZWN0Lm1lc3NhZ2VzLmxlbmd0aDtcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby12YXIta2V5d29yZCAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZXNMZW5ndGg7IGkrKykge1xuICAgICAgKCgpID0+IHtcbiAgICAgICAgY29uc3QgeyBub3RpZmljYXRpb24sIGZyYW1lIH0gPSBzdWJqZWN0Lm1lc3NhZ2VzW2ldO1xuICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlICovXG4gICAgICAgIHN1YmplY3Quc2NoZWR1bGVyLnNjaGVkdWxlKCgpID0+IHtcbiAgICAgICAgICBvYnNlcnZlTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgc3ViamVjdCk7XG4gICAgICAgIH0sIGZyYW1lKTtcbiAgICAgIH0pKCk7XG4gICAgfVxuICB9XG59XG5hcHBseU1peGlucyhIb3RPYnNlcnZhYmxlLCBbU3Vic2NyaXB0aW9uTG9nZ2FibGVdKTtcbiJdfQ==
