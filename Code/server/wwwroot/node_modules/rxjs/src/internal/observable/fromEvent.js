import{innerFrom}from"../observable/innerFrom";import{Observable}from"../Observable";import{mergeMap}from"../operators/mergeMap";import{isArrayLike}from"../util/isArrayLike";import{isFunction}from"../util/isFunction";import{mapOneOrManyArgs}from"../util/mapOneOrManyArgs";let nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(r,n,i,e){if(isFunction(i)&&(e=i,i=void 0),e)return fromEvent(r,n,i).pipe(mapOneOrManyArgs(e));let[o,m]=isEventTarget(r)?eventTargetMethods.map(t=>e=>r[t](n,e,i)):isNodeStyleEventEmitter(r)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(r,n)):isJQueryStyleEventEmitter(r)?jqueryMethods.map(toCommonHandlerRegistry(r,n)):[];if(!o&&isArrayLike(r))return mergeMap(e=>fromEvent(e,n,i))(innerFrom(r));if(o)return new Observable(t=>{let e=(...e)=>t.next(1<e.length?e:e[0]);return o(e),()=>m(e)});throw new TypeError("Invalid event target")}function toCommonHandlerRegistry(r,n){return t=>e=>r[t](n,e)}function isNodeStyleEventEmitter(e){return isFunction(e.addListener)&&isFunction(e.removeListener)}function isJQueryStyleEventEmitter(e){return isFunction(e.on)&&isFunction(e.off)}function isEventTarget(e){return isFunction(e.addEventListener)&&isFunction(e.removeEventListener)}export{fromEvent};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb21FdmVudC50cyJdLCJuYW1lcyI6WyJpbm5lckZyb20iLCJPYnNlcnZhYmxlIiwibWVyZ2VNYXAiLCJpc0FycmF5TGlrZSIsImlzRnVuY3Rpb24iLCJtYXBPbmVPck1hbnlBcmdzIiwibm9kZUV2ZW50RW1pdHRlck1ldGhvZHMiLCJldmVudFRhcmdldE1ldGhvZHMiLCJqcXVlcnlNZXRob2RzIiwiZnJvbUV2ZW50IiwidGFyZ2V0IiwiZXZlbnROYW1lIiwib3B0aW9ucyIsInJlc3VsdFNlbGVjdG9yIiwidW5kZWZpbmVkIiwicGlwZSIsImFkZCIsInJlbW92ZSIsImlzRXZlbnRUYXJnZXQiLCJtYXAiLCJtZXRob2ROYW1lIiwiaGFuZGxlciIsImlzTm9kZVN0eWxlRXZlbnRFbWl0dGVyIiwidG9Db21tb25IYW5kbGVyUmVnaXN0cnkiLCJpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyIiwic3ViVGFyZ2V0IiwiYXJncyIsInN1YnNjcmliZXIiLCJuZXh0IiwibGVuZ3RoIiwiVHlwZUVycm9yIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9uIiwib2ZmIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJPQUFTQSxTQUEwQyxLQUF6QixpQ0FDakJDLFVBQWlDLEtBQWYsdUJBQ2xCQyxRQUF1QyxLQUF2QiwrQkFDaEJDLFdBQXdDLEtBQXJCLDZCQUNuQkMsVUFBc0MsS0FBcEIsNEJBQ2xCQyxnQkFBa0QsS0FBMUIsMkJBR2pDLElBQU1DLHdCQUEwQixDQUFDLGNBQWUsa0JBQzFDQyxtQkFBcUIsQ0FBQyxtQkFBb0IsdUJBQzFDQyxjQUFnQixDQUFDLEtBQU0sT0FxT3ZCLFNBQVVDLFVBQ2RDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBTUEsR0FKSVQsV0FBV1EsQ0FBTyxJQUNwQkMsRUFBaUJELEVBQ2pCQSxFQUFVRSxLQUFBQSxHQUVSRCxFQUNGLE9BQU9KLFVBQWFDLEVBQVFDLEVBQVdDLENBQStCLEVBQUVHLEtBQUtWLGlCQUFpQlEsQ0FBYyxDQUFDLEVBVS9HLEdBQU0sQ0FBQ0csRUFBS0MsR0FFVkMsY0FBY1IsQ0FBTSxFQUNoQkgsbUJBQW1CWSxJQUFJLEdBQWdCLEdBQWtCVCxFQUFPVSxHQUFZVCxFQUFXVSxFQUFTVCxDQUErQixDQUFDLEVBRWxJVSx3QkFBd0JaLENBQU0sRUFDNUJKLHdCQUF3QmEsSUFBSUksd0JBQXdCYixFQUFRQyxDQUFTLENBQUMsRUFDdEVhLDBCQUEwQmQsQ0FBTSxFQUNoQ0YsY0FBY1csSUFBSUksd0JBQXdCYixFQUFRQyxDQUFTLENBQUMsRUFDNUQsR0FPTixHQUFJLENBQUNLLEdBQ0NiLFlBQVlPLENBQU0sRUFDcEIsT0FBT1IsU0FBUyxHQUFvQk8sVUFBVWdCLEVBQVdkLEVBQVdDLENBQStCLENBQUMsRUFDbEdaLFVBQVVVLENBQU0sQ0FBQyxFQU92QixHQUFLTSxFQUlMLE9BQU8sSUFBSWYsV0FBYyxJQUl2QixJQUFNb0IsRUFBVSxJQUFJSyxJQUFnQkMsRUFBV0MsS0FBSyxFQUFJRixFQUFLRyxPQUFTSCxFQUFPQSxFQUFLLEVBQUUsRUFJcEYsT0FGQVYsRUFBSUssQ0FBTyxFQUVKLElBQU1KLEVBQVFJLENBQU8sQ0FDOUIsQ0FBQyxFQVpDLE1BQU0sSUFBSVMsVUFBVSxzQkFBc0IsQ0FhOUMsQ0FTQSxTQUFTUCx3QkFBd0JiLEVBQWFDLEdBQzVDLE9BQU8sR0FBd0IsR0FBa0JELEVBQU9VLEdBQVlULEVBQVdVLENBQU8sQ0FDeEYsQ0FPQSxTQUFTQyx3QkFBd0JaLEdBQy9CLE9BQU9OLFdBQVdNLEVBQU9xQixXQUFXLEdBQUszQixXQUFXTSxFQUFPc0IsY0FBYyxDQUMzRSxDQU9BLFNBQVNSLDBCQUEwQmQsR0FDakMsT0FBT04sV0FBV00sRUFBT3VCLEVBQUUsR0FBSzdCLFdBQVdNLEVBQU93QixHQUFHLENBQ3ZELENBT0EsU0FBU2hCLGNBQWNSLEdBQ3JCLE9BQU9OLFdBQVdNLEVBQU95QixnQkFBZ0IsR0FBSy9CLFdBQVdNLEVBQU8wQixtQkFBbUIsQ0FDckYsUUFuR2dCM0IsU0FtR2hCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb21FdmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlubmVyRnJvbSB9IGZyb20gJy4uL29ic2VydmFibGUvaW5uZXJGcm9tJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IG1lcmdlTWFwIH0gZnJvbSAnLi4vb3BlcmF0b3JzL21lcmdlTWFwJztcbmltcG9ydCB7IGlzQXJyYXlMaWtlIH0gZnJvbSAnLi4vdXRpbC9pc0FycmF5TGlrZSc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IG1hcE9uZU9yTWFueUFyZ3MgfSBmcm9tICcuLi91dGlsL21hcE9uZU9yTWFueUFyZ3MnO1xuXG4vLyBUaGVzZSBjb25zdGFudHMgYXJlIHVzZWQgdG8gY3JlYXRlIGhhbmRsZXIgcmVnaXN0cnkgZnVuY3Rpb25zIHVzaW5nIGFycmF5IG1hcHBpbmcgYmVsb3cuXG5jb25zdCBub2RlRXZlbnRFbWl0dGVyTWV0aG9kcyA9IFsnYWRkTGlzdGVuZXInLCAncmVtb3ZlTGlzdGVuZXInXSBhcyBjb25zdDtcbmNvbnN0IGV2ZW50VGFyZ2V0TWV0aG9kcyA9IFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJ10gYXMgY29uc3Q7XG5jb25zdCBqcXVlcnlNZXRob2RzID0gWydvbicsICdvZmYnXSBhcyBjb25zdDtcblxuZXhwb3J0IGludGVyZmFjZSBOb2RlU3R5bGVFdmVudEVtaXR0ZXIge1xuICBhZGRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZyB8IHN5bWJvbCwgaGFuZGxlcjogTm9kZUV2ZW50SGFuZGxlcik6IHRoaXM7XG4gIHJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZTogc3RyaW5nIHwgc3ltYm9sLCBoYW5kbGVyOiBOb2RlRXZlbnRIYW5kbGVyKTogdGhpcztcbn1cblxuZXhwb3J0IHR5cGUgTm9kZUV2ZW50SGFuZGxlciA9ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcblxuLy8gRm9yIEFQSXMgdGhhdCBpbXBsZW1lbnQgYGFkZExpc3RlbmVyYCBhbmQgYHJlbW92ZUxpc3RlbmVyYCBtZXRob2RzIHRoYXQgbWF5XG4vLyBub3QgdXNlIHRoZSBzYW1lIGFyZ3VtZW50cyBvciByZXR1cm4gRXZlbnRFbWl0dGVyIHZhbHVlc1xuLy8gc3VjaCBhcyBSZWFjdCBOYXRpdmVcbmV4cG9ydCBpbnRlcmZhY2UgTm9kZUNvbXBhdGlibGVFdmVudEVtaXR0ZXIge1xuICBhZGRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogTm9kZUV2ZW50SGFuZGxlcik6IHZvaWQgfCB7fTtcbiAgcmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IE5vZGVFdmVudEhhbmRsZXIpOiB2b2lkIHwge307XG59XG5cbi8vIFVzZSBoYW5kbGVyIHR5cGVzIGxpa2UgdGhvc2UgaW4gQHR5cGVzL2pxdWVyeS4gU2VlOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWQvYmxvYi84NDc3MzFiYTFkN2ZhNmRiNmI5MTFjMGU0M2FhMGFmZTU5NmU3NzIzL3R5cGVzL2pxdWVyeS9taXNjLmQudHMjTDYzOTVcbmV4cG9ydCBpbnRlcmZhY2UgSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXI8VENvbnRleHQsIFQ+IHtcbiAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6ICh0aGlzOiBUQ29udGV4dCwgdDogVCwgLi4uYXJnczogYW55W10pID0+IGFueSk6IHZvaWQ7XG4gIG9mZihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogKHRoaXM6IFRDb250ZXh0LCB0OiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gYW55KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudExpc3RlbmVyT2JqZWN0PEU+IHtcbiAgaGFuZGxlRXZlbnQoZXZ0OiBFKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIYXNFdmVudFRhcmdldEFkZFJlbW92ZTxFPiB7XG4gIGFkZEV2ZW50TGlzdGVuZXIoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGxpc3RlbmVyOiAoKGV2dDogRSkgPT4gdm9pZCkgfCBFdmVudExpc3RlbmVyT2JqZWN0PEU+IHwgbnVsbCxcbiAgICBvcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXG4gICk6IHZvaWQ7XG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGxpc3RlbmVyOiAoKGV2dDogRSkgPT4gdm9pZCkgfCBFdmVudExpc3RlbmVyT2JqZWN0PEU+IHwgbnVsbCxcbiAgICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMgfCBib29sZWFuXG4gICk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRMaXN0ZW5lck9wdGlvbnMge1xuICBjYXB0dXJlPzogYm9vbGVhbjtcbiAgcGFzc2l2ZT86IGJvb2xlYW47XG4gIG9uY2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zIGV4dGVuZHMgRXZlbnRMaXN0ZW5lck9wdGlvbnMge1xuICBvbmNlPzogYm9vbGVhbjtcbiAgcGFzc2l2ZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXZlbnQ8VD4odGFyZ2V0OiBIYXNFdmVudFRhcmdldEFkZFJlbW92ZTxUPiB8IEFycmF5TGlrZTxIYXNFdmVudFRhcmdldEFkZFJlbW92ZTxUPj4sIGV2ZW50TmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxUPjtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXZlbnQ8VCwgUj4oXG4gIHRhcmdldDogSGFzRXZlbnRUYXJnZXRBZGRSZW1vdmU8VD4gfCBBcnJheUxpa2U8SGFzRXZlbnRUYXJnZXRBZGRSZW1vdmU8VD4+LFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgcmVzdWx0U2VsZWN0b3I6IChldmVudDogVCkgPT4gUlxuKTogT2JzZXJ2YWJsZTxSPjtcbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXZlbnQ8VD4oXG4gIHRhcmdldDogSGFzRXZlbnRUYXJnZXRBZGRSZW1vdmU8VD4gfCBBcnJheUxpa2U8SGFzRXZlbnRUYXJnZXRBZGRSZW1vdmU8VD4+LFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgb3B0aW9uczogRXZlbnRMaXN0ZW5lck9wdGlvbnNcbik6IE9ic2VydmFibGU8VD47XG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFQsIFI+KFxuICB0YXJnZXQ6IEhhc0V2ZW50VGFyZ2V0QWRkUmVtb3ZlPFQ+IHwgQXJyYXlMaWtlPEhhc0V2ZW50VGFyZ2V0QWRkUmVtb3ZlPFQ+PixcbiAgZXZlbnROYW1lOiBzdHJpbmcsXG4gIG9wdGlvbnM6IEV2ZW50TGlzdGVuZXJPcHRpb25zLFxuICByZXN1bHRTZWxlY3RvcjogKGV2ZW50OiBUKSA9PiBSXG4pOiBPYnNlcnZhYmxlPFI+O1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50KHRhcmdldDogTm9kZVN0eWxlRXZlbnRFbWl0dGVyIHwgQXJyYXlMaWtlPE5vZGVTdHlsZUV2ZW50RW1pdHRlcj4sIGV2ZW50TmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTx1bmtub3duPjtcbi8qKiBAZGVwcmVjYXRlZCBEbyBub3Qgc3BlY2lmeSBleHBsaWNpdCB0eXBlIHBhcmFtZXRlcnMuIFNpZ25hdHVyZXMgd2l0aCB0eXBlIHBhcmFtZXRlcnMgdGhhdCBjYW5ub3QgYmUgaW5mZXJyZWQgd2lsbCBiZSByZW1vdmVkIGluIHY4LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdmVudDxUPih0YXJnZXQ6IE5vZGVTdHlsZUV2ZW50RW1pdHRlciB8IEFycmF5TGlrZTxOb2RlU3R5bGVFdmVudEVtaXR0ZXI+LCBldmVudE5hbWU6IHN0cmluZyk6IE9ic2VydmFibGU8VD47XG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFI+KFxuICB0YXJnZXQ6IE5vZGVTdHlsZUV2ZW50RW1pdHRlciB8IEFycmF5TGlrZTxOb2RlU3R5bGVFdmVudEVtaXR0ZXI+LFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgcmVzdWx0U2VsZWN0b3I6ICguLi5hcmdzOiBhbnlbXSkgPT4gUlxuKTogT2JzZXJ2YWJsZTxSPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdmVudChcbiAgdGFyZ2V0OiBOb2RlQ29tcGF0aWJsZUV2ZW50RW1pdHRlciB8IEFycmF5TGlrZTxOb2RlQ29tcGF0aWJsZUV2ZW50RW1pdHRlcj4sXG4gIGV2ZW50TmFtZTogc3RyaW5nXG4pOiBPYnNlcnZhYmxlPHVua25vd24+O1xuLyoqIEBkZXByZWNhdGVkIERvIG5vdCBzcGVjaWZ5IGV4cGxpY2l0IHR5cGUgcGFyYW1ldGVycy4gU2lnbmF0dXJlcyB3aXRoIHR5cGUgcGFyYW1ldGVycyB0aGF0IGNhbm5vdCBiZSBpbmZlcnJlZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjguICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFQ+KHRhcmdldDogTm9kZUNvbXBhdGlibGVFdmVudEVtaXR0ZXIgfCBBcnJheUxpa2U8Tm9kZUNvbXBhdGlibGVFdmVudEVtaXR0ZXI+LCBldmVudE5hbWU6IHN0cmluZyk6IE9ic2VydmFibGU8VD47XG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFI+KFxuICB0YXJnZXQ6IE5vZGVDb21wYXRpYmxlRXZlbnRFbWl0dGVyIHwgQXJyYXlMaWtlPE5vZGVDb21wYXRpYmxlRXZlbnRFbWl0dGVyPixcbiAgZXZlbnROYW1lOiBzdHJpbmcsXG4gIHJlc3VsdFNlbGVjdG9yOiAoLi4uYXJnczogYW55W10pID0+IFJcbik6IE9ic2VydmFibGU8Uj47XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXZlbnQ8VD4oXG4gIHRhcmdldDogSlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXI8YW55LCBUPiB8IEFycmF5TGlrZTxKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcjxhbnksIFQ+PixcbiAgZXZlbnROYW1lOiBzdHJpbmdcbik6IE9ic2VydmFibGU8VD47XG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFQsIFI+KFxuICB0YXJnZXQ6IEpRdWVyeVN0eWxlRXZlbnRFbWl0dGVyPGFueSwgVD4gfCBBcnJheUxpa2U8SlF1ZXJ5U3R5bGVFdmVudEVtaXR0ZXI8YW55LCBUPj4sXG4gIGV2ZW50TmFtZTogc3RyaW5nLFxuICByZXN1bHRTZWxlY3RvcjogKHZhbHVlOiBULCAuLi5hcmdzOiBhbnlbXSkgPT4gUlxuKTogT2JzZXJ2YWJsZTxSPjtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBldmVudHMgb2YgYSBzcGVjaWZpYyB0eXBlIGNvbWluZyBmcm9tIHRoZVxuICogZ2l2ZW4gZXZlbnQgdGFyZ2V0LlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5DcmVhdGVzIGFuIE9ic2VydmFibGUgZnJvbSBET00gZXZlbnRzLCBvciBOb2RlLmpzXG4gKiBFdmVudEVtaXR0ZXIgZXZlbnRzIG9yIG90aGVycy48L3NwYW4+XG4gKlxuICogIVtdKGZyb21FdmVudC5wbmcpXG4gKlxuICogYGZyb21FdmVudGAgYWNjZXB0cyBhcyBhIGZpcnN0IGFyZ3VtZW50IGV2ZW50IHRhcmdldCwgd2hpY2ggaXMgYW4gb2JqZWN0IHdpdGggbWV0aG9kc1xuICogZm9yIHJlZ2lzdGVyaW5nIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb25zLiBBcyBhIHNlY29uZCBhcmd1bWVudCBpdCB0YWtlcyBzdHJpbmcgdGhhdCBpbmRpY2F0ZXNcbiAqIHR5cGUgb2YgZXZlbnQgd2Ugd2FudCB0byBsaXN0ZW4gZm9yLiBgZnJvbUV2ZW50YCBzdXBwb3J0cyBzZWxlY3RlZCB0eXBlcyBvZiBldmVudCB0YXJnZXRzLFxuICogd2hpY2ggYXJlIGRlc2NyaWJlZCBpbiBkZXRhaWwgYmVsb3cuIElmIHlvdXIgZXZlbnQgdGFyZ2V0IGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgb25lcyBsaXN0ZWQsXG4gKiB5b3Ugc2hvdWxkIHVzZSB7QGxpbmsgZnJvbUV2ZW50UGF0dGVybn0sIHdoaWNoIGNhbiBiZSB1c2VkIG9uIGFyYml0cmFyeSBBUElzLlxuICogV2hlbiBpdCBjb21lcyB0byBBUElzIHN1cHBvcnRlZCBieSBgZnJvbUV2ZW50YCwgdGhlaXIgbWV0aG9kcyBmb3IgYWRkaW5nIGFuZCByZW1vdmluZyBldmVudFxuICogaGFuZGxlciBmdW5jdGlvbnMgaGF2ZSBkaWZmZXJlbnQgbmFtZXMsIGJ1dCB0aGV5IGFsbCBhY2NlcHQgYSBzdHJpbmcgZGVzY3JpYmluZyBldmVudCB0eXBlXG4gKiBhbmQgZnVuY3Rpb24gaXRzZWxmLCB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciBzYWlkIGV2ZW50IGhhcHBlbnMuXG4gKlxuICogRXZlcnkgdGltZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSBpcyBzdWJzY3JpYmVkLCBldmVudCBoYW5kbGVyIGZ1bmN0aW9uIHdpbGwgYmUgcmVnaXN0ZXJlZFxuICogdG8gZXZlbnQgdGFyZ2V0IG9uIGdpdmVuIGV2ZW50IHR5cGUuIFdoZW4gdGhhdCBldmVudCBmaXJlcywgdmFsdWVcbiAqIHBhc3NlZCBhcyBhIGZpcnN0IGFyZ3VtZW50IHRvIHJlZ2lzdGVyZWQgZnVuY3Rpb24gd2lsbCBiZSBlbWl0dGVkIGJ5IG91dHB1dCBPYnNlcnZhYmxlLlxuICogV2hlbiBPYnNlcnZhYmxlIGlzIHVuc3Vic2NyaWJlZCwgZnVuY3Rpb24gd2lsbCBiZSB1bnJlZ2lzdGVyZWQgZnJvbSBldmVudCB0YXJnZXQuXG4gKlxuICogTm90ZSB0aGF0IGlmIGV2ZW50IHRhcmdldCBjYWxscyByZWdpc3RlcmVkIGZ1bmN0aW9uIHdpdGggbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgc2Vjb25kXG4gKiBhbmQgZm9sbG93aW5nIGFyZ3VtZW50cyB3aWxsIG5vdCBhcHBlYXIgaW4gcmVzdWx0aW5nIHN0cmVhbS4gSW4gb3JkZXIgdG8gZ2V0IGFjY2VzcyB0byB0aGVtLFxuICogeW91IGNhbiBwYXNzIHRvIGBmcm9tRXZlbnRgIG9wdGlvbmFsIHByb2plY3QgZnVuY3Rpb24sIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHdpdGggYWxsIGFyZ3VtZW50c1xuICogcGFzc2VkIHRvIGV2ZW50IGhhbmRsZXIuIE91dHB1dCBPYnNlcnZhYmxlIHdpbGwgdGhlbiBlbWl0IHZhbHVlIHJldHVybmVkIGJ5IHByb2plY3QgZnVuY3Rpb24sXG4gKiBpbnN0ZWFkIG9mIHRoZSB1c3VhbCB2YWx1ZS5cbiAqXG4gKiBSZW1lbWJlciB0aGF0IGV2ZW50IHRhcmdldHMgbGlzdGVkIGJlbG93IGFyZSBjaGVja2VkIHZpYSBkdWNrIHR5cGluZy4gSXQgbWVhbnMgdGhhdFxuICogbm8gbWF0dGVyIHdoYXQga2luZCBvZiBvYmplY3QgeW91IGhhdmUgYW5kIG5vIG1hdHRlciB3aGF0IGVudmlyb25tZW50IHlvdSB3b3JrIGluLFxuICogeW91IGNhbiBzYWZlbHkgdXNlIGBmcm9tRXZlbnRgIG9uIHRoYXQgb2JqZWN0IGlmIGl0IGV4cG9zZXMgZGVzY3JpYmVkIG1ldGhvZHMgKHByb3ZpZGVkXG4gKiBvZiBjb3Vyc2UgdGhleSBiZWhhdmUgYXMgd2FzIGRlc2NyaWJlZCBhYm92ZSkuIFNvIGZvciBleGFtcGxlIGlmIE5vZGUuanMgbGlicmFyeSBleHBvc2VzXG4gKiBldmVudCB0YXJnZXQgd2hpY2ggaGFzIHRoZSBzYW1lIG1ldGhvZCBuYW1lcyBhcyBET00gRXZlbnRUYXJnZXQsIGBmcm9tRXZlbnRgIGlzIHN0aWxsXG4gKiBhIGdvb2QgY2hvaWNlLlxuICpcbiAqIElmIHRoZSBBUEkgeW91IHVzZSBpcyBtb3JlIGNhbGxiYWNrIHRoZW4gZXZlbnQgaGFuZGxlciBvcmllbnRlZCAoc3Vic2NyaWJlZFxuICogY2FsbGJhY2sgZnVuY3Rpb24gZmlyZXMgb25seSBvbmNlIGFuZCB0aHVzIHRoZXJlIGlzIG5vIG5lZWQgdG8gbWFudWFsbHlcbiAqIHVucmVnaXN0ZXIgaXQpLCB5b3Ugc2hvdWxkIHVzZSB7QGxpbmsgYmluZENhbGxiYWNrfSBvciB7QGxpbmsgYmluZE5vZGVDYWxsYmFja31cbiAqIGluc3RlYWQuXG4gKlxuICogYGZyb21FdmVudGAgc3VwcG9ydHMgZm9sbG93aW5nIHR5cGVzIG9mIGV2ZW50IHRhcmdldHM6XG4gKlxuICogKipET00gRXZlbnRUYXJnZXQqKlxuICpcbiAqIFRoaXMgaXMgYW4gb2JqZWN0IHdpdGggYGFkZEV2ZW50TGlzdGVuZXJgIGFuZCBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAgbWV0aG9kcy5cbiAqXG4gKiBJbiB0aGUgYnJvd3NlciwgYGFkZEV2ZW50TGlzdGVuZXJgIGFjY2VwdHMgLSBhcGFydCBmcm9tIGV2ZW50IHR5cGUgc3RyaW5nIGFuZCBldmVudFxuICogaGFuZGxlciBmdW5jdGlvbiBhcmd1bWVudHMgLSBvcHRpb25hbCB0aGlyZCBwYXJhbWV0ZXIsIHdoaWNoIGlzIGVpdGhlciBhbiBvYmplY3Qgb3IgYm9vbGVhbixcbiAqIGJvdGggdXNlZCBmb3IgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGhvdyBhbmQgd2hlbiBwYXNzZWQgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQuIFdoZW5cbiAqIGBmcm9tRXZlbnRgIGlzIHVzZWQgd2l0aCBldmVudCB0YXJnZXQgb2YgdGhhdCB0eXBlLCB5b3UgY2FuIHByb3ZpZGUgdGhpcyB2YWx1ZXNcbiAqIGFzIHRoaXJkIHBhcmFtZXRlciBhcyB3ZWxsLlxuICpcbiAqICoqTm9kZS5qcyBFdmVudEVtaXR0ZXIqKlxuICpcbiAqIEFuIG9iamVjdCB3aXRoIGBhZGRMaXN0ZW5lcmAgYW5kIGByZW1vdmVMaXN0ZW5lcmAgbWV0aG9kcy5cbiAqXG4gKiAqKkpRdWVyeS1zdHlsZSBldmVudCB0YXJnZXQqKlxuICpcbiAqIEFuIG9iamVjdCB3aXRoIGBvbmAgYW5kIGBvZmZgIG1ldGhvZHNcbiAqXG4gKiAqKkRPTSBOb2RlTGlzdCoqXG4gKlxuICogTGlzdCBvZiBET00gTm9kZXMsIHJldHVybmVkIGZvciBleGFtcGxlIGJ5IGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsYCBvciBgTm9kZS5jaGlsZE5vZGVzYC5cbiAqXG4gKiBBbHRob3VnaCB0aGlzIGNvbGxlY3Rpb24gaXMgbm90IGV2ZW50IHRhcmdldCBpbiBpdHNlbGYsIGBmcm9tRXZlbnRgIHdpbGwgaXRlcmF0ZSBvdmVyIGFsbCBOb2Rlc1xuICogaXQgY29udGFpbnMgYW5kIGluc3RhbGwgZXZlbnQgaGFuZGxlciBmdW5jdGlvbiBpbiBldmVyeSBvZiB0aGVtLiBXaGVuIHJldHVybmVkIE9ic2VydmFibGVcbiAqIGlzIHVuc3Vic2NyaWJlZCwgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGZyb20gYWxsIE5vZGVzLlxuICpcbiAqICoqRE9NIEh0bWxDb2xsZWN0aW9uKipcbiAqXG4gKiBKdXN0IGFzIGluIGNhc2Ugb2YgTm9kZUxpc3QgaXQgaXMgYSBjb2xsZWN0aW9uIG9mIERPTSBub2Rlcy4gSGVyZSBhcyB3ZWxsIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24gaXNcbiAqIGluc3RhbGxlZCBhbmQgcmVtb3ZlZCBpbiBlYWNoIG9mIGVsZW1lbnRzLlxuICpcbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIEVtaXQgY2xpY2tzIGhhcHBlbmluZyBvbiB0aGUgRE9NIGRvY3VtZW50XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZyb21FdmVudCB9IGZyb20gJ3J4anMnO1xuICpcbiAqIGNvbnN0IGNsaWNrcyA9IGZyb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJyk7XG4gKiBjbGlja3Muc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIC8vIFJlc3VsdHMgaW46XG4gKiAvLyBNb3VzZUV2ZW50IG9iamVjdCBsb2dnZWQgdG8gY29uc29sZSBldmVyeSB0aW1lIGEgY2xpY2tcbiAqIC8vIG9jY3VycyBvbiB0aGUgZG9jdW1lbnQuXG4gKiBgYGBcbiAqXG4gKiBVc2UgYGFkZEV2ZW50TGlzdGVuZXJgIHdpdGggY2FwdHVyZSBvcHRpb25cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gKiBkaXYuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMjAwcHg7IGhlaWdodDogMjAwcHg7IGJhY2tncm91bmQ6ICMwOWM7JztcbiAqIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAqXG4gKiAvLyBub3RlIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGFkZEV2ZW50TGlzdGVuZXJcbiAqIGNvbnN0IGNsaWNrc0luRG9jdW1lbnQgPSBmcm9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAqIGNvbnN0IGNsaWNrc0luRGl2ID0gZnJvbUV2ZW50KGRpdiwgJ2NsaWNrJyk7XG4gKlxuICogY2xpY2tzSW5Eb2N1bWVudC5zdWJzY3JpYmUoKCkgPT4gY29uc29sZS5sb2coJ2RvY3VtZW50JykpO1xuICogY2xpY2tzSW5EaXYuc3Vic2NyaWJlKCgpID0+IGNvbnNvbGUubG9nKCdkaXYnKSk7XG4gKlxuICogLy8gQnkgZGVmYXVsdCBldmVudHMgYnViYmxlIFVQIGluIERPTSB0cmVlLCBzbyBub3JtYWxseVxuICogLy8gd2hlbiB3ZSB3b3VsZCBjbGljayBvbiBkaXYgaW4gZG9jdW1lbnRcbiAqIC8vIFwiZGl2XCIgd291bGQgYmUgbG9nZ2VkIGZpcnN0IGFuZCB0aGVuIFwiZG9jdW1lbnRcIi5cbiAqIC8vIFNpbmNlIHdlIHNwZWNpZmllZCBvcHRpb25hbCBgY2FwdHVyZWAgb3B0aW9uLCBkb2N1bWVudFxuICogLy8gd2lsbCBjYXRjaCBldmVudCB3aGVuIGl0IGdvZXMgRE9XTiBET00gdHJlZSwgc28gY29uc29sZVxuICogLy8gd2lsbCBsb2cgXCJkb2N1bWVudFwiIGFuZCB0aGVuIFwiZGl2XCIuXG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBiaW5kQ2FsbGJhY2t9XG4gKiBAc2VlIHtAbGluayBiaW5kTm9kZUNhbGxiYWNrfVxuICogQHNlZSB7QGxpbmsgZnJvbUV2ZW50UGF0dGVybn1cbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBET00gRXZlbnRUYXJnZXQsIE5vZGUuanMgRXZlbnRFbWl0dGVyLCBKUXVlcnktbGlrZSBldmVudCB0YXJnZXQsXG4gKiBOb2RlTGlzdCBvciBIVE1MQ29sbGVjdGlvbiB0byBhdHRhY2ggdGhlIGV2ZW50IGhhbmRsZXIgdG8uXG4gKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIG9mIGludGVyZXN0LCBiZWluZyBlbWl0dGVkIGJ5IHRoZSBgdGFyZ2V0YC5cbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gcGFzcyB0aHJvdWdoIHRvIHRoZSB1bmRlcmx5aW5nIGBhZGRMaXN0ZW5lcmAsXG4gKiBgYWRkRXZlbnRMaXN0ZW5lcmAgb3IgYG9uYCBmdW5jdGlvbnMuXG4gKiBAcGFyYW0gcmVzdWx0U2VsZWN0b3IgQSBtYXBwaW5nIGZ1bmN0aW9uIHVzZWQgdG8gdHJhbnNmb3JtIGV2ZW50cy4gSXQgdGFrZXMgdGhlXG4gKiBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciBhbmQgc2hvdWxkIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cbiAqIEByZXR1cm4gQW4gT2JzZXJ2YWJsZSBlbWl0dGluZyBldmVudHMgcmVnaXN0ZXJlZCB0aHJvdWdoIGB0YXJnZXRgJ3NcbiAqIGxpc3RlbmVyIGhhbmRsZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFQ+KFxuICB0YXJnZXQ6IGFueSxcbiAgZXZlbnROYW1lOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucyB8ICgoLi4uYXJnczogYW55W10pID0+IFQpLFxuICByZXN1bHRTZWxlY3Rvcj86ICguLi5hcmdzOiBhbnlbXSkgPT4gVFxuKTogT2JzZXJ2YWJsZTxUPiB7XG4gIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgcmVzdWx0U2VsZWN0b3IgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGZyb21FdmVudDxUPih0YXJnZXQsIGV2ZW50TmFtZSwgb3B0aW9ucyBhcyBFdmVudExpc3RlbmVyT3B0aW9ucykucGlwZShtYXBPbmVPck1hbnlBcmdzKHJlc3VsdFNlbGVjdG9yKSk7XG4gIH1cblxuICAvLyBGaWd1cmUgb3V0IG91ciBhZGQgYW5kIHJlbW92ZSBtZXRob2RzLiBJbiBvcmRlciB0byBkbyB0aGlzLFxuICAvLyB3ZSBhcmUgZ29pbmcgdG8gYW5hbHl6ZSB0aGUgdGFyZ2V0IGluIGEgcHJlZmVycmVkIG9yZGVyLCBpZlxuICAvLyB0aGUgdGFyZ2V0IG1hdGNoZXMgYSBnaXZlbiBzaWduYXR1cmUsIHdlIHRha2UgdGhlIHR3byBcImFkZFwiIGFuZCBcInJlbW92ZVwiXG4gIC8vIG1ldGhvZCBuYW1lcyBhbmQgYXBwbHkgdGhlbSB0byBhIG1hcCB0byBjcmVhdGUgb3Bwb3NpdGUgdmVyc2lvbnMgb2YgdGhlXG4gIC8vIHNhbWUgZnVuY3Rpb24uIFRoaXMgaXMgYmVjYXVzZSB0aGV5IGFsbCBvcGVyYXRlIGluIGR1cGxpY2F0ZSBwYWlycyxcbiAgLy8gYGFkZExpc3RlbmVyKG5hbWUsIGhhbmRsZXIpYCwgYHJlbW92ZUxpc3RlbmVyKG5hbWUsIGhhbmRsZXIpYCwgZm9yIGV4YW1wbGUuXG4gIC8vIFRoZSBjYWxsIG9ubHkgZGlmZmVycyBieSBtZXRob2QgbmFtZSwgYXMgdG8gd2hldGhlciBvciBub3QgeW91J3JlIGFkZGluZyBvciByZW1vdmluZy5cbiAgY29uc3QgW2FkZCwgcmVtb3ZlXSA9XG4gICAgLy8gSWYgaXQgaXMgYW4gRXZlbnRUYXJnZXQsIHdlIG5lZWQgdG8gdXNlIGEgc2xpZ2h0bHkgZGlmZmVyZW50IG1ldGhvZCB0aGFuIHRoZSBvdGhlciB0d28gcGF0dGVybnMuXG4gICAgaXNFdmVudFRhcmdldCh0YXJnZXQpXG4gICAgICA/IGV2ZW50VGFyZ2V0TWV0aG9kcy5tYXAoKG1ldGhvZE5hbWUpID0+IChoYW5kbGVyOiBhbnkpID0+IHRhcmdldFttZXRob2ROYW1lXShldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMgYXMgRXZlbnRMaXN0ZW5lck9wdGlvbnMpKVxuICAgICAgOiAvLyBJbiBhbGwgb3RoZXIgY2FzZXMsIHRoZSBjYWxsIHBhdHRlcm4gaXMgaWRlbnRpY2FsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiB0aGUgbWV0aG9kIG5hbWVzLlxuICAgICAgaXNOb2RlU3R5bGVFdmVudEVtaXR0ZXIodGFyZ2V0KVxuICAgICAgPyBub2RlRXZlbnRFbWl0dGVyTWV0aG9kcy5tYXAodG9Db21tb25IYW5kbGVyUmVnaXN0cnkodGFyZ2V0LCBldmVudE5hbWUpKVxuICAgICAgOiBpc0pRdWVyeVN0eWxlRXZlbnRFbWl0dGVyKHRhcmdldClcbiAgICAgID8ganF1ZXJ5TWV0aG9kcy5tYXAodG9Db21tb25IYW5kbGVyUmVnaXN0cnkodGFyZ2V0LCBldmVudE5hbWUpKVxuICAgICAgOiBbXTtcblxuICAvLyBJZiBhZGQgaXMgZmFsc3ksIGl0J3MgYmVjYXVzZSB3ZSBkaWRuJ3QgbWF0Y2ggYSBwYXR0ZXJuIGFib3ZlLlxuICAvLyBDaGVjayB0byBzZWUgaWYgaXQgaXMgYW4gQXJyYXlMaWtlLCBiZWNhdXNlIGlmIGl0IGlzLCB3ZSB3YW50IHRvXG4gIC8vIHRyeSB0byBhcHBseSBmcm9tRXZlbnQgdG8gYWxsIG9mIGl0J3MgaXRlbXMuIFdlIGRvIHRoaXMgY2hlY2sgbGFzdCxcbiAgLy8gYmVjYXVzZSB0aGVyZSBhcmUgbWF5IGJlIHNvbWUgdHlwZXMgdGhhdCBhcmUgYm90aCBBcnJheUxpa2UgKmFuZCogaW1wbGVtZW50XG4gIC8vIGV2ZW50IHJlZ2lzdHJ5IHBvaW50cywgYW5kIHdlJ2QgcmF0aGVyIGRlbGVnYXRlIHRvIHRoYXQgd2hlbiBwb3NzaWJsZS5cbiAgaWYgKCFhZGQpIHtcbiAgICBpZiAoaXNBcnJheUxpa2UodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIG1lcmdlTWFwKChzdWJUYXJnZXQ6IGFueSkgPT4gZnJvbUV2ZW50KHN1YlRhcmdldCwgZXZlbnROYW1lLCBvcHRpb25zIGFzIEV2ZW50TGlzdGVuZXJPcHRpb25zKSkoXG4gICAgICAgIGlubmVyRnJvbSh0YXJnZXQpXG4gICAgICApIGFzIE9ic2VydmFibGU8VD47XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgYWRkIGlzIGZhbHN5IGFuZCB3ZSBtYWRlIGl0IGhlcmUsIGl0J3MgYmVjYXVzZSB3ZSBkaWRuJ3RcbiAgLy8gbWF0Y2ggYW55IHZhbGlkIHRhcmdldCBvYmplY3RzIGFib3ZlLlxuICBpZiAoIWFkZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgZXZlbnQgdGFyZ2V0Jyk7XG4gIH1cblxuICByZXR1cm4gbmV3IE9ic2VydmFibGU8VD4oKHN1YnNjcmliZXIpID0+IHtcbiAgICAvLyBUaGUgaGFuZGxlciB3ZSBhcmUgZ29pbmcgdG8gcmVnaXN0ZXIuIEZvcndhcmRzIHRoZSBldmVudCBvYmplY3QsIGJ5IGl0c2VsZiwgb3JcbiAgICAvLyBhbiBhcnJheSBvZiBhcmd1bWVudHMgdG8gdGhlIGV2ZW50IGhhbmRsZXIsIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQsXG4gICAgLy8gdG8gdGhlIGNvbnN1bWVyLlxuICAgIGNvbnN0IGhhbmRsZXIgPSAoLi4uYXJnczogYW55W10pID0+IHN1YnNjcmliZXIubmV4dCgxIDwgYXJncy5sZW5ndGggPyBhcmdzIDogYXJnc1swXSk7XG4gICAgLy8gRG8gdGhlIHdvcmsgb2YgYWRkaW5nIHRoZSBoYW5kbGVyIHRvIHRoZSB0YXJnZXQuXG4gICAgYWRkKGhhbmRsZXIpO1xuICAgIC8vIFdoZW4gd2UgZmluYWxpemUsIHdlIHdhbnQgdG8gcmVtb3ZlIHRoZSBoYW5kbGVyIGFuZCBmcmVlIHVwIG1lbW9yeS5cbiAgICByZXR1cm4gKCkgPT4gcmVtb3ZlIShoYW5kbGVyKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjcmVhdGUgYGFkZGAgYW5kIGByZW1vdmVgIGZ1bmN0aW9ucyB0byByZWdpc3RlciBhbmQgdW5yZWdpc3RlciBldmVudCBoYW5kbGVyc1xuICogZnJvbSBhIHRhcmdldCBpbiB0aGUgbW9zdCBjb21tb24gaGFuZGxlciBwYXR0ZXJuLCB3aGVyZSB0aGVyZSBhcmUgb25seSB0d28gYXJndW1lbnRzLlxuICogKGUuZy4gIGBvbihuYW1lLCBmbilgLCBgb2ZmKG5hbWUsIGZuKWAsIGBhZGRMaXN0ZW5lcihuYW1lLCBmbilgLCBvciBgcmVtb3ZlTGlzdGVuZXIobmFtZSwgZm4pYClcbiAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCB3ZSdyZSBjYWxsaW5nIG1ldGhvZHMgb25cbiAqIEBwYXJhbSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgZm9yIHRoZSBldmVudCB3ZSdyZSBjcmVhdGluZyByZWdpc3RlciBvciB1bnJlZ2lzdGVyIGZ1bmN0aW9ucyBmb3JcbiAqL1xuZnVuY3Rpb24gdG9Db21tb25IYW5kbGVyUmVnaXN0cnkodGFyZ2V0OiBhbnksIGV2ZW50TmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiAobWV0aG9kTmFtZTogc3RyaW5nKSA9PiAoaGFuZGxlcjogYW55KSA9PiB0YXJnZXRbbWV0aG9kTmFtZV0oZXZlbnROYW1lLCBoYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgdG8gc2VlIGlmIHRoZSB0YXJnZXQgaW1wbGVtZW50cyB0aGUgcmVxdWlyZWQgbm9kZS1zdHlsZSBFdmVudEVtaXR0ZXIgbWV0aG9kc1xuICogZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgZXZlbnQgaGFuZGxlcnMuXG4gKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdG8gY2hlY2tcbiAqL1xuZnVuY3Rpb24gaXNOb2RlU3R5bGVFdmVudEVtaXR0ZXIodGFyZ2V0OiBhbnkpOiB0YXJnZXQgaXMgTm9kZVN0eWxlRXZlbnRFbWl0dGVyIHtcbiAgcmV0dXJuIGlzRnVuY3Rpb24odGFyZ2V0LmFkZExpc3RlbmVyKSAmJiBpc0Z1bmN0aW9uKHRhcmdldC5yZW1vdmVMaXN0ZW5lcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgdGFyZ2V0IGltcGxlbWVudHMgdGhlIHJlcXVpcmVkIGpRdWVyeS1zdHlsZSBFdmVudEVtaXR0ZXIgbWV0aG9kc1xuICogZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgZXZlbnQgaGFuZGxlcnMuXG4gKiBAcGFyYW0gdGFyZ2V0IHRoZSBvYmplY3QgdG8gY2hlY2tcbiAqL1xuZnVuY3Rpb24gaXNKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcih0YXJnZXQ6IGFueSk6IHRhcmdldCBpcyBKUXVlcnlTdHlsZUV2ZW50RW1pdHRlcjxhbnksIGFueT4ge1xuICByZXR1cm4gaXNGdW5jdGlvbih0YXJnZXQub24pICYmIGlzRnVuY3Rpb24odGFyZ2V0Lm9mZik7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgdGFyZ2V0IGltcGxlbWVudHMgdGhlIHJlcXVpcmVkIEV2ZW50VGFyZ2V0IG1ldGhvZHNcbiAqIGZvciBhZGRpbmcgYW5kIHJlbW92aW5nIGV2ZW50IGhhbmRsZXJzLlxuICogQHBhcmFtIHRhcmdldCB0aGUgb2JqZWN0IHRvIGNoZWNrXG4gKi9cbmZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQodGFyZ2V0OiBhbnkpOiB0YXJnZXQgaXMgSGFzRXZlbnRUYXJnZXRBZGRSZW1vdmU8YW55PiB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHRhcmdldC5hZGRFdmVudExpc3RlbmVyKSAmJiBpc0Z1bmN0aW9uKHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKTtcbn1cbiJdfQ==
