import{Subject}from"../Subject";import{Observable}from"../Observable";import{defer}from"./defer";let DEFAULT_CONFIG={connector:()=>new Subject,resetOnDisconnect:!0};function connectable(e,n=DEFAULT_CONFIG){let c=null,{connector:r,resetOnDisconnect:t=!0}=n,o=r();n=new Observable(e=>o.subscribe(e));return n.connect=()=>(c&&!c.closed||(c=defer(()=>e).subscribe(o),t&&c.add(()=>o=r())),c),n}export{connectable};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2Nvbm5lY3RhYmxlLnRzIl0sIm5hbWVzIjpbIlN1YmplY3QiLCJPYnNlcnZhYmxlIiwiZGVmZXIiLCJERUZBVUxUX0NPTkZJRyIsImNvbm5lY3RvciIsInJlc2V0T25EaXNjb25uZWN0IiwiY29ubmVjdGFibGUiLCJzb3VyY2UiLCJjb25maWciLCJsZXQiLCJjb25uZWN0aW9uIiwic3ViamVjdCIsInJlc3VsdCIsInN1YnNjcmliZSIsInN1YnNjcmliZXIiLCJjb25uZWN0IiwiY2xvc2VkIiwiYWRkIl0sIm1hcHBpbmdzIjoiT0FDU0EsT0FBMkIsS0FBWixvQkFFZkMsVUFBaUMsS0FBZix1QkFDbEJDLEtBQXNCLEtBQVQsVUFzQnRCLElBQU1DLGVBQTZDLENBQ2pEQyxVQUFXLElBQU0sSUFBSUosUUFDckJLLGtCQUFtQixDQUFBLEMsRUFXZixTQUFVQyxZQUFlQyxFQUE0QkMsRUFBK0JMLGdCQUV4Rk0sSUFBSUMsRUFBa0MsS0FDaEMsQ0FBRU4sVUFBQUEsRUFBV0Msa0JBQUFBLEVBQW9CLENBQUEsQ0FBSSxFQUFLRyxFQUM1Q0csRUFBVVAsRUFBUyxFQUVqQlEsRUFBYyxJQUFJWCxXQUFjLEdBQzdCVSxFQUFRRSxVQUFVQyxDQUFVLENBQ3BDLEVBZUQsT0FWQUYsRUFBT0csUUFBVSxLQUNWTCxHQUFjQSxDQUFBQSxFQUFXTSxTQUM1Qk4sRUFBYVIsTUFBTSxJQUFNSyxDQUFNLEVBQUVNLFVBQVVGLENBQU8sRUFDOUNOLEdBQ0ZLLEVBQVdPLElBQUksSUFBT04sRUFBVVAsRUFBUyxDQUFHLEdBR3pDTSxHQUdGRSxDQUNULFFBeEJnQk4sV0F3QmhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2Nvbm5lY3RhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGFibGUsIE9ic2VydmFibGVJbnB1dCwgU3ViamVjdExpa2UgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAnLi4vU3ViamVjdCc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgZGVmZXIgfSBmcm9tICcuL2RlZmVyJztcblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0YWJsZUNvbmZpZzxUPiB7XG4gIC8qKlxuICAgKiBBIGZhY3RvcnkgZnVuY3Rpb24gdXNlZCB0byBjcmVhdGUgdGhlIFN1YmplY3QgdGhyb3VnaCB3aGljaCB0aGUgc291cmNlXG4gICAqIGlzIG11bHRpY2FzdC4gQnkgZGVmYXVsdCB0aGlzIGNyZWF0ZXMgYSB7QGxpbmsgU3ViamVjdH0uXG4gICAqL1xuICBjb25uZWN0b3I6ICgpID0+IFN1YmplY3RMaWtlPFQ+O1xuICAvKipcbiAgICogSWYgdHJ1ZSwgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHdpbGwgcmVzZXQgaW50ZXJuYWwgc3RhdGUgdXBvbiBkaXNjb25uZWN0aW9uXG4gICAqIGFuZCByZXR1cm4gdG8gYSBcImNvbGRcIiBzdGF0ZS4gVGhpcyBhbGxvd3MgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHRvIGJlXG4gICAqIHJlY29ubmVjdGVkLlxuICAgKiBJZiBmYWxzZSwgdXBvbiBkaXNjb25uZWN0aW9uLCB0aGUgY29ubmVjdGluZyBzdWJqZWN0IHdpbGwgcmVtYWluIHRoZVxuICAgKiBjb25uZWN0aW5nIHN1YmplY3QsIG1lYW5pbmcgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHdpbGwgbm90IGdvIFwiY29sZFwiIGFnYWluLFxuICAgKiBhbmQgc3Vic2VxdWVudCByZXBlYXRzIG9yIHJlc3Vic2NyaXB0aW9ucyB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoYXQgc2FtZSBzdWJqZWN0LlxuICAgKi9cbiAgcmVzZXRPbkRpc2Nvbm5lY3Q/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gZm9yIGBjb25uZWN0YWJsZWAuXG4gKi9cbmNvbnN0IERFRkFVTFRfQ09ORklHOiBDb25uZWN0YWJsZUNvbmZpZzx1bmtub3duPiA9IHtcbiAgY29ubmVjdG9yOiAoKSA9PiBuZXcgU3ViamVjdDx1bmtub3duPigpLFxuICByZXNldE9uRGlzY29ubmVjdDogdHJ1ZSxcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHRoYXQgbXVsdGljYXN0cyBvbmNlIGBjb25uZWN0KClgIGlzIGNhbGxlZCBvbiBpdC5cbiAqXG4gKiBAcGFyYW0gc291cmNlIFRoZSBvYnNlcnZhYmxlIHNvdXJjZSB0byBtYWtlIGNvbm5lY3RhYmxlLlxuICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIGBjb25uZWN0YWJsZWAuXG4gKiBAcmV0dXJucyBBIFwiY29ubmVjdGFibGVcIiBvYnNlcnZhYmxlLCB0aGF0IGhhcyBhIGBjb25uZWN0KClgIG1ldGhvZCwgdGhhdCB5b3UgbXVzdCBjYWxsIHRvXG4gKiBjb25uZWN0IHRoZSBzb3VyY2UgdG8gYWxsIGNvbnN1bWVycyB0aHJvdWdoIHRoZSBzdWJqZWN0IHByb3ZpZGVkIGFzIHRoZSBjb25uZWN0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0YWJsZTxUPihzb3VyY2U6IE9ic2VydmFibGVJbnB1dDxUPiwgY29uZmlnOiBDb25uZWN0YWJsZUNvbmZpZzxUPiA9IERFRkFVTFRfQ09ORklHKTogQ29ubmVjdGFibGU8VD4ge1xuICAvLyBUaGUgc3Vic2NyaXB0aW9uIHJlcHJlc2VudGluZyB0aGUgY29ubmVjdGlvbi5cbiAgbGV0IGNvbm5lY3Rpb246IFN1YnNjcmlwdGlvbiB8IG51bGwgPSBudWxsO1xuICBjb25zdCB7IGNvbm5lY3RvciwgcmVzZXRPbkRpc2Nvbm5lY3QgPSB0cnVlIH0gPSBjb25maWc7XG4gIGxldCBzdWJqZWN0ID0gY29ubmVjdG9yKCk7XG5cbiAgY29uc3QgcmVzdWx0OiBhbnkgPSBuZXcgT2JzZXJ2YWJsZTxUPigoc3Vic2NyaWJlcikgPT4ge1xuICAgIHJldHVybiBzdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIHRoZSBgY29ubmVjdGAgZnVuY3Rpb24uIFRoaXMgaXMgd2hhdCB1c2VycyBtdXN0IGNhbGxcbiAgLy8gaW4gb3JkZXIgdG8gXCJjb25uZWN0XCIgdGhlIHNvdXJjZSB0byB0aGUgc3ViamVjdCB0aGF0IGlzXG4gIC8vIG11bHRpY2FzdGluZyBpdC5cbiAgcmVzdWx0LmNvbm5lY3QgPSAoKSA9PiB7XG4gICAgaWYgKCFjb25uZWN0aW9uIHx8IGNvbm5lY3Rpb24uY2xvc2VkKSB7XG4gICAgICBjb25uZWN0aW9uID0gZGVmZXIoKCkgPT4gc291cmNlKS5zdWJzY3JpYmUoc3ViamVjdCk7XG4gICAgICBpZiAocmVzZXRPbkRpc2Nvbm5lY3QpIHtcbiAgICAgICAgY29ubmVjdGlvbi5hZGQoKCkgPT4gKHN1YmplY3QgPSBjb25uZWN0b3IoKSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29ubmVjdGlvbjtcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIl19
