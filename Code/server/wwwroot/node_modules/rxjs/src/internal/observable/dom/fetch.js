import{createOperatorSubscriber}from"../../operators/OperatorSubscriber";import{Observable}from"../../Observable";import{innerFrom}from"../../observable/innerFrom";function fromFetch(i,r={}){let{selector:l,...s}=r;return new Observable(e=>{let t=new AbortController,o=t.signal,a=!0,b=s.signal;if(b)if(b.aborted)t.abort();else{let r=()=>{o.aborted||t.abort()};b.addEventListener("abort",r),e.add(()=>b.removeEventListener("abort",r))}var r={...s,signal:o};let n=r=>{a=!1,e.error(r)};return fetch(i,r).then(r=>{l?innerFrom(l(r)).subscribe(createOperatorSubscriber(e,void 0,()=>{a=!1,e.complete()},n)):(a=!1,e.next(r),e.complete())}).catch(n),()=>{a&&t.abort()}})}export{fromFetch};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2RvbS9mZXRjaC50cyJdLCJuYW1lcyI6WyJjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIiLCJPYnNlcnZhYmxlIiwiaW5uZXJGcm9tIiwiZnJvbUZldGNoIiwiaW5wdXQiLCJpbml0V2l0aFNlbGVjdG9yIiwic2VsZWN0b3IiLCJpbml0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInNpZ25hbCIsImFib3J0YWJsZSIsIm91dGVyU2lnbmFsIiwiYWJvcnRlZCIsImFib3J0Iiwib3V0ZXJTaWduYWxIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1YnNjcmliZXIiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGVyU3Vic2NyaWJlckluaXQiLCJoYW5kbGVFcnJvciIsImVycm9yIiwiZXJyIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJzdWJzY3JpYmUiLCJ1bmRlZmluZWQiLCJjb21wbGV0ZSIsIm5leHQiLCJjYXRjaCJdLCJtYXBwaW5ncyI6Ik9BQVNBLHdCQUFvRSxLQUFwQyw0Q0FDaENDLFVBQW9DLEtBQWxCLDBCQUNsQkMsU0FBNkMsS0FBNUIsNkJBNEZwQixTQUFVQyxVQUNkQyxFQUNBQyxFQUVJLElBRUosR0FBTSxDQUFFQyxTQUFBQSxLQUFhQyxDQUFJLEVBQUtGLEVBQzlCLE9BQU8sSUFBSUosV0FBeUIsSUFLbEMsSUFBTU8sRUFBYSxJQUFJQyxnQkFDZkMsRUFBV0YsRUFBTCxPQUtWRyxFQUFZLENBQUEsRUFLQUMsRUFBZ0JMLEVBQUwsT0FDM0IsR0FBSUssRUFDRixHQUFJQSxFQUFZQyxRQUNkTCxFQUFXTSxNQUFLLE1BQ1gsQ0FHTCxJQUFNQyxFQUFxQixLQUNwQkwsRUFBT0csU0FDVkwsRUFBV00sTUFBSyxDQUVwQixFQUNBRixFQUFZSSxpQkFBaUIsUUFBU0QsQ0FBa0IsRUFDeERFLEVBQVdDLElBQUksSUFBTU4sRUFBWU8sb0JBQW9CLFFBQVNKLENBQWtCLENBQUMsQ0FDbkYsQ0FRRixJQUFNSyxFQUFpQyxDQUFFLEdBQUdiLEVBQU1HLE9BQUFBLENBQU0sRUFFeEQsSUFBTVcsRUFBYyxJQUNsQlYsRUFBWSxDQUFBLEVBQ1pNLEVBQVdLLE1BQU1DLENBQUcsQ0FDdEIsRUE2QkEsT0EzQkFDLE1BQU1wQixFQUFPZ0IsQ0FBaUIsRUFDM0JLLEtBQUssSUFDQW5CLEVBSUZKLFVBQVVJLEVBQVNvQixDQUFRLENBQUMsRUFBRUMsVUFDNUIzQix5QkFDRWlCLEVBRUFXLEtBQUFBLEVBRUEsS0FDRWpCLEVBQVksQ0FBQSxFQUNaTSxFQUFXWSxTQUFRLENBQ3JCLEVBQ0FSLENBQVcsQ0FDWixHQUdIVixFQUFZLENBQUEsRUFDWk0sRUFBV2EsS0FBS0osQ0FBUSxFQUN4QlQsRUFBV1ksU0FBUSxFQUV2QixDQUFDLEVBQ0FFLE1BQU1WLENBQVcsRUFFYixLQUNEVixHQUNGSCxFQUFXTSxNQUFLLENBRXBCLENBQ0YsQ0FBQyxDQUNILFFBckZnQlgsU0FxRmhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2RvbS9mZXRjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciB9IGZyb20gJy4uLy4uL29wZXJhdG9ycy9PcGVyYXRvclN1YnNjcmliZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uLy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZUlucHV0IH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUZldGNoPFQ+KFxuICBpbnB1dDogc3RyaW5nIHwgUmVxdWVzdCxcbiAgaW5pdDogUmVxdWVzdEluaXQgJiB7XG4gICAgc2VsZWN0b3I6IChyZXNwb25zZTogUmVzcG9uc2UpID0+IE9ic2VydmFibGVJbnB1dDxUPjtcbiAgfVxuKTogT2JzZXJ2YWJsZTxUPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21GZXRjaChpbnB1dDogc3RyaW5nIHwgUmVxdWVzdCwgaW5pdD86IFJlcXVlc3RJbml0KTogT2JzZXJ2YWJsZTxSZXNwb25zZT47XG5cbi8qKlxuICogVXNlcyBbdGhlIEZldGNoIEFQSV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSSkgdG9cbiAqIG1ha2UgYW4gSFRUUCByZXF1ZXN0LlxuICpcbiAqICoqV0FSTklORyoqIFBhcnRzIG9mIHRoZSBmZXRjaCBBUEkgYXJlIHN0aWxsIGV4cGVyaW1lbnRhbC4gYEFib3J0Q29udHJvbGxlcmAgaXNcbiAqIHJlcXVpcmVkIGZvciB0aGlzIGltcGxlbWVudGF0aW9uIHRvIHdvcmsgYW5kIHVzZSBjYW5jZWxsYXRpb24gYXBwcm9wcmlhdGVseS5cbiAqXG4gKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHVwIGFuIGludGVybmFsIFtBYm9ydENvbnRyb2xsZXJdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BYm9ydENvbnRyb2xsZXIpXG4gKiBpbiBvcmRlciB0byBmaW5hbGl6ZSB0aGUgaW50ZXJuYWwgYGZldGNoYCB3aGVuIHRoZSBzdWJzY3JpcHRpb24gdGVhcnMgZG93bi5cbiAqXG4gKiBJZiBhIGBzaWduYWxgIGlzIHByb3ZpZGVkIHZpYSB0aGUgYGluaXRgIGFyZ3VtZW50LCBpdCB3aWxsIGJlaGF2ZSBsaWtlIGl0IHVzdWFsbHkgZG9lcyB3aXRoXG4gKiBgZmV0Y2hgLiBJZiB0aGUgcHJvdmlkZWQgYHNpZ25hbGAgYWJvcnRzLCB0aGUgZXJyb3IgdGhhdCBgZmV0Y2hgIG5vcm1hbGx5IHJlamVjdHMgd2l0aFxuICogaW4gdGhhdCBzY2VuYXJpbyB3aWxsIGJlIGVtaXR0ZWQgYXMgYW4gZXJyb3IgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIEJhc2ljIHVzZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmcm9tRmV0Y2ggfSBmcm9tICdyeGpzL2ZldGNoJztcbiAqIGltcG9ydCB7IHN3aXRjaE1hcCwgb2YsIGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBkYXRhJCA9IGZyb21GZXRjaCgnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2Vycz9wZXJfcGFnZT01JykucGlwZShcbiAqICAgc3dpdGNoTWFwKHJlc3BvbnNlID0+IHtcbiAqICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAqICAgICAgIC8vIE9LIHJldHVybiBkYXRhXG4gKiAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICAvLyBTZXJ2ZXIgaXMgcmV0dXJuaW5nIGEgc3RhdHVzIHJlcXVpcmluZyB0aGUgY2xpZW50IHRvIHRyeSBzb21ldGhpbmcgZWxzZS5cbiAqICAgICAgIHJldHVybiBvZih7IGVycm9yOiB0cnVlLCBtZXNzYWdlOiBgRXJyb3IgJHsgcmVzcG9uc2Uuc3RhdHVzIH1gIH0pO1xuICogICAgIH1cbiAqICAgfSksXG4gKiAgIGNhdGNoRXJyb3IoZXJyID0+IHtcbiAqICAgICAvLyBOZXR3b3JrIG9yIG90aGVyIGVycm9yLCBoYW5kbGUgYXBwcm9wcmlhdGVseVxuICogICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAqICAgICByZXR1cm4gb2YoeyBlcnJvcjogdHJ1ZSwgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSlcbiAqICAgfSlcbiAqICk7XG4gKlxuICogZGF0YSQuc3Vic2NyaWJlKHtcbiAqICAgbmV4dDogcmVzdWx0ID0+IGNvbnNvbGUubG9nKHJlc3VsdCksXG4gKiAgIGNvbXBsZXRlOiAoKSA9PiBjb25zb2xlLmxvZygnZG9uZScpXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyBVc2Ugd2l0aCBDaHVua2VkIFRyYW5zZmVyIEVuY29kaW5nXG4gKlxuICogV2l0aCBIVFRQIHJlc3BvbnNlcyB0aGF0IHVzZSBbY2h1bmtlZCB0cmFuc2ZlciBlbmNvZGluZ10oaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjMuMSksXG4gKiB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSBgZmV0Y2hgIHdpbGwgcmVzb2x2ZSBhcyBzb29uIGFzIHRoZSByZXNwb25zZSdzIGhlYWRlcnMgYXJlXG4gKiByZWNlaXZlZC5cbiAqXG4gKiBUaGF0IG1lYW5zIHRoZSBgZnJvbUZldGNoYCBvYnNlcnZhYmxlIHdpbGwgZW1pdCBhIGBSZXNwb25zZWAgLSBhbmQgd2lsbFxuICogdGhlbiBjb21wbGV0ZSAtIGJlZm9yZSB0aGUgYm9keSBpcyByZWNlaXZlZC4gV2hlbiBvbmUgb2YgdGhlIG1ldGhvZHMgb24gdGhlXG4gKiBgUmVzcG9uc2VgIC0gbGlrZSBgdGV4dCgpYCBvciBganNvbigpYCAtIGlzIGNhbGxlZCwgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBub3RcbiAqIHJlc29sdmUgdW50aWwgdGhlIGVudGlyZSBib2R5IGhhcyBiZWVuIHJlY2VpdmVkLiBVbnN1YnNjcmliaW5nIGZyb20gYW55IG9ic2VydmFibGVcbiAqIHRoYXQgdXNlcyB0aGUgcHJvbWlzZSBhcyBhbiBvYnNlcnZhYmxlIGlucHV0IHdpbGwgbm90IGFib3J0IHRoZSByZXF1ZXN0LlxuICpcbiAqIFRvIGZhY2lsaXRhdGUgYWJvcnRpbmcgdGhlIHJldHJpZXZhbCBvZiByZXNwb25zZXMgdGhhdCB1c2UgY2h1bmtlZCB0cmFuc2ZlciBlbmNvZGluZyxcbiAqIGEgYHNlbGVjdG9yYCBjYW4gYmUgc3BlY2lmaWVkIHZpYSB0aGUgYGluaXRgIHBhcmFtZXRlcjpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcbiAqIGltcG9ydCB7IGZyb21GZXRjaCB9IGZyb20gJ3J4anMvZmV0Y2gnO1xuICpcbiAqIGNvbnN0IGRhdGEkID0gZnJvbUZldGNoKCdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXJzP3Blcl9wYWdlPTUnLCB7XG4gKiAgIHNlbGVjdG9yOiByZXNwb25zZSA9PiByZXNwb25zZS5qc29uKClcbiAqIH0pO1xuICpcbiAqIGRhdGEkLnN1YnNjcmliZSh7XG4gKiAgIG5leHQ6IHJlc3VsdCA9PiBjb25zb2xlLmxvZyhyZXN1bHQpLFxuICogICBjb21wbGV0ZTogKCkgPT4gY29uc29sZS5sb2coJ2RvbmUnKVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gaW5wdXQgVGhlIHJlc291cmNlIHlvdSB3b3VsZCBsaWtlIHRvIGZldGNoLiBDYW4gYmUgYSB1cmwgb3IgYSByZXF1ZXN0IG9iamVjdC5cbiAqIEBwYXJhbSBpbml0V2l0aFNlbGVjdG9yIEEgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRoZSBmZXRjaC5cbiAqIFtTZWUgTUROIGZvciBtb3JlIGRldGFpbHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3dPcldvcmtlckdsb2JhbFNjb3BlL2ZldGNoI1BhcmFtZXRlcnMpXG4gKiBAcmV0dXJucyBBbiBPYnNlcnZhYmxlLCB0aGF0IHdoZW4gc3Vic2NyaWJlZCB0bywgcGVyZm9ybXMgYW4gSFRUUCByZXF1ZXN0IHVzaW5nIHRoZSBuYXRpdmUgYGZldGNoYFxuICogZnVuY3Rpb24uIFRoZSB7QGxpbmsgU3Vic2NyaXB0aW9ufSBpcyB0aWVkIHRvIGFuIGBBYm9ydENvbnRyb2xsZXJgIGZvciB0aGUgZmV0Y2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRmV0Y2g8VD4oXG4gIGlucHV0OiBzdHJpbmcgfCBSZXF1ZXN0LFxuICBpbml0V2l0aFNlbGVjdG9yOiBSZXF1ZXN0SW5pdCAmIHtcbiAgICBzZWxlY3Rvcj86IChyZXNwb25zZTogUmVzcG9uc2UpID0+IE9ic2VydmFibGVJbnB1dDxUPjtcbiAgfSA9IHt9XG4pOiBPYnNlcnZhYmxlPFJlc3BvbnNlIHwgVD4ge1xuICBjb25zdCB7IHNlbGVjdG9yLCAuLi5pbml0IH0gPSBpbml0V2l0aFNlbGVjdG9yO1xuICByZXR1cm4gbmV3IE9ic2VydmFibGU8UmVzcG9uc2UgfCBUPigoc3Vic2NyaWJlcikgPT4ge1xuICAgIC8vIE91ciBjb250cm9sbGVyIGZvciBhYm9ydGluZyB0aGlzIGZldGNoLlxuICAgIC8vIEFueSBleHRlcm5hbGx5IHByb3ZpZGVkIEFib3J0U2lnbmFsIHdpbGwgaGF2ZSB0byBjYWxsXG4gICAgLy8gYWJvcnQgb24gdGhpcyBjb250cm9sbGVyIHdoZW4gc2lnbmFsZWQsIGJlY2F1c2UgdGhlXG4gICAgLy8gc2lnbmFsIGZyb20gdGhpcyBjb250cm9sbGVyIGlzIHdoYXQgaXMgYmVpbmcgcGFzc2VkIHRvIGBmZXRjaGAuXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCB7IHNpZ25hbCB9ID0gY29udHJvbGxlcjtcbiAgICAvLyBUaGlzIGZsYWcgZXhpc3RzIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBgYWJvcnQoKWAgdGhlIGZldGNoIHVwb24gdGVhcmluZyBkb3duXG4gICAgLy8gdGhpcyBvYnNlcnZhYmxlIGFmdGVyIGVtaXR0aW5nIGEgUmVzcG9uc2UuIEFib3J0aW5nIGluIHN1Y2ggY2lyY3Vtc3RhbmNlc1xuICAgIC8vIHdvdWxkIGFsc28gYWJvcnQgc3Vic2VxdWVudCBtZXRob2RzIC0gbGlrZSBganNvbigpYCAtIHRoYXQgY291bGQgYmUgY2FsbGVkXG4gICAgLy8gb24gdGhlIFJlc3BvbnNlLiBDb25zaWRlcjogYGZyb21GZXRjaCgpLnBpcGUodGFrZSgxKSwgbWVyZ2VNYXAocmVzID0+IHJlcy5qc29uKCkpKWBcbiAgICBsZXQgYWJvcnRhYmxlID0gdHJ1ZTtcblxuICAgIC8vIElmIHRoZSB1c2VyIHByb3ZpZGVkIGFuIGluaXQgY29uZmlndXJhdGlvbiBvYmplY3QsXG4gICAgLy8gbGV0J3MgcHJvY2VzcyBpdCBhbmQgY2hhaW4gb3VyIGFib3J0IHNpZ25hbHMsIGlmIG5lY2Vzc2FyeS5cbiAgICAvLyBJZiBhIHNpZ25hbCBpcyBwcm92aWRlZCwganVzdCBoYXZlIGl0IGZpbmFsaXplZC4gSXQncyBhIGNhbmNlbGxhdGlvbiB0b2tlbiwgYmFzaWNhbGx5LlxuICAgIGNvbnN0IHsgc2lnbmFsOiBvdXRlclNpZ25hbCB9ID0gaW5pdDtcbiAgICBpZiAob3V0ZXJTaWduYWwpIHtcbiAgICAgIGlmIChvdXRlclNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdlIGdvdCBhbiBBYm9ydFNpZ25hbCBmcm9tIHRoZSBhcmd1bWVudHMgcGFzc2VkIGludG8gYGZyb21GZXRjaGAuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gd2lyZSB1cCBvdXIgQWJvcnRDb250cm9sbGVyIHRvIGFib3J0IHdoZW4gdGhpcyBzaWduYWwgYWJvcnRzLlxuICAgICAgICBjb25zdCBvdXRlclNpZ25hbEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKCFzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgb3V0ZXJTaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvdXRlclNpZ25hbEhhbmRsZXIpO1xuICAgICAgICBzdWJzY3JpYmVyLmFkZCgoKSA9PiBvdXRlclNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG91dGVyU2lnbmFsSGFuZGxlcikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZSBpbml0aWFsaXphdGlvbiBvYmplY3QgcGFzc2VkIHRvIGBmZXRjaGAgYXMgdGhlIHNlY29uZFxuICAgIC8vIGFyZ3VtZW50LiBUaGlzIGZlcnJpZXMgaW4gaW1wb3J0YW50IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgb3VyXG4gICAgLy8gQWJvcnRTaWduYWwuIENyZWF0ZSBhIG5ldyBpbml0LCBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgbXV0YXRlIHRoZVxuICAgIC8vIHBhc3NlZCBpbml0LCBvciByZWFzc2lnbiBpdC4gVGhpcyBpcyBiZWNhdXNlIHRoZSBpbml0IHBhc3NlZCBpblxuICAgIC8vIGlzIHNoYXJlZCBiZXR3ZWVuIGVhY2ggc3Vic2NyaXB0aW9uIHRvIHRoZSByZXN1bHQuXG4gICAgY29uc3QgcGVyU3Vic2NyaWJlckluaXQ6IFJlcXVlc3RJbml0ID0geyAuLi5pbml0LCBzaWduYWwgfTtcblxuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycjogYW55KSA9PiB7XG4gICAgICBhYm9ydGFibGUgPSBmYWxzZTtcbiAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgZmV0Y2goaW5wdXQsIHBlclN1YnNjcmliZXJJbml0KVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBzZWxlY3RvciBmdW5jdGlvbiwgdXNlIGl0IHRvIHByb2plY3Qgb3VyIHJlc3BvbnNlLlxuICAgICAgICAgIC8vIE5vdGUgdGhhdCBhbnkgZXJyb3IgdGhhdCBjb21lcyBmcm9tIG91ciBzZWxlY3RvciB3aWxsIGJlXG4gICAgICAgICAgLy8gc2VudCB0byB0aGUgcHJvbWlzZSBgY2F0Y2hgIGJlbG93IGFuZCBoYW5kbGVkLlxuICAgICAgICAgIGlubmVyRnJvbShzZWxlY3RvcihyZXNwb25zZSkpLnN1YnNjcmliZShcbiAgICAgICAgICAgIGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihcbiAgICAgICAgICAgICAgc3Vic2NyaWJlcixcbiAgICAgICAgICAgICAgLy8gVmFsdWVzIGFyZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgc3Vic2NyaWJlclxuICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIC8vIFRoZSBwcm9qZWN0ZWQgcmVzcG9uc2UgaXMgY29tcGxldGUuXG4gICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBhYm9ydGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGhhbmRsZUVycm9yXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYm9ydGFibGUgPSBmYWxzZTtcbiAgICAgICAgICBzdWJzY3JpYmVyLm5leHQocmVzcG9uc2UpO1xuICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGFib3J0YWJsZSkge1xuICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG59XG4iXX0=
