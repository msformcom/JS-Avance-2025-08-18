import{Observable}from"../../Observable";import{performanceTimestampProvider}from"../../scheduler/performanceTimestampProvider";import{animationFrameProvider}from"../../scheduler/animationFrameProvider";function animationFrames(r){return r?animationFramesFactory(r):DEFAULT_ANIMATION_FRAMES}function animationFramesFactory(t){return new Observable(a=>{let m=t||performanceTimestampProvider,i=m.now(),n=0,o=()=>{a.closed||(n=animationFrameProvider.requestAnimationFrame(r=>{n=0;var e=m.now();a.next({timestamp:t?e:r,elapsed:e-i}),o()}))};return o(),()=>{n&&animationFrameProvider.cancelAnimationFrame(n)}})}let DEFAULT_ANIMATION_FRAMES=animationFramesFactory();export{animationFrames};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2RvbS9hbmltYXRpb25GcmFtZXMudHMiXSwibmFtZXMiOlsiT2JzZXJ2YWJsZSIsInBlcmZvcm1hbmNlVGltZXN0YW1wUHJvdmlkZXIiLCJhbmltYXRpb25GcmFtZVByb3ZpZGVyIiwiYW5pbWF0aW9uRnJhbWVzIiwidGltZXN0YW1wUHJvdmlkZXIiLCJhbmltYXRpb25GcmFtZXNGYWN0b3J5IiwiREVGQVVMVF9BTklNQVRJT05fRlJBTUVTIiwicHJvdmlkZXIiLCJzdGFydCIsIm5vdyIsImlkIiwicnVuIiwic3Vic2NyaWJlciIsImNsb3NlZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5leHQiLCJ0aW1lc3RhbXAiLCJlbGFwc2VkIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiXSwibWFwcGluZ3MiOiJPQUFTQSxVQUFvQyxLQUFsQiwwQkFFbEJDLDRCQUFrRixLQUE5QyxzREFDcENDLHNCQUFzRSxLQUF4Qyx5Q0F1RWpDLFNBQVVDLGdCQUFnQkMsR0FDOUIsT0FBT0EsRUFBb0JDLHVCQUF1QkQsQ0FBaUIsRUFBSUUsd0JBQ3pFLENBTUEsU0FBU0QsdUJBQXVCRCxHQUM5QixPQUFPLElBQUlKLFdBQW1ELElBSTVELElBQU1PLEVBQVdILEdBQXFCSCw2QkFNaENPLEVBQVFELEVBQVNFLElBQUcsRUFFdEJDLEVBQUssRUFDSEMsRUFBTSxLQUNMQyxFQUFXQyxTQUNkSCxFQUFLUix1QkFBdUJZLHNCQUFzQixJQUNoREosRUFBSyxFQVFMLElBQU1ELEVBQU1GLEVBQVNFLElBQUcsRUFDeEJHLEVBQVdHLEtBQUssQ0FDZEMsVUFBV1osRUFBb0JLLEVBQU1PLEVBQ3JDQyxRQUFTUixFQUFNRCxDLENBQ2hCLEVBQ0RHLEVBQUcsQ0FDTCxDQUFDLEVBRUwsRUFJQSxPQUZBQSxFQUFHLEVBRUksS0FDREQsR0FDRlIsdUJBQXVCZ0IscUJBQXFCUixDQUFFLENBRWxELENBQ0YsQ0FBQyxDQUNILENBTUEsSUFBTUoseUJBQTJCRCx1QkFBc0IsU0F6RHZDRixlQXlEeUMiLCJmaWxlIjoibm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL29ic2VydmFibGUvZG9tL2FuaW1hdGlvbkZyYW1lcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi8uLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFRpbWVzdGFtcFByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgcGVyZm9ybWFuY2VUaW1lc3RhbXBQcm92aWRlciB9IGZyb20gJy4uLy4uL3NjaGVkdWxlci9wZXJmb3JtYW5jZVRpbWVzdGFtcFByb3ZpZGVyJztcbmltcG9ydCB7IGFuaW1hdGlvbkZyYW1lUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9zY2hlZHVsZXIvYW5pbWF0aW9uRnJhbWVQcm92aWRlcic7XG5cbi8qKlxuICogQW4gb2JzZXJ2YWJsZSBvZiBhbmltYXRpb24gZnJhbWVzXG4gKlxuICogRW1pdHMgdGhlIGFtb3VudCBvZiB0aW1lIGVsYXBzZWQgc2luY2Ugc3Vic2NyaXB0aW9uIGFuZCB0aGUgdGltZXN0YW1wIG9uIGVhY2ggYW5pbWF0aW9uIGZyYW1lLlxuICogRGVmYXVsdHMgdG8gbWlsbGlzZWNvbmRzIHByb3ZpZGVkIHRvIHRoZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUncyBjYWxsYmFjay4gRG9lcyBub3QgZW5kIG9uIGl0cyBvd24uXG4gKlxuICogRXZlcnkgc3Vic2NyaXB0aW9uIHdpbGwgc3RhcnQgYSBzZXBhcmF0ZSBhbmltYXRpb24gbG9vcC4gU2luY2UgYW5pbWF0aW9uIGZyYW1lcyBhcmUgYWx3YXlzIHNjaGVkdWxlZFxuICogYnkgdGhlIGJyb3dzZXIgdG8gb2NjdXIgZGlyZWN0bHkgYmVmb3JlIGEgcmVwYWludCwgc2NoZWR1bGluZyBtb3JlIHRoYW4gb25lIGFuaW1hdGlvbiBmcmFtZSBzeW5jaHJvbm91c2x5XG4gKiBzaG91bGQgbm90IGJlIG11Y2ggZGlmZmVyZW50IG9yIGhhdmUgbW9yZSBvdmVyaGVhZCB0aGFuIGxvb3Bpbmcgb3ZlciBhbiBhcnJheSBvZiBldmVudHMgZHVyaW5nXG4gKiBhIHNpbmdsZSBhbmltYXRpb24gZnJhbWUuIEhvd2V2ZXIsIGlmIGZvciBzb21lIHJlYXNvbiB0aGUgZGV2ZWxvcGVyIHdvdWxkIGxpa2UgdG8gZW5zdXJlIHRoZVxuICogZXhlY3V0aW9uIG9mIGFuaW1hdGlvbi1yZWxhdGVkIGhhbmRsZXJzIGFyZSBhbGwgZXhlY3V0ZWQgZHVyaW5nIHRoZSBzYW1lIHRhc2sgYnkgdGhlIGVuZ2luZSxcbiAqIHRoZSBgc2hhcmVgIG9wZXJhdG9yIGNhbiBiZSB1c2VkLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBzZXR0aW5nIHVwIGFuaW1hdGlvbnMgd2l0aCBSeEpTLlxuICpcbiAqICMjIEV4YW1wbGVzXG4gKlxuICogVHdlZW5pbmcgYSBkaXYgdG8gbW92ZSBpdCBvbiB0aGUgc2NyZWVuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGFuaW1hdGlvbkZyYW1lcywgbWFwLCB0YWtlV2hpbGUsIGVuZFdpdGggfSBmcm9tICdyeGpzJztcbiAqXG4gKiBmdW5jdGlvbiB0d2VlbihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICogICBjb25zdCBkaWZmID0gZW5kIC0gc3RhcnQ7XG4gKiAgIHJldHVybiBhbmltYXRpb25GcmFtZXMoKS5waXBlKFxuICogICAgIC8vIEZpZ3VyZSBvdXQgd2hhdCBwZXJjZW50YWdlIG9mIHRpbWUgaGFzIHBhc3NlZFxuICogICAgIG1hcCgoeyBlbGFwc2VkIH0pID0+IGVsYXBzZWQgLyBkdXJhdGlvbiksXG4gKiAgICAgLy8gVGFrZSB0aGUgdmVjdG9yIHdoaWxlIGxlc3MgdGhhbiAxMDAlXG4gKiAgICAgdGFrZVdoaWxlKHYgPT4gdiA8IDEpLFxuICogICAgIC8vIEZpbmlzaCB3aXRoIDEwMCVcbiAqICAgICBlbmRXaXRoKDEpLFxuICogICAgIC8vIENhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgdHJhdmVsZWQgYmV0d2VlbiBzdGFydCBhbmQgZW5kXG4gKiAgICAgbWFwKHYgPT4gdiAqIGRpZmYgKyBzdGFydClcbiAqICAgKTtcbiAqIH1cbiAqXG4gKiAvLyBTZXR1cCBhIGRpdiBmb3IgdXMgdG8gbW92ZSBhcm91bmRcbiAqIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICogZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICogZGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAqIGRpdi5zdHlsZS53aWR0aCA9ICc0MHB4JztcbiAqIGRpdi5zdHlsZS5oZWlnaHQgPSAnNDBweCc7XG4gKiBkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2xpbWUnO1xuICogZGl2LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgxMHB4LCAwLCAwKSc7XG4gKlxuICogdHdlZW4oMTAsIDIwMCwgNDAwMCkuc3Vic2NyaWJlKHggPT4ge1xuICogICBkaXYuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7IHggfXB4LCAwLCAwKWA7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFByb3ZpZGluZyBhIGN1c3RvbSB0aW1lc3RhbXAgcHJvdmlkZXJcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgYW5pbWF0aW9uRnJhbWVzLCBUaW1lc3RhbXBQcm92aWRlciB9IGZyb20gJ3J4anMnO1xuICpcbiAqIC8vIEEgY3VzdG9tIHRpbWVzdGFtcCBwcm92aWRlclxuICogbGV0IG5vdyA9IDA7XG4gKiBjb25zdCBjdXN0b21UU1Byb3ZpZGVyOiBUaW1lc3RhbXBQcm92aWRlciA9IHtcbiAqICAgbm93KCkgeyByZXR1cm4gbm93Kys7IH1cbiAqIH07XG4gKlxuICogY29uc3Qgc291cmNlJCA9IGFuaW1hdGlvbkZyYW1lcyhjdXN0b21UU1Byb3ZpZGVyKTtcbiAqXG4gKiAvLyBMb2cgaW5jcmVhc2luZyBudW1iZXJzIDAuLi4xLi4uMi4uLiBvbiBldmVyeSBhbmltYXRpb24gZnJhbWUuXG4gKiBzb3VyY2UkLnN1YnNjcmliZSgoeyBlbGFwc2VkIH0pID0+IGNvbnNvbGUubG9nKGVsYXBzZWQpKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB0aW1lc3RhbXBQcm92aWRlciBBbiBvYmplY3Qgd2l0aCBhIGBub3dgIG1ldGhvZCB0aGF0IHByb3ZpZGVzIGEgbnVtZXJpYyB0aW1lc3RhbXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuaW1hdGlvbkZyYW1lcyh0aW1lc3RhbXBQcm92aWRlcj86IFRpbWVzdGFtcFByb3ZpZGVyKSB7XG4gIHJldHVybiB0aW1lc3RhbXBQcm92aWRlciA/IGFuaW1hdGlvbkZyYW1lc0ZhY3RvcnkodGltZXN0YW1wUHJvdmlkZXIpIDogREVGQVVMVF9BTklNQVRJT05fRlJBTUVTO1xufVxuXG4vKipcbiAqIERvZXMgdGhlIHdvcmsgb2YgY3JlYXRpbmcgdGhlIG9ic2VydmFibGUgZm9yIGBhbmltYXRpb25GcmFtZXNgLlxuICogQHBhcmFtIHRpbWVzdGFtcFByb3ZpZGVyIFRoZSB0aW1lc3RhbXAgcHJvdmlkZXIgdG8gdXNlIHRvIGNyZWF0ZSB0aGUgb2JzZXJ2YWJsZVxuICovXG5mdW5jdGlvbiBhbmltYXRpb25GcmFtZXNGYWN0b3J5KHRpbWVzdGFtcFByb3ZpZGVyPzogVGltZXN0YW1wUHJvdmlkZXIpIHtcbiAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPHsgdGltZXN0YW1wOiBudW1iZXI7IGVsYXBzZWQ6IG51bWJlciB9Pigoc3Vic2NyaWJlcikgPT4ge1xuICAgIC8vIElmIG5vIHRpbWVzdGFtcCBwcm92aWRlciBpcyBzcGVjaWZpZWQsIHVzZSBwZXJmb3JtYW5jZS5ub3coKSAtIGFzIGl0XG4gICAgLy8gd2lsbCByZXR1cm4gdGltZXN0YW1wcyAnY29tcGF0aWJsZScgd2l0aCB0aG9zZSBwYXNzZWQgdG8gdGhlIHJ1blxuICAgIC8vIGNhbGxiYWNrIGFuZCB3b24ndCBiZSBhZmZlY3RlZCBieSBOVFAgYWRqdXN0bWVudHMsIGV0Yy5cbiAgICBjb25zdCBwcm92aWRlciA9IHRpbWVzdGFtcFByb3ZpZGVyIHx8IHBlcmZvcm1hbmNlVGltZXN0YW1wUHJvdmlkZXI7XG5cbiAgICAvLyBDYXB0dXJlIHRoZSBzdGFydCB0aW1lIHVwb24gc3Vic2NyaXB0aW9uLCBhcyB0aGUgcnVuIGNhbGxiYWNrIGNhbiByZW1haW5cbiAgICAvLyBxdWV1ZWQgZm9yIGEgY29uc2lkZXJhYmxlIHBlcmlvZCBvZiB0aW1lIGFuZCB0aGUgZWxhcHNlZCB0aW1lIHNob3VsZFxuICAgIC8vIHJlcHJlc2VudCB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHN1YnNjcmlwdGlvbiAtIG5vdCB0aGUgdGltZSBzaW5jZSB0aGVcbiAgICAvLyBmaXJzdCByZW5kZXJlZCBhbmltYXRpb24gZnJhbWUuXG4gICAgY29uc3Qgc3RhcnQgPSBwcm92aWRlci5ub3coKTtcblxuICAgIGxldCBpZCA9IDA7XG4gICAgY29uc3QgcnVuID0gKCkgPT4ge1xuICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICBpZCA9IGFuaW1hdGlvbkZyYW1lUHJvdmlkZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCh0aW1lc3RhbXA6IERPTUhpZ2hSZXNUaW1lU3RhbXAgfCBudW1iZXIpID0+IHtcbiAgICAgICAgICBpZCA9IDA7XG4gICAgICAgICAgLy8gVXNlIHRoZSBwcm92aWRlcidzIHRpbWVzdGFtcCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZS4gTm90ZSB0aGF0XG4gICAgICAgICAgLy8gdGhpcyBtZWFucyAtIGlmIHRoZSBjYWxsZXIgaGFzbid0IHBhc3NlZCBhIHByb3ZpZGVyIC0gdGhhdFxuICAgICAgICAgIC8vIHBlcmZvcm1hbmNlLm5vdygpIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSB0aW1lc3RhbXAgdGhhdCB3YXNcbiAgICAgICAgICAvLyBwYXNzZWQgdG8gdGhlIHJ1biBjYWxsYmFjay4gVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHRoZSB0aW1lc3RhbXBcbiAgICAgICAgICAvLyBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrIGNhbiBiZSBlYXJsaWVyIHRoYW4gdGhlIHN0YXJ0IHRpbWUsIGFzIGl0XG4gICAgICAgICAgLy8gcmVwcmVzZW50cyB0aGUgdGltZSBhdCB3aGljaCB0aGUgYnJvd3NlciBkZWNpZGVkIGl0IHdvdWxkIHJlbmRlciBhbnlcbiAgICAgICAgICAvLyBxdWV1ZWQgZnJhbWVzIC0gYW5kIHRoYXQgdGltZSBjYW4gYmUgZWFybGllciB0aGUgY2FwdHVyZWQgc3RhcnQgdGltZS5cbiAgICAgICAgICBjb25zdCBub3cgPSBwcm92aWRlci5ub3coKTtcbiAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoe1xuICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBQcm92aWRlciA/IG5vdyA6IHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGVsYXBzZWQ6IG5vdyAtIHN0YXJ0LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJ1bigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcnVuKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGlkKSB7XG4gICAgICAgIGFuaW1hdGlvbkZyYW1lUHJvdmlkZXIuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufVxuXG4vKipcbiAqIEluIHRoZSBjb21tb24gY2FzZSwgd2hlcmUgdGhlIHRpbWVzdGFtcCBwcm92aWRlZCBieSB0aGUgckFGIEFQSSBpcyB1c2VkLFxuICogd2UgdXNlIHRoaXMgc2hhcmVkIG9ic2VydmFibGUgdG8gcmVkdWNlIG92ZXJoZWFkLlxuICovXG5jb25zdCBERUZBVUxUX0FOSU1BVElPTl9GUkFNRVMgPSBhbmltYXRpb25GcmFtZXNGYWN0b3J5KCk7XG4iXX0=
