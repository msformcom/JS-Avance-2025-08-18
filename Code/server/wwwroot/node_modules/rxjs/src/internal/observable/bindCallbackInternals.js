import{isScheduler}from"../util/isScheduler";import{Observable}from"../Observable";import{subscribeOn}from"../operators/subscribeOn";import{mapOneOrManyArgs}from"../util/mapOneOrManyArgs";import{observeOn}from"../operators/observeOn";import{AsyncSubject}from"../AsyncSubject";function bindCallbackInternals(l,b,e,n){if(e){if(!isScheduler(e))return function(...r){return bindCallbackInternals(l,b,n).apply(this,r).pipe(mapOneOrManyArgs(e))};n=e}return n?function(...r){return bindCallbackInternals(l,b).apply(this,r).pipe(subscribeOn(n),observeOn(n))}:function(...e){let i=new AsyncSubject,s=!0;return new Observable(r=>{r=i.subscribe(r);if(s){let n=s=!1,t=!1;b.apply(this,[...e,(...r)=>{if(l){var e=r.shift();if(null!=e)return void i.error(e)}i.next(1<r.length?r:r[0]),t=!0,n&&i.complete()}]),t&&i.complete(),n=!0}return r})}}export{bindCallbackInternals};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja0ludGVybmFscy50cyJdLCJuYW1lcyI6WyJpc1NjaGVkdWxlciIsIk9ic2VydmFibGUiLCJzdWJzY3JpYmVPbiIsIm1hcE9uZU9yTWFueUFyZ3MiLCJvYnNlcnZlT24iLCJBc3luY1N1YmplY3QiLCJiaW5kQ2FsbGJhY2tJbnRlcm5hbHMiLCJpc05vZGVTdHlsZSIsImNhbGxiYWNrRnVuYyIsInJlc3VsdFNlbGVjdG9yIiwic2NoZWR1bGVyIiwiYXJncyIsImFwcGx5IiwidGhpcyIsInBpcGUiLCJzdWJqZWN0IiwidW5pbml0aWFsaXplZCIsInN1YnMiLCJzdWJzY3JpYmUiLCJzdWJzY3JpYmVyIiwibGV0IiwiaXNBc3luYyIsImlzQ29tcGxldGUiLCJyZXN1bHRzIiwiZXJyIiwic2hpZnQiLCJlcnJvciIsIm5leHQiLCJsZW5ndGgiLCJjb21wbGV0ZSJdLCJtYXBwaW5ncyI6Ik9BQ1NBLFdBQXdDLEtBQXJCLDZCQUNuQkMsVUFBaUMsS0FBZix1QkFDbEJDLFdBQTZDLEtBQTFCLGtDQUNuQkMsZ0JBQWtELEtBQTFCLGtDQUN4QkMsU0FBeUMsS0FBeEIsZ0NBQ2pCQyxZQUFxQyxLQUFqQixrQkFFdkIsU0FBVUMsc0JBQ2RDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRUEsR0FBSUQsRUFBZ0IsQ0FDbEIsR0FBSVQsQ0FBQUEsWUFBWVMsQ0FBYyxFQUk1QixPQUFPLFlBQXdCRSxHQUM3QixPQUFRTCxzQkFBc0JDLEVBQWFDLEVBQWNFLENBQVMsRUFDL0RFLE1BQU1DLEtBQU1GLENBQUksRUFDaEJHLEtBQUtYLGlCQUFpQk0sQ0FBcUIsQ0FBQyxDQUNqRCxFQVBBQyxFQUFZRCxDQVNoQixDQUlBLE9BQUlDLEVBQ0ssWUFBd0JDLEdBQzdCLE9BQVFMLHNCQUFzQkMsRUFBYUMsQ0FBWSxFQUNwREksTUFBTUMsS0FBTUYsQ0FBSSxFQUNoQkcsS0FBS1osWUFBWVEsQ0FBVSxFQUFHTixVQUFVTSxDQUFVLENBQUMsQ0FDeEQsRUFHSyxZQUF3QkMsR0FHN0IsSUFBTUksRUFBVSxJQUFJVixhQUdoQlcsRUFBZ0IsQ0FBQSxFQUNwQixPQUFPLElBQUlmLFdBQVcsSUFFZGdCLEVBQU9GLEVBQVFHLFVBQVVDLENBQVUsRUFFekMsR0FBSUgsRUFBZSxDQU9qQkksSUFBSUMsRUFOSkwsRUFBZ0IsQ0FBQSxFQVNaTSxFQUFhLENBQUEsRUFLakJkLEVBQWFJLE1BRVhDLEtBQ0EsQ0FFRSxHQUFHRixFQUVILElBQUlZLEtBQ0YsR0FBSWhCLEVBQWEsQ0FJZixJQUFNaUIsRUFBTUQsRUFBUUUsTUFBSyxFQUN6QixHQUFXLE1BQVBELEVBSUYsT0FIQVQsS0FBQUEsRUFBUVcsTUFBTUYsQ0FBRyxDQUtyQixDQUtBVCxFQUFRWSxLQUFLLEVBQUlKLEVBQVFLLE9BQVNMLEVBQVVBLEVBQVEsRUFBRSxFQUd0REQsRUFBYSxDQUFBLEVBTVRELEdBQ0ZOLEVBQVFjLFNBQVEsQ0FFcEIsRUFDRCxFQUtDUCxHQUNGUCxFQUFRYyxTQUFRLEVBS2xCUixFQUFVLENBQUEsQ0FDWixDQUdBLE9BQU9KLENBQ1QsQ0FBQyxDQUNILENBQ0YsUUE5R2dCWCxxQkE4R2hCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja0ludGVybmFscy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVkdWxlckxpa2UgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc1NjaGVkdWxlciB9IGZyb20gJy4uL3V0aWwvaXNTY2hlZHVsZXInO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlT24gfSBmcm9tICcuLi9vcGVyYXRvcnMvc3Vic2NyaWJlT24nO1xuaW1wb3J0IHsgbWFwT25lT3JNYW55QXJncyB9IGZyb20gJy4uL3V0aWwvbWFwT25lT3JNYW55QXJncyc7XG5pbXBvcnQgeyBvYnNlcnZlT24gfSBmcm9tICcuLi9vcGVyYXRvcnMvb2JzZXJ2ZU9uJztcbmltcG9ydCB7IEFzeW5jU3ViamVjdCB9IGZyb20gJy4uL0FzeW5jU3ViamVjdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kQ2FsbGJhY2tJbnRlcm5hbHMoXG4gIGlzTm9kZVN0eWxlOiBib29sZWFuLFxuICBjYWxsYmFja0Z1bmM6IGFueSxcbiAgcmVzdWx0U2VsZWN0b3I/OiBhbnksXG4gIHNjaGVkdWxlcj86IFNjaGVkdWxlckxpa2Vcbik6ICguLi5hcmdzOiBhbnlbXSkgPT4gT2JzZXJ2YWJsZTx1bmtub3duPiB7XG4gIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuICAgIGlmIChpc1NjaGVkdWxlcihyZXN1bHRTZWxlY3RvcikpIHtcbiAgICAgIHNjaGVkdWxlciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgdXNlciBwcm92aWRlZCBhIHJlc3VsdCBzZWxlY3Rvci5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogYW55LCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICByZXR1cm4gKGJpbmRDYWxsYmFja0ludGVybmFscyhpc05vZGVTdHlsZSwgY2FsbGJhY2tGdW5jLCBzY2hlZHVsZXIpIGFzIGFueSlcbiAgICAgICAgICAuYXBwbHkodGhpcywgYXJncylcbiAgICAgICAgICAucGlwZShtYXBPbmVPck1hbnlBcmdzKHJlc3VsdFNlbGVjdG9yIGFzIGFueSkpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBhIHNjaGVkdWxlciB3YXMgcGFzc2VkLCB1c2Ugb3VyIGBzdWJzY3JpYmVPbmAgYW5kIGBvYnNlcnZlT25gIG9wZXJhdG9yc1xuICAvLyB0byBjb21wb3NlIHRoYXQgYmVoYXZpb3IgZm9yIHRoZSB1c2VyLlxuICBpZiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICByZXR1cm4gKGJpbmRDYWxsYmFja0ludGVybmFscyhpc05vZGVTdHlsZSwgY2FsbGJhY2tGdW5jKSBhcyBhbnkpXG4gICAgICAgIC5hcHBseSh0aGlzLCBhcmdzKVxuICAgICAgICAucGlwZShzdWJzY3JpYmVPbihzY2hlZHVsZXIhKSwgb2JzZXJ2ZU9uKHNjaGVkdWxlciEpKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAvLyBXZSdyZSB1c2luZyBBc3luY1N1YmplY3QsIGJlY2F1c2UgaXQgZW1pdHMgd2hlbiBpdCBjb21wbGV0ZXMsXG4gICAgLy8gYW5kIGl0IHdpbGwgcGxheSB0aGUgdmFsdWUgdG8gYWxsIGxhdGUtYXJyaXZpbmcgc3Vic2NyaWJlcnMuXG4gICAgY29uc3Qgc3ViamVjdCA9IG5ldyBBc3luY1N1YmplY3Q8YW55PigpO1xuXG4gICAgLy8gSWYgdGhpcyBpcyB0cnVlLCB0aGVuIHdlIGhhdmVuJ3QgY2FsbGVkIG91ciBmdW5jdGlvbiB5ZXQuXG4gICAgbGV0IHVuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlcikgPT4ge1xuICAgICAgLy8gQWRkIG91ciBzdWJzY3JpYmVyIHRvIHRoZSBzdWJqZWN0LlxuICAgICAgY29uc3Qgc3VicyA9IHN1YmplY3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuXG4gICAgICBpZiAodW5pbml0aWFsaXplZCkge1xuICAgICAgICB1bmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIC8vIFdlJ3JlIGdvaW5nIHRvIGV4ZWN1dGUgdGhlIGJvdW5kIGZ1bmN0aW9uXG4gICAgICAgIC8vIFRoaXMgYml0IGlzIHRvIHNpZ25hbCB0aGF0IHdlIGFyZSBoaXR0aW5nIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseS5cbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSBhbnRpLVwiWmFsZ29cIiBndWFyYW50ZWVzIHdpdGggd2hhdGV2ZXJcbiAgICAgICAgLy8gZnVuY3Rpb24gd2UgYXJlIGhhbmRlZCwgd2UgdXNlIHRoaXMgYml0IHRvIGZpZ3VyZSBvdXQgd2hldGhlciBvciBub3RcbiAgICAgICAgLy8gd2UgYXJlIGdldHRpbmcgaGl0IGluIGEgY2FsbGJhY2sgc3luY2hyb25vdXNseSBkdXJpbmcgb3VyIGNhbGwuXG4gICAgICAgIGxldCBpc0FzeW5jID0gZmFsc2U7XG5cbiAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIHNpZ25hbCB0aGF0IHRoZSBjYWxsYmFjayBjb21wbGV0ZWQgc3luY2hyb25vdXNseS5cbiAgICAgICAgbGV0IGlzQ29tcGxldGUgPSBmYWxzZTtcblxuICAgICAgICAvLyBDYWxsIG91ciBmdW5jdGlvbiB0aGF0IGhhcyBhIGNhbGxiYWNrLiBJZiBhdCBhbnkgdGltZSBkdXJpbmcgdGhpc1xuICAgICAgICAvLyBjYWxsLCBhbiBlcnJvciBpcyB0aHJvd24sIGl0IHdpbGwgYmUgY2F1Z2h0IGJ5IHRoZSBPYnNlcnZhYmxlXG4gICAgICAgIC8vIHN1YnNjcmlwdGlvbiBwcm9jZXNzIGFuZCBzZW50IHRvIHRoZSBjb25zdW1lci5cbiAgICAgICAgY2FsbGJhY2tGdW5jLmFwcGx5KFxuICAgICAgICAgIC8vIFBhc3MgdGhlIGFwcHJvcHJpYXRlIGB0aGlzYCBjb250ZXh0LlxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgW1xuICAgICAgICAgICAgLy8gUGFzcyB0aGUgYXJndW1lbnRzLlxuICAgICAgICAgICAgLi4uYXJncyxcbiAgICAgICAgICAgIC8vIEFuZCBvdXIgY2FsbGJhY2sgaGFuZGxlci5cbiAgICAgICAgICAgICguLi5yZXN1bHRzOiBhbnlbXSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaXNOb2RlU3R5bGUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbm9kZSBjYWxsYmFjaywgc2hpZnQgdGhlIGZpcnN0IHZhbHVlIG9mZiBvZiB0aGVcbiAgICAgICAgICAgICAgICAvLyByZXN1bHRzIGFuZCBjaGVjayBpdCwgYXMgaXQgaXMgdGhlIGVycm9yIGFyZ3VtZW50LiBCeSBzaGlmdGluZyxcbiAgICAgICAgICAgICAgICAvLyB3ZSBsZWF2ZSBvbmx5IHRoZSBhcmd1bWVudChzKSB3ZSB3YW50IHRvIHBhc3MgdG8gdGhlIGNvbnN1bWVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IHJlc3VsdHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHN1YmplY3QuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGVycm9yZWQsIHdlIGNhbiBzdG9wIHByb2Nlc3NpbmcgdGhpcyBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgLy8gYXMgdGhlcmUncyBub3RoaW5nIGVsc2UgdG8gZG8uIEp1c3QgcmV0dXJuIHRvIGVzY2FwZS5cbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBvbmUgYXJndW1lbnQsIG5vdGlmeSB0aGUgY29uc3VtZXJcbiAgICAgICAgICAgICAgLy8gb2YgaXQgYXMgYSBzaW5nbGUgdmFsdWUsIG90aGVyd2lzZSwgaWYgdGhlcmUncyBtb3JlIHRoYW4gb25lLCBwYXNzXG4gICAgICAgICAgICAgIC8vIHRoZW0gYXMgYW4gYXJyYXkuIE5vdGUgdGhhdCBpZiB0aGVyZSBhcmUgbm8gYXJndW1lbnRzLCBgdW5kZWZpbmVkYFxuICAgICAgICAgICAgICAvLyB3aWxsIGJlIGVtaXR0ZWQuXG4gICAgICAgICAgICAgIHN1YmplY3QubmV4dCgxIDwgcmVzdWx0cy5sZW5ndGggPyByZXN1bHRzIDogcmVzdWx0c1swXSk7XG4gICAgICAgICAgICAgIC8vIEZsaXAgdGhpcyBmbGFnLCBzbyB3ZSBrbm93IHdlIGNhbiBjb21wbGV0ZSBpdCBpbiB0aGUgc3luY2hyb25vdXNcbiAgICAgICAgICAgICAgLy8gY2FzZSBiZWxvdy5cbiAgICAgICAgICAgICAgaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgIC8vIElmIHdlJ3JlIG5vdCBhc3luY2hyb25vdXMsIHdlIG5lZWQgdG8gZGVmZXIgdGhlIGBjb21wbGV0ZWAgY2FsbFxuICAgICAgICAgICAgICAvLyB1bnRpbCBhZnRlciB0aGUgY2FsbCB0byB0aGUgZnVuY3Rpb24gaXMgb3Zlci4gVGhpcyBpcyBiZWNhdXNlIGFuXG4gICAgICAgICAgICAgIC8vIGVycm9yIGNvdWxkIGJlIHRocm93biBpbiB0aGUgZnVuY3Rpb24gYWZ0ZXIgaXQgY2FsbHMgb3VyIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAvLyBhbmQgaWYgdGhhdCBpcyB0aGUgY2FzZSwgaWYgd2UgY29tcGxldGUgaGVyZSwgd2UgYXJlIHVuYWJsZSB0byBub3RpZnlcbiAgICAgICAgICAgICAgLy8gdGhlIGNvbnN1bWVyIHRoYW4gYW4gZXJyb3Igb2NjdXJyZWQuXG4gICAgICAgICAgICAgIGlmIChpc0FzeW5jKSB7XG4gICAgICAgICAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgICAgLy8gSWYgd2UgZmxpcHBlZCBgaXNDb21wbGV0ZWAgZHVyaW5nIHRoZSBjYWxsLCB3ZSByZXNvbHZlZCBzeW5jaHJvbm91c2x5LFxuICAgICAgICAvLyBub3RpZnkgY29tcGxldGUsIGJlY2F1c2Ugd2Ugc2tpcHBlZCBpdCBpbiB0aGUgY2FsbGJhY2sgdG8gd2FpdFxuICAgICAgICAvLyB0byBtYWtlIHN1cmUgdGhlcmUgd2VyZSBubyBlcnJvcnMgZHVyaW5nIHRoZSBjYWxsLlxuICAgICAgICBpZiAoaXNDb21wbGV0ZSkge1xuICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlJ3JlIG5vIGxvbmdlciBzeW5jaHJvbm91cy4gSWYgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBhdCB0aGlzIHBvaW50XG4gICAgICAgIC8vIHdlIGNhbiBub3RpZnkgY29tcGxldGUgb24gdGhlIHNwb3QuXG4gICAgICAgIGlzQXN5bmMgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIHN1YnNjcmlwdGlvbiBmcm9tIGFkZGluZyBvdXIgc3Vic2NyaWJlciB0byB0aGUgc3ViamVjdC5cbiAgICAgIHJldHVybiBzdWJzO1xuICAgIH0pO1xuICB9O1xufVxuIl19
