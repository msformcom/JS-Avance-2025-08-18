import{Observable}from"../Observable";import{innerFrom}from"./innerFrom";import{argsOrArgArray}from"../util/argsOrArgArray";import{EMPTY}from"./empty";import{createOperatorSubscriber}from"../operators/OperatorSubscriber";import{popResultSelector}from"../util/args";function zip(...r){let p=popResultSelector(r),m=argsOrArgArray(r);return m.length?new Observable(t=>{let o=m.map(()=>[]),l=m.map(()=>!1);t.add(()=>{o=l=null});for(let e=0;!t.closed&&e<m.length;e++)innerFrom(m[e]).subscribe(createOperatorSubscriber(t,r=>{o[e].push(r),o.every(r=>r.length)&&(r=o.map(r=>r.shift()),t.next(p?p(...r):r),o.some((r,e)=>!r.length&&l[e]))&&t.complete()},()=>{l[e]=!0,o[e].length||t.complete()}));return()=>{o=l=null}}):EMPTY}export{zip};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL3ppcC50cyJdLCJuYW1lcyI6WyJPYnNlcnZhYmxlIiwiaW5uZXJGcm9tIiwiYXJnc09yQXJnQXJyYXkiLCJFTVBUWSIsImNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciIsInBvcFJlc3VsdFNlbGVjdG9yIiwiemlwIiwiYXJncyIsInJlc3VsdFNlbGVjdG9yIiwic291cmNlcyIsImxlbmd0aCIsImxldCIsImJ1ZmZlcnMiLCJtYXAiLCJjb21wbGV0ZWQiLCJzdWJzY3JpYmVyIiwiYWRkIiwic291cmNlSW5kZXgiLCJjbG9zZWQiLCJzdWJzY3JpYmUiLCJwdXNoIiwidmFsdWUiLCJldmVyeSIsImJ1ZmZlciIsInJlc3VsdCIsInNoaWZ0IiwibmV4dCIsInNvbWUiLCJpIiwiY29tcGxldGUiXSwibWFwcGluZ3MiOiJPQUFTQSxVQUFpQyxLQUFmLHVCQUVsQkMsU0FBOEIsS0FBYixxQkFDakJDLGNBQThDLEtBQXhCLGdDQUN0QkMsS0FBc0IsS0FBVCxpQkFDYkMsd0JBQWlFLEtBQWpDLHlDQUNoQ0MsaUJBQXVDLEtBQWQsZUE4QzVCLFNBQVVDLE9BQU9DLEdBQ3JCLElBQU1DLEVBQWlCSCxrQkFBa0JFLENBQUksRUFFdkNFLEVBQVVQLGVBQWVLLENBQUksRUFFbkMsT0FBT0UsRUFBUUMsT0FDWCxJQUFJVixXQUFzQixJQUd4QlcsSUFBSUMsRUFBdUJILEVBQVFJLElBQUksSUFBTSxFQUFFLEVBSzNDQyxFQUFZTCxFQUFRSSxJQUFJLElBQU0sQ0FBQSxDQUFLLEVBR3ZDRSxFQUFXQyxJQUFJLEtBQ2JKLEVBQVVFLEVBQVksSUFDeEIsQ0FBQyxFQUtELElBQUtILElBQUlNLEVBQWMsRUFBRyxDQUFDRixFQUFXRyxRQUFVRCxFQUFjUixFQUFRQyxPQUFRTyxDQUFXLEdBQ3ZGaEIsVUFBVVEsRUFBUVEsRUFBWSxFQUFFRSxVQUM5QmYseUJBQ0VXLEVBQ0EsSUFDRUgsRUFBUUssR0FBYUcsS0FBS0MsQ0FBSyxFQUkzQlQsRUFBUVUsTUFBTSxHQUFZQyxFQUFPYixNQUFNLElBQ25DYyxFQUFjWixFQUFRQyxJQUFJLEdBQVlVLEVBQU9FLE1BQUssQ0FBRyxFQUUzRFYsRUFBV1csS0FBS2xCLEVBQWlCQSxFQUFlLEdBQUdnQixDQUFNLEVBQUlBLENBQU0sRUFJL0RaLEVBQVFlLEtBQUssQ0FBQ0osRUFBUUssSUFBTSxDQUFDTCxFQUFPYixRQUFVSSxFQUFVYyxFQUFFLElBQzVEYixFQUFXYyxTQUFRLENBR3pCLEVBQ0EsS0FHRWYsRUFBVUcsR0FBZSxDQUFBLEVBSXhCTCxFQUFRSyxHQUFhUCxRQUFVSyxFQUFXYyxTQUFRLENBQ3JELENBQUMsQ0FDRixFQUtMLE1BQU8sS0FDTGpCLEVBQVVFLEVBQVksSUFDeEIsQ0FDRixDQUFDLEVBQ0RYLEtBQ04sUUFoRWdCRyxHQWdFaEIiLCJmaWxlIjoibm9kZV9tb2R1bGVzL3J4anMvc3JjL2ludGVybmFsL29ic2VydmFibGUvemlwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZUlucHV0VHVwbGUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpbm5lckZyb20gfSBmcm9tICcuL2lubmVyRnJvbSc7XG5pbXBvcnQgeyBhcmdzT3JBcmdBcnJheSB9IGZyb20gJy4uL3V0aWwvYXJnc09yQXJnQXJyYXknO1xuaW1wb3J0IHsgRU1QVFkgfSBmcm9tICcuL2VtcHR5JztcbmltcG9ydCB7IGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciB9IGZyb20gJy4uL29wZXJhdG9ycy9PcGVyYXRvclN1YnNjcmliZXInO1xuaW1wb3J0IHsgcG9wUmVzdWx0U2VsZWN0b3IgfSBmcm9tICcuLi91dGlsL2FyZ3MnO1xuXG5leHBvcnQgZnVuY3Rpb24gemlwPEEgZXh0ZW5kcyByZWFkb25seSB1bmtub3duW10+KHNvdXJjZXM6IFsuLi5PYnNlcnZhYmxlSW5wdXRUdXBsZTxBPl0pOiBPYnNlcnZhYmxlPEE+O1xuZXhwb3J0IGZ1bmN0aW9uIHppcDxBIGV4dGVuZHMgcmVhZG9ubHkgdW5rbm93bltdLCBSPihcbiAgc291cmNlczogWy4uLk9ic2VydmFibGVJbnB1dFR1cGxlPEE+XSxcbiAgcmVzdWx0U2VsZWN0b3I6ICguLi52YWx1ZXM6IEEpID0+IFJcbik6IE9ic2VydmFibGU8Uj47XG5leHBvcnQgZnVuY3Rpb24gemlwPEEgZXh0ZW5kcyByZWFkb25seSB1bmtub3duW10+KC4uLnNvdXJjZXM6IFsuLi5PYnNlcnZhYmxlSW5wdXRUdXBsZTxBPl0pOiBPYnNlcnZhYmxlPEE+O1xuZXhwb3J0IGZ1bmN0aW9uIHppcDxBIGV4dGVuZHMgcmVhZG9ubHkgdW5rbm93bltdLCBSPihcbiAgLi4uc291cmNlc0FuZFJlc3VsdFNlbGVjdG9yOiBbLi4uT2JzZXJ2YWJsZUlucHV0VHVwbGU8QT4sICguLi52YWx1ZXM6IEEpID0+IFJdXG4pOiBPYnNlcnZhYmxlPFI+O1xuXG4vKipcbiAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmUgY2FsY3VsYXRlZCBmcm9tIHRoZSB2YWx1ZXMsIGluIG9yZGVyLCBvZiBlYWNoXG4gKiBvZiBpdHMgaW5wdXQgT2JzZXJ2YWJsZXMuXG4gKlxuICogSWYgdGhlIGxhc3QgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24sIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBjb21wdXRlIHRoZSBjcmVhdGVkIHZhbHVlIGZyb20gdGhlIGlucHV0IHZhbHVlcy5cbiAqIE90aGVyd2lzZSwgYW4gYXJyYXkgb2YgdGhlIGlucHV0IHZhbHVlcyBpcyByZXR1cm5lZC5cbiAqXG4gKiAjIyBFeGFtcGxlXG4gKlxuICogQ29tYmluZSBhZ2UgYW5kIG5hbWUgZnJvbSBkaWZmZXJlbnQgc291cmNlc1xuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBvZiwgemlwLCBtYXAgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBhZ2UkID0gb2YoMjcsIDI1LCAyOSk7XG4gKiBjb25zdCBuYW1lJCA9IG9mKCdGb28nLCAnQmFyJywgJ0JlZXInKTtcbiAqIGNvbnN0IGlzRGV2JCA9IG9mKHRydWUsIHRydWUsIGZhbHNlKTtcbiAqXG4gKiB6aXAoYWdlJCwgbmFtZSQsIGlzRGV2JCkucGlwZShcbiAqICAgbWFwKChbYWdlLCBuYW1lLCBpc0Rldl0pID0+ICh7IGFnZSwgbmFtZSwgaXNEZXYgfSkpXG4gKiApXG4gKiAuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIC8vIE91dHB1dHNcbiAqIC8vIHsgYWdlOiAyNywgbmFtZTogJ0ZvbycsIGlzRGV2OiB0cnVlIH1cbiAqIC8vIHsgYWdlOiAyNSwgbmFtZTogJ0JhcicsIGlzRGV2OiB0cnVlIH1cbiAqIC8vIHsgYWdlOiAyOSwgbmFtZTogJ0JlZXInLCBpc0RldjogZmFsc2UgfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGFyZ3MgQW55IG51bWJlciBvZiBgT2JzZXJ2YWJsZUlucHV0YHMgcHJvdmlkZWQgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdFxuICogdG8gY29tYmluZSB3aXRoIGVhY2ggb3RoZXIuXG4gKiBAcmV0dXJuIEFuIE9ic2VydmFibGUgb2YgYXJyYXkgdmFsdWVzIG9mIHRoZSB2YWx1ZXMgZW1pdHRlZCBhdCB0aGUgc2FtZSBpbmRleCBmcm9tIGVhY2hcbiAqIGluZGl2aWR1YWwgYE9ic2VydmFibGVJbnB1dGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6aXAoLi4uYXJnczogdW5rbm93bltdKTogT2JzZXJ2YWJsZTx1bmtub3duPiB7XG4gIGNvbnN0IHJlc3VsdFNlbGVjdG9yID0gcG9wUmVzdWx0U2VsZWN0b3IoYXJncyk7XG5cbiAgY29uc3Qgc291cmNlcyA9IGFyZ3NPckFyZ0FycmF5KGFyZ3MpIGFzIE9ic2VydmFibGU8dW5rbm93bj5bXTtcblxuICByZXR1cm4gc291cmNlcy5sZW5ndGhcbiAgICA/IG5ldyBPYnNlcnZhYmxlPHVua25vd25bXT4oKHN1YnNjcmliZXIpID0+IHtcbiAgICAgICAgLy8gQSBjb2xsZWN0aW9uIG9mIGJ1ZmZlcnMgb2YgdmFsdWVzIGZyb20gZWFjaCBzb3VyY2UuXG4gICAgICAgIC8vIEtleWVkIGJ5IHRoZSBzYW1lIGluZGV4IHdpdGggd2hpY2ggdGhlIHNvdXJjZXMgd2VyZSBwYXNzZWQgaW4uXG4gICAgICAgIGxldCBidWZmZXJzOiB1bmtub3duW11bXSA9IHNvdXJjZXMubWFwKCgpID0+IFtdKTtcblxuICAgICAgICAvLyBBbiBhcnJheSBvZiBmbGFncyBvZiB3aGV0aGVyIG9yIG5vdCB0aGUgc291cmNlcyBoYXZlIGNvbXBsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNoZWNrIHRvIHNlZSBpZiB3ZSBzaG91bGQgY29tcGxldGUgdGhlIHJlc3VsdC5cbiAgICAgICAgLy8gS2V5ZWQgYnkgdGhlIHNhbWUgaW5kZXggd2l0aCB3aGljaCB0aGUgc291cmNlcyB3ZXJlIHBhc3NlZCBpbi5cbiAgICAgICAgbGV0IGNvbXBsZXRlZCA9IHNvdXJjZXMubWFwKCgpID0+IGZhbHNlKTtcblxuICAgICAgICAvLyBXaGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgcmVsZWFzZSB0aGUgYXJyYXlzIGFib3ZlLlxuICAgICAgICBzdWJzY3JpYmVyLmFkZCgoKSA9PiB7XG4gICAgICAgICAgYnVmZmVycyA9IGNvbXBsZXRlZCA9IG51bGwhO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBMb29wIG92ZXIgb3VyIHNvdXJjZXMgYW5kIHN1YnNjcmliZSB0byBlYWNoIG9uZS4gVGhlIGluZGV4IGBpYCBpc1xuICAgICAgICAvLyBlc3BlY2lhbGx5IGltcG9ydGFudCBoZXJlLCBiZWNhdXNlIHdlIHVzZSBpdCBpbiBjbG9zdXJlcyBiZWxvdyB0b1xuICAgICAgICAvLyBhY2Nlc3MgdGhlIHJlbGF0ZWQgYnVmZmVycyBhbmQgY29tcGxldGlvbiBwcm9wZXJ0aWVzXG4gICAgICAgIGZvciAobGV0IHNvdXJjZUluZGV4ID0gMDsgIXN1YnNjcmliZXIuY2xvc2VkICYmIHNvdXJjZUluZGV4IDwgc291cmNlcy5sZW5ndGg7IHNvdXJjZUluZGV4KyspIHtcbiAgICAgICAgICBpbm5lckZyb20oc291cmNlc1tzb3VyY2VJbmRleF0pLnN1YnNjcmliZShcbiAgICAgICAgICAgIGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihcbiAgICAgICAgICAgICAgc3Vic2NyaWJlcixcbiAgICAgICAgICAgICAgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgYnVmZmVyc1tzb3VyY2VJbmRleF0ucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgLy8gaWYgZXZlcnkgYnVmZmVyIGhhcyBhdCBsZWFzdCBvbmUgdmFsdWUgaW4gaXQsIHRoZW4gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc2hpZnQgb3V0IHRoZSBvbGRlc3QgdmFsdWUgZnJvbSBlYWNoIGJ1ZmZlciBhbmQgZW1pdFxuICAgICAgICAgICAgICAgIC8vIHRoZW0gYXMgYW4gYXJyYXkuXG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcnMuZXZlcnkoKGJ1ZmZlcikgPT4gYnVmZmVyLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0gYnVmZmVycy5tYXAoKGJ1ZmZlcikgPT4gYnVmZmVyLnNoaWZ0KCkhKTtcbiAgICAgICAgICAgICAgICAgIC8vIEVtaXQgdGhlIGFycmF5LiBJZiB0aGVyZXMnIGEgcmVzdWx0IHNlbGVjdG9yLCB1c2UgdGhhdC5cbiAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHRTZWxlY3RvciA/IHJlc3VsdFNlbGVjdG9yKC4uLnJlc3VsdCkgOiByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgLy8gSWYgYW55IG9uZSBvZiB0aGUgc291cmNlcyBpcyBib3RoIGNvbXBsZXRlIGFuZCBoYXMgYW4gZW1wdHkgYnVmZmVyXG4gICAgICAgICAgICAgICAgICAvLyB0aGVuIHdlIGNvbXBsZXRlIHRoZSByZXN1bHQuIFRoaXMgaXMgYmVjYXVzZSB3ZSBjYW5ub3QgcG9zc2libHkgaGF2ZVxuICAgICAgICAgICAgICAgICAgLy8gYW55IG1vcmUgdmFsdWVzIHRvIHppcCB0b2dldGhlci5cbiAgICAgICAgICAgICAgICAgIGlmIChidWZmZXJzLnNvbWUoKGJ1ZmZlciwgaSkgPT4gIWJ1ZmZlci5sZW5ndGggJiYgY29tcGxldGVkW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzb3VyY2UgY29tcGxldGVkLiBNYXJrIGl0IGFzIGNvbXBsZXRlIHNvIHdlIGNhbiBjaGVjayBpdCBsYXRlclxuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgdG8uXG4gICAgICAgICAgICAgICAgY29tcGxldGVkW3NvdXJjZUluZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gQnV0LCBpZiB0aGlzIGNvbXBsZXRlIHNvdXJjZSBoYXMgbm90aGluZyBpbiBpdHMgYnVmZmVyLCB0aGVuIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIGNvbXBsZXRlIHRoZSByZXN1bHQsIGJlY2F1c2Ugd2UgY2FuJ3QgcG9zc2libHkgaGF2ZSBhbnkgbW9yZVxuICAgICAgICAgICAgICAgIC8vIHZhbHVlcyBmcm9tIHRoaXMgdG8gemlwIHRvZ2V0aGVyIHdpdGggdGhlIG90aGVyIHZhbHVlcy5cbiAgICAgICAgICAgICAgICAhYnVmZmVyc1tzb3VyY2VJbmRleF0ubGVuZ3RoICYmIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgcmVsZWFzZSB0aGUgYXJyYXlzIGFib3ZlLlxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGJ1ZmZlcnMgPSBjb21wbGV0ZWQgPSBudWxsITtcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgOiBFTVBUWTtcbn1cbiJdfQ==
