import{identity}from"../util/identity";import{isScheduler}from"../util/isScheduler";import{defer}from"./defer";import{scheduleIterable}from"../scheduled/scheduleIterable";function generate(e,t,r,i,l){let d,n;function*o(){for(let e=n;!t||t(e);e=r(e))yield d(e)}return 1===arguments.length?{initialState:n,condition:t,iterate:r,resultSelector:d=identity,scheduler:l}=e:(n=e,!i||isScheduler(i)?(d=identity,l=i):d=i),defer(l?()=>scheduleIterable(o(),l):o)}export{generate};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vYnNlcnZhYmxlL2dlbmVyYXRlLnRzIl0sIm5hbWVzIjpbImlkZW50aXR5IiwiaXNTY2hlZHVsZXIiLCJkZWZlciIsInNjaGVkdWxlSXRlcmFibGUiLCJnZW5lcmF0ZSIsImluaXRpYWxTdGF0ZU9yT3B0aW9ucyIsImNvbmRpdGlvbiIsIml0ZXJhdGUiLCJyZXN1bHRTZWxlY3Rvck9yU2NoZWR1bGVyIiwic2NoZWR1bGVyIiwibGV0IiwicmVzdWx0U2VsZWN0b3IiLCJpbml0aWFsU3RhdGUiLCJnZW4iLCJzdGF0ZSIsInlpZWxkIiwiYXJndW1lbnRzIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiT0FDU0EsUUFBa0MsS0FBbEIsMEJBRWhCQyxXQUF3QyxLQUFyQiw2QkFDbkJDLEtBQXNCLEtBQVQsaUJBQ2JDLGdCQUF1RCxLQUEvQixnQ0EwVTNCLFNBQVVDLFNBQ2RDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRUFDLElBQUlDLEVBQ0FDLEVBMkJKLFNBQVVDLElBQ1IsSUFBS0gsSUFBSUksRUFBUUYsRUFBYyxDQUFDTixHQUFhQSxFQUFVUSxDQUFLLEVBQUdBLEVBQVFQLEVBQVNPLENBQUssRUFDbkZDLE1BQU1KLEVBQWVHLENBQUssQ0FFOUIsQ0FHQSxPQTlCeUIsSUFBckJFLFVBQVVDLE9BR1gsQ0FDQ0wsYUFBQUEsRUFDQU4sVUFBQUEsRUFDQUMsUUFBQUEsRUFDQUksZUFBQUEsRUFBaUJYLFNBQ2pCUyxVQUFBQSxDLEVBQ0VKLEdBSUpPLEVBQWVQLEVBQ1gsQ0FBQ0csR0FBNkJQLFlBQVlPLENBQXlCLEdBQ3JFRyxFQUFpQlgsU0FDakJTLEVBQVlELEdBRVpHLEVBQWlCSCxHQVlkTixNQUNKTyxFQUdHLElBQU1OLGlCQUFpQlUsRUFBRyxFQUFJSixDQUFVLEVBR3hDSSxDQUFnQyxDQUV4QyxRQW5EZ0JULFFBbURoQiIsImZpbGUiOiJub2RlX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvb2JzZXJ2YWJsZS9nZW5lcmF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vdXRpbC9pZGVudGl0eSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlSW5wdXQsIFNjaGVkdWxlckxpa2UgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc1NjaGVkdWxlciB9IGZyb20gJy4uL3V0aWwvaXNTY2hlZHVsZXInO1xuaW1wb3J0IHsgZGVmZXIgfSBmcm9tICcuL2RlZmVyJztcbmltcG9ydCB7IHNjaGVkdWxlSXRlcmFibGUgfSBmcm9tICcuLi9zY2hlZHVsZWQvc2NoZWR1bGVJdGVyYWJsZSc7XG5cbnR5cGUgQ29uZGl0aW9uRnVuYzxTPiA9IChzdGF0ZTogUykgPT4gYm9vbGVhbjtcbnR5cGUgSXRlcmF0ZUZ1bmM8Uz4gPSAoc3RhdGU6IFMpID0+IFM7XG50eXBlIFJlc3VsdEZ1bmM8UywgVD4gPSAoc3RhdGU6IFMpID0+IFQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJhdGVCYXNlT3B0aW9uczxTPiB7XG4gIC8qKlxuICAgKiBJbml0aWFsIHN0YXRlLlxuICAgKi9cbiAgaW5pdGlhbFN0YXRlOiBTO1xuICAvKipcbiAgICogQ29uZGl0aW9uIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBzdGF0ZSBhbmQgcmV0dXJucyBib29sZWFuLlxuICAgKiBXaGVuIGl0IHJldHVybnMgZmFsc2UsIHRoZSBnZW5lcmF0b3Igc3RvcHMuXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIGEgZ2VuZXJhdG9yIG5ldmVyIHN0b3BzLlxuICAgKi9cbiAgY29uZGl0aW9uPzogQ29uZGl0aW9uRnVuYzxTPjtcbiAgLyoqXG4gICAqIEl0ZXJhdGUgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHN0YXRlIGFuZCByZXR1cm5zIG5ldyBzdGF0ZS5cbiAgICovXG4gIGl0ZXJhdGU6IEl0ZXJhdGVGdW5jPFM+O1xuICAvKipcbiAgICogU2NoZWR1bGVyTGlrZSB0byB1c2UgZm9yIGdlbmVyYXRpb24gcHJvY2Vzcy5cbiAgICogQnkgZGVmYXVsdCwgYSBnZW5lcmF0b3Igc3RhcnRzIGltbWVkaWF0ZWx5LlxuICAgKi9cbiAgc2NoZWR1bGVyPzogU2NoZWR1bGVyTGlrZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0ZU9wdGlvbnM8VCwgUz4gZXh0ZW5kcyBHZW5lcmF0ZUJhc2VPcHRpb25zPFM+IHtcbiAgLyoqXG4gICAqIFJlc3VsdCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCBhY2NlcHRzIHN0YXRlIGFuZCByZXR1cm5zIGEgdmFsdWUgdG8gZW1pdC5cbiAgICovXG4gIHJlc3VsdFNlbGVjdG9yOiBSZXN1bHRGdW5jPFMsIFQ+O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHJ1bm5pbmcgYSBzdGF0ZS1kcml2ZW4gbG9vcFxuICogcHJvZHVjaW5nIHRoZSBzZXF1ZW5jZSdzIGVsZW1lbnRzLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlclxuICogdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gKlxuICogIVtdKGdlbmVyYXRlLnBuZylcbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIFByb2R1Y2VzIHNlcXVlbmNlIG9mIG51bWJlcnNcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2VuZXJhdGUgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBnZW5lcmF0ZSgwLCB4ID0+IHggPCAzLCB4ID0+IHggKyAxLCB4ID0+IHgpO1xuICpcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDBcbiAqIC8vIDFcbiAqIC8vIDJcbiAqIGBgYFxuICpcbiAqIFVzZSBgYXNhcFNjaGVkdWxlcmBcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2VuZXJhdGUsIGFzYXBTY2hlZHVsZXIgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBnZW5lcmF0ZSgxLCB4ID0+IHggPCA1LCB4ID0+IHggKiAyLCB4ID0+IHggKyAxLCBhc2FwU2NoZWR1bGVyKTtcbiAqXG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIC8vIExvZ3M6XG4gKiAvLyAyXG4gKiAvLyAzXG4gKiAvLyA1XG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBmcm9tfVxuICogQHNlZSB7QGxpbmsgT2JzZXJ2YWJsZX1cbiAqXG4gKiBAcGFyYW0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gKiBAcGFyYW0gY29uZGl0aW9uIENvbmRpdGlvbiB0byB0ZXJtaW5hdGUgZ2VuZXJhdGlvbiAodXBvbiByZXR1cm5pbmcgZmFsc2UpLlxuICogQHBhcmFtIGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gKiBAcGFyYW0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICogQHBhcmFtIHNjaGVkdWxlciBBIHtAbGluayBTY2hlZHVsZXJMaWtlfSBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLlxuICogSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBlbWl0IGltbWVkaWF0ZWx5LlxuICogQHJldHVybnMgVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAqIEBkZXByZWNhdGVkIEluc3RlYWQgb2YgcGFzc2luZyBzZXBhcmF0ZSBhcmd1bWVudHMsIHVzZSB0aGUgb3B0aW9ucyBhcmd1bWVudC5cbiAqIFNpZ25hdHVyZXMgdGFraW5nIHNlcGFyYXRlIGFyZ3VtZW50cyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZTxULCBTPihcbiAgaW5pdGlhbFN0YXRlOiBTLFxuICBjb25kaXRpb246IENvbmRpdGlvbkZ1bmM8Uz4sXG4gIGl0ZXJhdGU6IEl0ZXJhdGVGdW5jPFM+LFxuICByZXN1bHRTZWxlY3RvcjogUmVzdWx0RnVuYzxTLCBUPixcbiAgc2NoZWR1bGVyPzogU2NoZWR1bGVyTGlrZVxuKTogT2JzZXJ2YWJsZTxUPjtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYW4gT2JzZXJ2YWJsZSBieSBydW5uaW5nIGEgc3RhdGUtZHJpdmVuIGxvb3BcbiAqIHRoYXQgZW1pdHMgYW4gZWxlbWVudCBvbiBlYWNoIGl0ZXJhdGlvbi5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VXNlIGl0IGluc3RlYWQgb2YgbmV4dGluZyB2YWx1ZXMgaW4gYSBmb3IgbG9vcC48L3NwYW4+XG4gKlxuICogIVtdKGdlbmVyYXRlLnBuZylcbiAqXG4gKiBgZ2VuZXJhdGVgIGFsbG93cyB5b3UgdG8gY3JlYXRlIGEgc3RyZWFtIG9mIHZhbHVlcyBnZW5lcmF0ZWQgd2l0aCBhIGxvb3AgdmVyeSBzaW1pbGFyIHRvXG4gKiBhIHRyYWRpdGlvbmFsIGZvciBsb29wLiBUaGUgZmlyc3QgYXJndW1lbnQgb2YgYGdlbmVyYXRlYCBpcyBhIGJlZ2lubmluZyB2YWx1ZS4gVGhlIHNlY29uZCBhcmd1bWVudFxuICogaXMgYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgdGhpcyB2YWx1ZSBhbmQgdGVzdHMgaWYgc29tZSBjb25kaXRpb24gc3RpbGwgaG9sZHMuIElmIGl0IGRvZXMsXG4gKiB0aGVuIHRoZSBsb29wIGNvbnRpbnVlcywgaWYgbm90LCBpdCBzdG9wcy4gVGhlIHRoaXJkIHZhbHVlIGlzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdGhlXG4gKiBwcmV2aW91c2x5IGRlZmluZWQgdmFsdWUgYW5kIG1vZGlmaWVzIGl0IGluIHNvbWUgd2F5IG9uIGVhY2ggaXRlcmF0aW9uLiBOb3RlIGhvdyB0aGVzZSB0aHJlZSBwYXJhbWV0ZXJzXG4gKiBhcmUgZGlyZWN0IGVxdWl2YWxlbnRzIG9mIHRocmVlIGV4cHJlc3Npb25zIGluIGEgdHJhZGl0aW9uYWwgZm9yIGxvb3A6IHRoZSBmaXJzdCBleHByZXNzaW9uXG4gKiBpbml0aWFsaXplcyBzb21lIHN0YXRlIChmb3IgZXhhbXBsZSwgYSBudW1lcmljIGluZGV4KSwgdGhlIHNlY29uZCB0ZXN0cyBpZiB0aGUgbG9vcCBjYW4gcGVyZm9ybSB0aGUgbmV4dFxuICogaXRlcmF0aW9uIChmb3IgZXhhbXBsZSwgaWYgdGhlIGluZGV4IGlzIGxvd2VyIHRoYW4gMTApIGFuZCB0aGUgdGhpcmQgc3RhdGVzIGhvdyB0aGUgZGVmaW5lZCB2YWx1ZVxuICogd2lsbCBiZSBtb2RpZmllZCBvbiBldmVyeSBzdGVwIChmb3IgZXhhbXBsZSwgdGhlIGluZGV4IHdpbGwgYmUgaW5jcmVtZW50ZWQgYnkgb25lKS5cbiAqXG4gKiBSZXR1cm4gdmFsdWUgb2YgYSBgZ2VuZXJhdGVgIG9wZXJhdG9yIGlzIGFuIE9ic2VydmFibGUgdGhhdCBvbiBlYWNoIGxvb3AgaXRlcmF0aW9uXG4gKiBlbWl0cyBhIHZhbHVlLiBGaXJzdCBvZiBhbGwsIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gaXMgcmFuLiBJZiBpdCByZXR1cm5zIHRydWUsIHRoZW4gdGhlIE9ic2VydmFibGVcbiAqIGVtaXRzIHRoZSBjdXJyZW50bHkgc3RvcmVkIHZhbHVlIChpbml0aWFsIHZhbHVlIGF0IHRoZSBmaXJzdCBpdGVyYXRpb24pIGFuZCBmaW5hbGx5IHVwZGF0ZXNcbiAqIHRoYXQgdmFsdWUgd2l0aCBpdGVyYXRlIGZ1bmN0aW9uLiBJZiBhdCBzb21lIHBvaW50IHRoZSBjb25kaXRpb24gcmV0dXJucyBmYWxzZSwgdGhlbiB0aGUgT2JzZXJ2YWJsZVxuICogY29tcGxldGVzIGF0IHRoYXQgbW9tZW50LlxuICpcbiAqIE9wdGlvbmFsbHkgeW91IGNhbiBwYXNzIGEgZm91cnRoIHBhcmFtZXRlciB0byBgZ2VuZXJhdGVgIC0gYSByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggYWxsb3dzIHlvdVxuICogdG8gaW1tZWRpYXRlbHkgbWFwIHRoZSB2YWx1ZSB0aGF0IHdvdWxkIG5vcm1hbGx5IGJlIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiBJZiB5b3UgZmluZCB0aHJlZSBhbm9ueW1vdXMgZnVuY3Rpb25zIGluIGBnZW5lcmF0ZWAgY2FsbCBoYXJkIHRvIHJlYWQsIHlvdSBjYW4gcHJvdmlkZVxuICogYSBzaW5nbGUgb2JqZWN0IHRvIHRoZSBvcGVyYXRvciBpbnN0ZWFkIHdoZXJlIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0aWVzOiBgaW5pdGlhbFN0YXRlYCxcbiAqIGBjb25kaXRpb25gLCBgaXRlcmF0ZWAgYW5kIGByZXN1bHRTZWxlY3RvcmAsIHdoaWNoIHNob3VsZCBoYXZlIHJlc3BlY3RpdmUgdmFsdWVzIHRoYXQgeW91XG4gKiB3b3VsZCBub3JtYWxseSBwYXNzIHRvIGBnZW5lcmF0ZWAuIGByZXN1bHRTZWxlY3RvcmAgaXMgc3RpbGwgb3B0aW9uYWwsIGJ1dCB0aGF0IGZvcm1cbiAqIG9mIGNhbGxpbmcgYGdlbmVyYXRlYCBhbGxvd3MgeW91IHRvIG9taXQgYGNvbmRpdGlvbmAgYXMgd2VsbC4gSWYgeW91IG9taXQgaXQsIHRoYXQgbWVhbnNcbiAqIGNvbmRpdGlvbiBhbHdheXMgaG9sZHMsIG9yIGluIG90aGVyIHdvcmRzIHRoZSByZXN1bHRpbmcgT2JzZXJ2YWJsZSB3aWxsIG5ldmVyIGNvbXBsZXRlLlxuICpcbiAqIEJvdGggZm9ybXMgb2YgYGdlbmVyYXRlYCBjYW4gb3B0aW9uYWxseSBhY2NlcHQgYSBzY2hlZHVsZXIuIEluIGNhc2Ugb2YgYSBtdWx0aS1wYXJhbWV0ZXIgY2FsbCxcbiAqIHNjaGVkdWxlciBzaW1wbHkgY29tZXMgYXMgYSBsYXN0IGFyZ3VtZW50IChubyBtYXR0ZXIgaWYgdGhlcmUgaXMgYSBgcmVzdWx0U2VsZWN0b3JgXG4gKiBmdW5jdGlvbiBvciBub3QpLiBJbiBjYXNlIG9mIGEgc2luZ2xlLXBhcmFtZXRlciBjYWxsLCB5b3UgY2FuIHByb3ZpZGUgaXQgYXMgYVxuICogYHNjaGVkdWxlcmAgcHJvcGVydHkgb24gdGhlIG9iamVjdCBwYXNzZWQgdG8gdGhlIG9wZXJhdG9yLiBJbiBib3RoIGNhc2VzLCBhIHNjaGVkdWxlciBkZWNpZGVzIHdoZW5cbiAqIHRoZSBuZXh0IGl0ZXJhdGlvbiBvZiB0aGUgbG9vcCB3aWxsIGhhcHBlbiBhbmQgdGhlcmVmb3JlIHdoZW4gdGhlIG5leHQgdmFsdWUgd2lsbCBiZSBlbWl0dGVkXG4gKiBieSB0aGUgT2JzZXJ2YWJsZS4gRm9yIGV4YW1wbGUsIHRvIGVuc3VyZSB0aGF0IGVhY2ggdmFsdWUgaXMgcHVzaGVkIHRvIHRoZSBPYnNlcnZlclxuICogb24gYSBzZXBhcmF0ZSB0YXNrIGluIHRoZSBldmVudCBsb29wLCB5b3UgY291bGQgdXNlIHRoZSBgYXN5bmNgIHNjaGVkdWxlci4gTm90ZSB0aGF0XG4gKiBieSBkZWZhdWx0ICh3aGVuIG5vIHNjaGVkdWxlciBpcyBwYXNzZWQpIHZhbHVlcyBhcmUgc2ltcGx5IGVtaXR0ZWQgc3luY2hyb25vdXNseS5cbiAqXG4gKlxuICogIyMgRXhhbXBsZXNcbiAqXG4gKiBVc2Ugd2l0aCBjb25kaXRpb24gYW5kIGl0ZXJhdGUgZnVuY3Rpb25zXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGdlbmVyYXRlIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gZ2VuZXJhdGUoMCwgeCA9PiB4IDwgMywgeCA9PiB4ICsgMSk7XG4gKlxuICogcmVzdWx0LnN1YnNjcmliZSh7XG4gKiAgIG5leHQ6IHZhbHVlID0+IGNvbnNvbGUubG9nKHZhbHVlKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdDb21wbGV0ZSEnKVxuICogfSk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDBcbiAqIC8vIDFcbiAqIC8vIDJcbiAqIC8vICdDb21wbGV0ZSEnXG4gKiBgYGBcbiAqXG4gKiBVc2Ugd2l0aCBjb25kaXRpb24sIGl0ZXJhdGUgYW5kIHJlc3VsdFNlbGVjdG9yIGZ1bmN0aW9uc1xuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBnZW5lcmF0ZSB9IGZyb20gJ3J4anMnO1xuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGdlbmVyYXRlKDAsIHggPT4geCA8IDMsIHggPT4geCArIDEsIHggPT4geCAqIDEwMDApO1xuICpcbiAqIHJlc3VsdC5zdWJzY3JpYmUoe1xuICogICBuZXh0OiB2YWx1ZSA9PiBjb25zb2xlLmxvZyh2YWx1ZSksXG4gKiAgIGNvbXBsZXRlOiAoKSA9PiBjb25zb2xlLmxvZygnQ29tcGxldGUhJylcbiAqIH0pO1xuICpcbiAqIC8vIExvZ3M6XG4gKiAvLyAwXG4gKiAvLyAxMDAwXG4gKiAvLyAyMDAwXG4gKiAvLyAnQ29tcGxldGUhJ1xuICogYGBgXG4gKlxuICogVXNlIHdpdGggb3B0aW9ucyBvYmplY3RcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2VuZXJhdGUgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBnZW5lcmF0ZSh7XG4gKiAgIGluaXRpYWxTdGF0ZTogMCxcbiAqICAgY29uZGl0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA8IDM7IH0sXG4gKiAgIGl0ZXJhdGUodmFsdWUpIHsgcmV0dXJuIHZhbHVlICsgMTsgfSxcbiAqICAgcmVzdWx0U2VsZWN0b3IodmFsdWUpIHsgcmV0dXJuIHZhbHVlICogMTAwMDsgfVxuICogfSk7XG4gKlxuICogcmVzdWx0LnN1YnNjcmliZSh7XG4gKiAgIG5leHQ6IHZhbHVlID0+IGNvbnNvbGUubG9nKHZhbHVlKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdDb21wbGV0ZSEnKVxuICogfSk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDBcbiAqIC8vIDEwMDBcbiAqIC8vIDIwMDBcbiAqIC8vICdDb21wbGV0ZSEnXG4gKiBgYGBcbiAqXG4gKiBVc2Ugb3B0aW9ucyBvYmplY3Qgd2l0aG91dCBjb25kaXRpb24gZnVuY3Rpb25cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2VuZXJhdGUgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBnZW5lcmF0ZSh7XG4gKiAgIGluaXRpYWxTdGF0ZTogMCxcbiAqICAgaXRlcmF0ZSh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgKyAxOyB9LFxuICogICByZXN1bHRTZWxlY3Rvcih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgKiAxMDAwOyB9XG4gKiB9KTtcbiAqXG4gKiByZXN1bHQuc3Vic2NyaWJlKHtcbiAqICAgbmV4dDogdmFsdWUgPT4gY29uc29sZS5sb2codmFsdWUpLFxuICogICBjb21wbGV0ZTogKCkgPT4gY29uc29sZS5sb2coJ0NvbXBsZXRlIScpIC8vIFRoaXMgd2lsbCBuZXZlciBydW5cbiAqIH0pO1xuICpcbiAqIC8vIExvZ3M6XG4gKiAvLyAwXG4gKiAvLyAxMDAwXG4gKiAvLyAyMDAwXG4gKiAvLyAzMDAwXG4gKiAvLyAuLi5hbmQgbmV2ZXIgc3RvcHMuXG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBmcm9tfVxuICpcbiAqIEBwYXJhbSBpbml0aWFsU3RhdGUgSW5pdGlhbCBzdGF0ZS5cbiAqIEBwYXJhbSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gKiBAcGFyYW0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAqIEBwYXJhbSBzY2hlZHVsZXIgQSB7QGxpbmsgU2NoZWR1bGVyfSBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3RcbiAqIHByb3ZpZGVkLCBkZWZhdWx0cyB0byBlbWl0dGluZyBpbW1lZGlhdGVseS5cbiAqIEByZXR1cm4gVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAqIEBkZXByZWNhdGVkIEluc3RlYWQgb2YgcGFzc2luZyBzZXBhcmF0ZSBhcmd1bWVudHMsIHVzZSB0aGUgb3B0aW9ucyBhcmd1bWVudC5cbiAqIFNpZ25hdHVyZXMgdGFraW5nIHNlcGFyYXRlIGFyZ3VtZW50cyB3aWxsIGJlIHJlbW92ZWQgaW4gdjguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZTxTPihcbiAgaW5pdGlhbFN0YXRlOiBTLFxuICBjb25kaXRpb246IENvbmRpdGlvbkZ1bmM8Uz4sXG4gIGl0ZXJhdGU6IEl0ZXJhdGVGdW5jPFM+LFxuICBzY2hlZHVsZXI/OiBTY2hlZHVsZXJMaWtlXG4pOiBPYnNlcnZhYmxlPFM+O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHJ1bm5pbmcgYSBzdGF0ZS1kcml2ZW4gbG9vcFxuICogcHJvZHVjaW5nIHRoZSBzZXF1ZW5jZSdzIGVsZW1lbnRzLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlclxuICogdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gKiBUaGUgb3ZlcmxvYWQgYWNjZXB0cyBvcHRpb25zIG9iamVjdCB0aGF0IG1pZ2h0IGNvbnRhaW4gaW5pdGlhbCBzdGF0ZSwgaXRlcmF0ZSxcbiAqIGNvbmRpdGlvbiBhbmQgc2NoZWR1bGVyLlxuICpcbiAqICFbXShnZW5lcmF0ZS5wbmcpXG4gKlxuICogIyMgRXhhbXBsZXNcbiAqXG4gKiBVc2Ugb3B0aW9ucyBvYmplY3Qgd2l0aCBjb25kaXRpb24gZnVuY3Rpb25cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2VuZXJhdGUgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBnZW5lcmF0ZSh7XG4gKiAgIGluaXRpYWxTdGF0ZTogMCxcbiAqICAgY29uZGl0aW9uOiB4ID0+IHggPCAzLFxuICogICBpdGVyYXRlOiB4ID0+IHggKyAxXG4gKiB9KTtcbiAqXG4gKiByZXN1bHQuc3Vic2NyaWJlKHtcbiAqICAgbmV4dDogdmFsdWUgPT4gY29uc29sZS5sb2codmFsdWUpLFxuICogICBjb21wbGV0ZTogKCkgPT4gY29uc29sZS5sb2coJ0NvbXBsZXRlIScpXG4gKiB9KTtcbiAqXG4gKiAvLyBMb2dzOlxuICogLy8gMFxuICogLy8gMVxuICogLy8gMlxuICogLy8gJ0NvbXBsZXRlISdcbiAqIGBgYFxuICpcbiAqIEBzZWUge0BsaW5rIGZyb219XG4gKiBAc2VlIHtAbGluayBPYnNlcnZhYmxlfVxuICpcbiAqIEBwYXJhbSBvcHRpb25zIE9iamVjdCB0aGF0IG11c3QgY29udGFpbiBpbml0aWFsU3RhdGUsIGl0ZXJhdGUgYW5kIG1pZ2h0IGNvbnRhaW4gY29uZGl0aW9uIGFuZCBzY2hlZHVsZXIuXG4gKiBAcmV0dXJucyBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGU8Uz4ob3B0aW9uczogR2VuZXJhdGVCYXNlT3B0aW9uczxTPik6IE9ic2VydmFibGU8Uz47XG5cbi8qKlxuICogR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgcnVubmluZyBhIHN0YXRlLWRyaXZlbiBsb29wXG4gKiBwcm9kdWNpbmcgdGhlIHNlcXVlbmNlJ3MgZWxlbWVudHMsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyXG4gKiB0byBzZW5kIG91dCBvYnNlcnZlciBtZXNzYWdlcy5cbiAqIFRoZSBvdmVybG9hZCBhY2NlcHRzIG9wdGlvbnMgb2JqZWN0IHRoYXQgbWlnaHQgY29udGFpbiBpbml0aWFsIHN0YXRlLCBpdGVyYXRlLFxuICogY29uZGl0aW9uLCByZXN1bHQgc2VsZWN0b3IgYW5kIHNjaGVkdWxlci5cbiAqXG4gKiAhW10oZ2VuZXJhdGUucG5nKVxuICpcbiAqICMjIEV4YW1wbGVzXG4gKlxuICogVXNlIG9wdGlvbnMgb2JqZWN0IHdpdGggY29uZGl0aW9uIGFuZCBpdGVyYXRlIGZ1bmN0aW9uXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGdlbmVyYXRlIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gZ2VuZXJhdGUoe1xuICogICBpbml0aWFsU3RhdGU6IDAsXG4gKiAgIGNvbmRpdGlvbjogeCA9PiB4IDwgMyxcbiAqICAgaXRlcmF0ZTogeCA9PiB4ICsgMSxcbiAqICAgcmVzdWx0U2VsZWN0b3I6IHggPT4geFxuICogfSk7XG4gKlxuICogcmVzdWx0LnN1YnNjcmliZSh7XG4gKiAgIG5leHQ6IHZhbHVlID0+IGNvbnNvbGUubG9nKHZhbHVlKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdDb21wbGV0ZSEnKVxuICogfSk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDBcbiAqIC8vIDFcbiAqIC8vIDJcbiAqIC8vICdDb21wbGV0ZSEnXG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBmcm9tfVxuICogQHNlZSB7QGxpbmsgT2JzZXJ2YWJsZX1cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBPYmplY3QgdGhhdCBtdXN0IGNvbnRhaW4gaW5pdGlhbFN0YXRlLCBpdGVyYXRlLCByZXN1bHRTZWxlY3RvciBhbmQgbWlnaHQgY29udGFpbiBjb25kaXRpb24gYW5kIHNjaGVkdWxlci5cbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgc2VxdWVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZTxULCBTPihvcHRpb25zOiBHZW5lcmF0ZU9wdGlvbnM8VCwgUz4pOiBPYnNlcnZhYmxlPFQ+O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGU8VCwgUz4oXG4gIGluaXRpYWxTdGF0ZU9yT3B0aW9uczogUyB8IEdlbmVyYXRlT3B0aW9uczxULCBTPixcbiAgY29uZGl0aW9uPzogQ29uZGl0aW9uRnVuYzxTPixcbiAgaXRlcmF0ZT86IEl0ZXJhdGVGdW5jPFM+LFxuICByZXN1bHRTZWxlY3Rvck9yU2NoZWR1bGVyPzogUmVzdWx0RnVuYzxTLCBUPiB8IFNjaGVkdWxlckxpa2UsXG4gIHNjaGVkdWxlcj86IFNjaGVkdWxlckxpa2Vcbik6IE9ic2VydmFibGU8VD4ge1xuICBsZXQgcmVzdWx0U2VsZWN0b3I6IFJlc3VsdEZ1bmM8UywgVD47XG4gIGxldCBpbml0aWFsU3RhdGU6IFM7XG5cbiAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgYXMgd2UgbW92ZSBhd2F5IGZyb20gZGVwcmVjYXRlZCBzaWduYXR1cmVzXG4gIC8vIGFuZCBtb3ZlIHRvd2FyZHMgYSBjb25maWd1cmF0aW9uIG9iamVjdCBhcmd1bWVudC5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBJZiB3ZSBvbmx5IGhhdmUgb25lIGFyZ3VtZW50LCB3ZSBjYW4gYXNzdW1lIGl0IGlzIGEgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgLy8gTm90ZSB0aGF0IGZvbGtzIG5vdCB1c2luZyBUeXBlU2NyaXB0IG1heSB0cmlwIG92ZXIgdGhpcy5cbiAgICAoe1xuICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgY29uZGl0aW9uLFxuICAgICAgaXRlcmF0ZSxcbiAgICAgIHJlc3VsdFNlbGVjdG9yID0gaWRlbnRpdHkgYXMgUmVzdWx0RnVuYzxTLCBUPixcbiAgICAgIHNjaGVkdWxlcixcbiAgICB9ID0gaW5pdGlhbFN0YXRlT3JPcHRpb25zIGFzIEdlbmVyYXRlT3B0aW9uczxULCBTPik7XG4gIH0gZWxzZSB7XG4gICAgLy8gRGVwcmVjYXRlZCBhcmd1bWVudHMgcGF0aC4gRmlndXJlIG91dCB3aGF0IHRoZSB1c2VyXG4gICAgLy8gcGFzc2VkIGFuZCBzZXQgaXQgaGVyZS5cbiAgICBpbml0aWFsU3RhdGUgPSBpbml0aWFsU3RhdGVPck9wdGlvbnMgYXMgUztcbiAgICBpZiAoIXJlc3VsdFNlbGVjdG9yT3JTY2hlZHVsZXIgfHwgaXNTY2hlZHVsZXIocmVzdWx0U2VsZWN0b3JPclNjaGVkdWxlcikpIHtcbiAgICAgIHJlc3VsdFNlbGVjdG9yID0gaWRlbnRpdHkgYXMgUmVzdWx0RnVuYzxTLCBUPjtcbiAgICAgIHNjaGVkdWxlciA9IHJlc3VsdFNlbGVjdG9yT3JTY2hlZHVsZXIgYXMgU2NoZWR1bGVyTGlrZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3Rvck9yU2NoZWR1bGVyIGFzIFJlc3VsdEZ1bmM8UywgVD47XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIGFjdHVhbCBnZW5lcmF0b3IgdXNlZCB0byBcImdlbmVyYXRlXCIgdmFsdWVzLlxuICBmdW5jdGlvbiogZ2VuKCkge1xuICAgIGZvciAobGV0IHN0YXRlID0gaW5pdGlhbFN0YXRlOyAhY29uZGl0aW9uIHx8IGNvbmRpdGlvbihzdGF0ZSk7IHN0YXRlID0gaXRlcmF0ZSEoc3RhdGUpKSB7XG4gICAgICB5aWVsZCByZXN1bHRTZWxlY3RvcihzdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gV2UgdXNlIGBkZWZlcmAgYmVjYXVzZSB3ZSB3YW50IHRvIGRlZmVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgaXRlcmF0b3IgZnJvbSB0aGUgaXRlcmFibGUuXG4gIHJldHVybiBkZWZlcihcbiAgICAoc2NoZWR1bGVyXG4gICAgICA/IC8vIElmIGEgc2NoZWR1bGVyIHdhcyBwcm92aWRlZCwgdXNlIGBzY2hlZHVsZUl0ZXJhYmxlYCB0byBlbnN1cmUgdGhhdCBpdGVyYXRpb24vZ2VuZXJhdGlvblxuICAgICAgICAvLyBoYXBwZW5zIG9uIHRoZSBzY2hlZHVsZXIuXG4gICAgICAgICgpID0+IHNjaGVkdWxlSXRlcmFibGUoZ2VuKCksIHNjaGVkdWxlciEpXG4gICAgICA6IC8vIE90aGVyd2lzZSwgaWYgdGhlcmUncyBubyBzY2hlZHVsZXIsIHdlIGNhbiBqdXN0IHVzZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGRpcmVjdGx5IGluXG4gICAgICAgIC8vIGBkZWZlcmAgYW5kIGV4ZWN1dGluZyBpdCB3aWxsIHJldHVybiB0aGUgZ2VuZXJhdG9yICh3aGljaCBpcyBpdGVyYWJsZSkuXG4gICAgICAgIGdlbikgYXMgKCkgPT4gT2JzZXJ2YWJsZUlucHV0PFQ+XG4gICk7XG59XG4iXX0=
