import{EMPTY}from"../observable/empty";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";import{timer}from"../observable/timer";function repeat(e){let p=1/0,u;return null!=e&&("object"==typeof e?{count:p=1/0,delay:u}=e:p=e),p<=0?()=>EMPTY:operate((r,t)=>{let o=0,b,i=()=>{if(b?.unsubscribe(),(b=null)!=u){var r="number"==typeof u?timer(u):innerFrom(u(o));let e=createOperatorSubscriber(t,()=>{e.unsubscribe(),m()});r.subscribe(e)}else m()},m=()=>{let e=!1;b=r.subscribe(createOperatorSubscriber(t,void 0,()=>{++o<p?b?i():e=!0:t.complete()})),e&&i()};m()})}export{repeat};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvcmVwZWF0LnRzIl0sIm5hbWVzIjpbIkVNUFRZIiwib3BlcmF0ZSIsImNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciIsImlubmVyRnJvbSIsInRpbWVyIiwicmVwZWF0IiwiY291bnRPckNvbmZpZyIsImxldCIsImNvdW50IiwiSW5maW5pdHkiLCJkZWxheSIsInNvdXJjZSIsInN1YnNjcmliZXIiLCJzb0ZhciIsInNvdXJjZVN1YiIsInJlc3Vic2NyaWJlIiwidW5zdWJzY3JpYmUiLCJub3RpZmllciIsIm5vdGlmaWVyU3Vic2NyaWJlciIsInN1YnNjcmliZVRvU291cmNlIiwic3Vic2NyaWJlIiwic3luY1Vuc3ViIiwidW5kZWZpbmVkIiwiY29tcGxldGUiXSwibWFwcGluZ3MiOiJPQUNTQSxLQUFrQyxLQUFyQiw2QkFDYkMsT0FBNkIsS0FBZCxzQkFFZkMsd0JBQXNELEtBQXRCLDhCQUNoQ0MsU0FBMEMsS0FBekIsaUNBQ2pCQyxLQUFrQyxLQUFyQixzQkE2R2hCLFNBQVVDLE9BQVVDLEdBQ3hCQyxJQUFJQyxFQUFRQyxFQUFBQSxFQUNSQyxFQVVKLE9BUnFCLE1BQWpCSixJQUMyQixVQUF6QixPQUFPQSxFQUNSLENBQUVFLE1BQUFBLEVBQVFDLEVBQUFBLEVBQVVDLE1BQUFBLENBQUssRUFBS0osRUFFL0JFLEVBQVFGLEdBSUxFLEdBQVMsRUFDWixJQUFNUixNQUNOQyxRQUFRLENBQUNVLEVBQVFDLEtBQ2ZMLElBQUlNLEVBQVEsRUFDUkMsRUFFRUMsRUFBYyxLQUdsQixHQUZBRCxHQUFXRSxZQUFXLEdBQ3RCRixFQUFZLE9BQ1JKLEVBQWUsQ0FDakIsSUFBTU8sRUFBNEIsVUFBakIsT0FBT1AsRUFBcUJOLE1BQU1NLENBQUssRUFBSVAsVUFBVU8sRUFBTUcsQ0FBSyxDQUFDLEVBQ2xGLElBQU1LLEVBQXFCaEIseUJBQXlCVSxFQUFZLEtBQzlETSxFQUFtQkYsWUFBVyxFQUM5QkcsRUFBaUIsQ0FDbkIsQ0FBQyxFQUNERixFQUFTRyxVQUFVRixDQUFrQixDQUN2QyxNQUNFQyxFQUFpQixDQUVyQixFQUVNQSxFQUFvQixLQUN4QlosSUFBSWMsRUFBWSxDQUFBLEVBQ2hCUCxFQUFZSCxFQUFPUyxVQUNqQmxCLHlCQUF5QlUsRUFBWVUsS0FBQUEsRUFBVyxLQUMxQyxFQUFFVCxFQUFRTCxFQUNSTSxFQUNGQyxFQUFXLEVBRVhNLEVBQVksQ0FBQSxFQUdkVCxFQUFXVyxTQUFRLENBRXZCLENBQUMsQ0FBQyxFQUdBRixHQUNGTixFQUFXLENBRWYsRUFFQUksRUFBaUIsQ0FDbkIsQ0FBQyxDQUNQLFFBeERnQmQsTUF3RGhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvcmVwZWF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IEVNUFRZIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9lbXB0eSc7XG5pbXBvcnQgeyBvcGVyYXRlIH0gZnJvbSAnLi4vdXRpbC9saWZ0JztcbmltcG9ydCB7IE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbiwgT2JzZXJ2YWJsZUlucHV0IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuaW1wb3J0IHsgdGltZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlL3RpbWVyJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXBlYXRDb25maWcge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHNvdXJjZS4gRGVmYXVsdHMgdG8gYEluZmluaXR5YC5cbiAgICovXG4gIGNvdW50PzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJZiBhIGBudW1iZXJgLCB3aWxsIGRlbGF5IHRoZSByZXBlYXQgb2YgdGhlIHNvdXJjZSBieSB0aGF0IG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAqIElmIGEgZnVuY3Rpb24sIGl0IHdpbGwgcHJvdmlkZSB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBzb3VyY2UgaGFzIGJlZW4gc3Vic2NyaWJlZCB0byxcbiAgICogYW5kIHRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGEgdmFsaWQgb2JzZXJ2YWJsZSBpbnB1dCB0aGF0IHdpbGwgbm90aWZ5IHdoZW4gdGhlIHNvdXJjZVxuICAgKiBzaG91bGQgYmUgcmVwZWF0ZWQuIElmIHRoZSBub3RpZmllciBvYnNlcnZhYmxlIGlzIGVtcHR5LCB0aGUgcmVzdWx0IHdpbGwgY29tcGxldGUuXG4gICAqL1xuICBkZWxheT86IG51bWJlciB8ICgoY291bnQ6IG51bWJlcikgPT4gT2JzZXJ2YWJsZUlucHV0PGFueT4pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlIHNvdXJjZSBzdHJlYW0gd2hlbiB0aGUgc291cmNlIHN0cmVhbSBjb21wbGV0ZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlJlcGVhdHMgYWxsIHZhbHVlcyBlbWl0dGVkIG9uIHRoZSBzb3VyY2UuIEl0J3MgbGlrZSB7QGxpbmsgcmV0cnl9LCBidXQgZm9yIG5vbiBlcnJvciBjYXNlcy48L3NwYW4+XG4gKlxuICogIVtdKHJlcGVhdC5wbmcpXG4gKlxuICogUmVwZWF0IHdpbGwgb3V0cHV0IHZhbHVlcyBmcm9tIGEgc291cmNlIHVudGlsIHRoZSBzb3VyY2UgY29tcGxldGVzLCB0aGVuIGl0IHdpbGwgcmVzdWJzY3JpYmUgdG8gdGhlXG4gKiBzb3VyY2UgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLCB3aXRoIGEgc3BlY2lmaWVkIGRlbGF5LiBSZXBlYXQgY2FuIGJlIHBhcnRpY3VsYXJseSB1c2VmdWwgaW5cbiAqIGNvbWJpbmF0aW9uIHdpdGggY2xvc2luZyBvcGVyYXRvcnMgbGlrZSB7QGxpbmsgdGFrZX0sIHtAbGluayB0YWtlVW50aWx9LCB7QGxpbmsgZmlyc3R9LCBvciB7QGxpbmsgdGFrZVdoaWxlfSxcbiAqIGFzIGl0IGNhbiBiZSB1c2VkIHRvIHJlc3RhcnQgYSBzb3VyY2UgYWdhaW4gZnJvbSBzY3JhdGNoLlxuICpcbiAqIFJlcGVhdCBpcyB2ZXJ5IHNpbWlsYXIgdG8ge0BsaW5rIHJldHJ5fSwgd2hlcmUge0BsaW5rIHJldHJ5fSB3aWxsIHJlc3Vic2NyaWJlIHRvIHRoZSBzb3VyY2UgaW4gdGhlIGVycm9yIGNhc2UsIGJ1dFxuICogYHJlcGVhdGAgd2lsbCByZXN1YnNjcmliZSBpZiB0aGUgc291cmNlIGNvbXBsZXRlcy5cbiAqXG4gKiBOb3RlIHRoYXQgYHJlcGVhdGAgd2lsbCBfbm90XyBjYXRjaCBlcnJvcnMuIFVzZSB7QGxpbmsgcmV0cnl9IGZvciB0aGF0LlxuICpcbiAqIC0gYHJlcGVhdCgwKWAgcmV0dXJucyBhbiBlbXB0eSBvYnNlcnZhYmxlXG4gKiAtIGByZXBlYXQoKWAgd2lsbCByZXBlYXQgZm9yZXZlclxuICogLSBgcmVwZWF0KHsgZGVsYXk6IDIwMCB9KWAgd2lsbCByZXBlYXQgZm9yZXZlciwgd2l0aCBhIGRlbGF5IG9mIDIwMG1zIGJldHdlZW4gcmVwZXRpdGlvbnMuXG4gKiAtIGByZXBlYXQoeyBjb3VudDogMiwgZGVsYXk6IDQwMCB9KWAgd2lsbCByZXBlYXQgdHdpY2UsIHdpdGggYSBkZWxheSBvZiA0MDBtcyBiZXR3ZWVuIHJlcGV0aXRpb25zLlxuICogLSBgcmVwZWF0KHsgZGVsYXk6IChjb3VudCkgPT4gdGltZXIoY291bnQgKiAxMDAwKSB9KWAgd2lsbCByZXBlYXQgZm9yZXZlciwgYnV0IHdpbGwgaGF2ZSBhIGRlbGF5IHRoYXQgZ3Jvd3MgYnkgb25lIHNlY29uZCBmb3IgZWFjaCByZXBldGl0aW9uLlxuICpcbiAqICMjIEV4YW1wbGVcbiAqXG4gKiBSZXBlYXQgYSBtZXNzYWdlIHN0cmVhbVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBvZiwgcmVwZWF0IH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3Qgc291cmNlID0gb2YoJ1JlcGVhdCBtZXNzYWdlJyk7XG4gKiBjb25zdCByZXN1bHQgPSBzb3VyY2UucGlwZShyZXBlYXQoMykpO1xuICpcbiAqIHJlc3VsdC5zdWJzY3JpYmUoeCA9PiBjb25zb2xlLmxvZyh4KSk7XG4gKlxuICogLy8gUmVzdWx0c1xuICogLy8gJ1JlcGVhdCBtZXNzYWdlJ1xuICogLy8gJ1JlcGVhdCBtZXNzYWdlJ1xuICogLy8gJ1JlcGVhdCBtZXNzYWdlJ1xuICogYGBgXG4gKlxuICogUmVwZWF0IDMgdmFsdWVzLCAyIHRpbWVzXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGludGVydmFsLCB0YWtlLCByZXBlYXQgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBzb3VyY2UgPSBpbnRlcnZhbCgxMDAwKTtcbiAqIGNvbnN0IHJlc3VsdCA9IHNvdXJjZS5waXBlKHRha2UoMyksIHJlcGVhdCgyKSk7XG4gKlxuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiAvLyBSZXN1bHRzIGV2ZXJ5IHNlY29uZFxuICogLy8gMFxuICogLy8gMVxuICogLy8gMlxuICogLy8gMFxuICogLy8gMVxuICogLy8gMlxuICogYGBgXG4gKlxuICogRGVmaW5pbmcgdHdvIGNvbXBsZXggcmVwZWF0cyB3aXRoIGRlbGF5cyBvbiB0aGUgc2FtZSBzb3VyY2UuXG4gKiBOb3RlIHRoYXQgdGhlIHNlY29uZCByZXBlYXQgY2Fubm90IGJlIGNhbGxlZCB1bnRpbCB0aGUgZmlyc3RcbiAqIHJlcGVhdCBhcyBleGhhdXN0ZWQgaXQncyBjb3VudC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZGVmZXIsIG9mLCByZXBlYXQgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBzb3VyY2UgPSBkZWZlcigoKSA9PiB7XG4gKiAgICByZXR1cm4gb2YoYEhlbGxvLCBpdCBpcyAke25ldyBEYXRlKCl9YClcbiAqIH0pO1xuICpcbiAqIHNvdXJjZS5waXBlKFxuICogICAgLy8gUmVwZWF0IDMgdGltZXMgd2l0aCBhIGRlbGF5IG9mIDEgc2Vjb25kIGJldHdlZW4gcmVwZXRpdGlvbnNcbiAqICAgIHJlcGVhdCh7XG4gKiAgICAgIGNvdW50OiAzLFxuICogICAgICBkZWxheTogMTAwMCxcbiAqICAgIH0pLFxuICpcbiAqICAgIC8vICpUaGVuKiByZXBlYXQgZm9yZXZlciwgYnV0IHdpdGggYW4gZXhwb25lbnRpYWwgc3RlcC1iYWNrXG4gKiAgICAvLyBtYXhpbmcgb3V0IGF0IDEgbWludXRlLlxuICogICAgcmVwZWF0KHtcbiAqICAgICAgZGVsYXk6IChjb3VudCkgPT4gdGltZXIoTWF0aC5taW4oNjAwMDAsIDIgXiBjb3VudCAqIDEwMDApKVxuICogICAgfSlcbiAqIClcbiAqIGBgYFxuICpcbiAqIEBzZWUge0BsaW5rIHJlcGVhdFdoZW59XG4gKiBAc2VlIHtAbGluayByZXRyeX1cbiAqXG4gKiBAcGFyYW0gY291bnRPckNvbmZpZyBFaXRoZXIgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgc291cmNlIE9ic2VydmFibGUgaXRlbXMgYXJlIHJlcGVhdGVkXG4gKiAoYSBjb3VudCBvZiAwIHdpbGwgeWllbGQgYW4gZW1wdHkgT2JzZXJ2YWJsZSkgb3IgYSB7QGxpbmsgUmVwZWF0Q29uZmlnfSBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBlYXQ8VD4oY291bnRPckNvbmZpZz86IG51bWJlciB8IFJlcGVhdENvbmZpZyk6IE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbjxUPiB7XG4gIGxldCBjb3VudCA9IEluZmluaXR5O1xuICBsZXQgZGVsYXk6IFJlcGVhdENvbmZpZ1snZGVsYXknXTtcblxuICBpZiAoY291bnRPckNvbmZpZyAhPSBudWxsKSB7XG4gICAgaWYgKHR5cGVvZiBjb3VudE9yQ29uZmlnID09PSAnb2JqZWN0Jykge1xuICAgICAgKHsgY291bnQgPSBJbmZpbml0eSwgZGVsYXkgfSA9IGNvdW50T3JDb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudCA9IGNvdW50T3JDb25maWc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvdW50IDw9IDBcbiAgICA/ICgpID0+IEVNUFRZXG4gICAgOiBvcGVyYXRlKChzb3VyY2UsIHN1YnNjcmliZXIpID0+IHtcbiAgICAgICAgbGV0IHNvRmFyID0gMDtcbiAgICAgICAgbGV0IHNvdXJjZVN1YjogU3Vic2NyaXB0aW9uIHwgbnVsbDtcblxuICAgICAgICBjb25zdCByZXN1YnNjcmliZSA9ICgpID0+IHtcbiAgICAgICAgICBzb3VyY2VTdWI/LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgc291cmNlU3ViID0gbnVsbDtcbiAgICAgICAgICBpZiAoZGVsYXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgbm90aWZpZXIgPSB0eXBlb2YgZGVsYXkgPT09ICdudW1iZXInID8gdGltZXIoZGVsYXkpIDogaW5uZXJGcm9tKGRlbGF5KHNvRmFyKSk7XG4gICAgICAgICAgICBjb25zdCBub3RpZmllclN1YnNjcmliZXIgPSBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgKCkgPT4ge1xuICAgICAgICAgICAgICBub3RpZmllclN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgc3Vic2NyaWJlVG9Tb3VyY2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbm90aWZpZXIuc3Vic2NyaWJlKG5vdGlmaWVyU3Vic2NyaWJlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1YnNjcmliZVRvU291cmNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZVRvU291cmNlID0gKCkgPT4ge1xuICAgICAgICAgIGxldCBzeW5jVW5zdWIgPSBmYWxzZTtcbiAgICAgICAgICBzb3VyY2VTdWIgPSBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgICAgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHVuZGVmaW5lZCwgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoKytzb0ZhciA8IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVN1Yikge1xuICAgICAgICAgICAgICAgICAgcmVzdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc3luY1Vuc3ViID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoc3luY1Vuc3ViKSB7XG4gICAgICAgICAgICByZXN1YnNjcmliZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzdWJzY3JpYmVUb1NvdXJjZSgpO1xuICAgICAgfSk7XG59XG4iXX0=
