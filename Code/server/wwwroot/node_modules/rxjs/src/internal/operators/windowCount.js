import{Subject}from"../Subject";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function windowCount(u,e=0){let i=0<e?e:u;return operate((e,o)=>{let b=[new Subject],r,n=0;o.next(b[0].asObservable()),e.subscribe(createOperatorSubscriber(o,e=>{for(var r of b)r.next(e);var t=n-u+1;0<=t&&t%i==0&&b.shift().complete(),++n%i==0&&(t=new Subject,b.push(t),o.next(t.asObservable()))},()=>{for(;0<b.length;)b.shift().complete();o.complete()},e=>{for(;0<b.length;)b.shift().error(e);o.error(e)},()=>{r=null,b=null}))})}export{windowCount};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvd2luZG93Q291bnQudHMiXSwibmFtZXMiOlsiU3ViamVjdCIsIm9wZXJhdGUiLCJjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIiLCJ3aW5kb3dDb3VudCIsIndpbmRvd1NpemUiLCJzdGFydFdpbmRvd0V2ZXJ5Iiwic3RhcnRFdmVyeSIsInNvdXJjZSIsInN1YnNjcmliZXIiLCJsZXQiLCJ3aW5kb3dzIiwic3RhcnRzIiwiY291bnQiLCJuZXh0IiwiYXNPYnNlcnZhYmxlIiwic3Vic2NyaWJlIiwid2luZG93IiwidmFsdWUiLCJjIiwic2hpZnQiLCJjb21wbGV0ZSIsInB1c2giLCJsZW5ndGgiLCJlcnJvciIsImVyciJdLCJtYXBwaW5ncyI6Ik9BQ1NBLE9BQTJCLEtBQVosb0JBRWZDLE9BQTZCLEtBQWQsc0JBQ2ZDLHdCQUFzRCxLQUF0Qix1QkErRG5DLFNBQVVDLFlBQWVDLEVBQW9CQyxFQUEyQixHQUM1RSxJQUFNQyxFQUFnQyxFQUFuQkQsRUFBdUJBLEVBQW1CRCxFQUU3RCxPQUFPSCxRQUFRLENBQUNNLEVBQVFDLEtBQ3RCQyxJQUFJQyxFQUFVLENBQUMsSUFBSVYsU0FDZlcsRUFDQUMsRUFBUSxFQUdaSixFQUFXSyxLQUFLSCxFQUFRLEdBQUdJLGFBQVksQ0FBRSxFQUV6Q1AsRUFBT1EsVUFDTGIseUJBQ0VNLEVBQ0EsSUFJRSxJQUFLLElBQU1RLEtBQVVOLEVBQ25CTSxFQUFPSCxLQUFLSSxDQUFLLEVBT25CLElBQU1DLEVBQUlOLEVBQVFSLEVBQWEsRUFDdEIsR0FBTGMsR0FBVUEsRUFBSVosR0FBZSxHQUMvQkksRUFBUVMsTUFBSyxFQUFJQyxTQUFRLEVBUXZCLEVBQUVSLEVBQVFOLEdBQWUsSUFDckJVLEVBQVMsSUFBSWhCLFFBQ25CVSxFQUFRVyxLQUFLTCxDQUFNLEVBQ25CUixFQUFXSyxLQUFLRyxFQUFPRixhQUFZLENBQUUsRUFFekMsRUFDQSxLQUNFLEtBQXdCLEVBQWpCSixFQUFRWSxRQUNiWixFQUFRUyxNQUFLLEVBQUlDLFNBQVEsRUFFM0JaLEVBQVdZLFNBQVEsQ0FDckIsRUFDQSxJQUNFLEtBQXdCLEVBQWpCVixFQUFRWSxRQUNiWixFQUFRUyxNQUFLLEVBQUlJLE1BQU1DLENBQUcsRUFFNUJoQixFQUFXZSxNQUFNQyxDQUFHLENBQ3RCLEVBQ0EsS0FDRWIsRUFBUyxLQUNURCxFQUFVLElBQ1osQ0FBQyxDQUNGLENBRUwsQ0FBQyxDQUNILFFBN0RnQlAsV0E2RGhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvd2luZG93Q291bnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAnLi4vU3ViamVjdCc7XG5pbXBvcnQgeyBPcGVyYXRvckZ1bmN0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgb3BlcmF0ZSB9IGZyb20gJy4uL3V0aWwvbGlmdCc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5cbi8qKlxuICogQnJhbmNoIG91dCB0aGUgc291cmNlIE9ic2VydmFibGUgdmFsdWVzIGFzIGEgbmVzdGVkIE9ic2VydmFibGUgd2l0aCBlYWNoXG4gKiBuZXN0ZWQgT2JzZXJ2YWJsZSBlbWl0dGluZyBhdCBtb3N0IGB3aW5kb3dTaXplYCB2YWx1ZXMuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgYnVmZmVyQ291bnR9LCBidXQgZW1pdHMgYSBuZXN0ZWRcbiAqIE9ic2VydmFibGUgaW5zdGVhZCBvZiBhbiBhcnJheS48L3NwYW4+XG4gKlxuICogIVtdKHdpbmRvd0NvdW50LnBuZylcbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB3aW5kb3dzIG9mIGl0ZW1zIGl0IGNvbGxlY3RzIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzIHdpbmRvd3MgZXZlcnkgYHN0YXJ0V2luZG93RXZlcnlgXG4gKiBpdGVtcywgZWFjaCBjb250YWluaW5nIG5vIG1vcmUgdGhhbiBgd2luZG93U2l6ZWAgaXRlbXMuIFdoZW4gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZSBjb21wbGV0ZXMgb3IgZW5jb3VudGVycyBhbiBlcnJvciwgdGhlIG91dHB1dCBPYnNlcnZhYmxlIGVtaXRzXG4gKiB0aGUgY3VycmVudCB3aW5kb3cgYW5kIHByb3BhZ2F0ZXMgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBzb3VyY2VcbiAqIE9ic2VydmFibGUuIElmIGBzdGFydFdpbmRvd0V2ZXJ5YCBpcyBub3QgcHJvdmlkZWQsIHRoZW4gbmV3IHdpbmRvd3MgYXJlXG4gKiBzdGFydGVkIGltbWVkaWF0ZWx5IGF0IHRoZSBzdGFydCBvZiB0aGUgc291cmNlIGFuZCB3aGVuIGVhY2ggd2luZG93IGNvbXBsZXRlc1xuICogd2l0aCBzaXplIGB3aW5kb3dTaXplYC5cbiAqXG4gKiAjIyBFeGFtcGxlc1xuICpcbiAqIElnbm9yZSBldmVyeSAzcmQgY2xpY2sgZXZlbnQsIHN0YXJ0aW5nIGZyb20gdGhlIGZpcnN0IG9uZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmcm9tRXZlbnQsIHdpbmRvd0NvdW50LCBtYXAsIHNraXAsIG1lcmdlQWxsIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgY2xpY2tzID0gZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIGNvbnN0IHJlc3VsdCA9IGNsaWNrcy5waXBlKFxuICogICB3aW5kb3dDb3VudCgzKSxcbiAqICAgbWFwKHdpbiA9PiB3aW4ucGlwZShza2lwKDEpKSksIC8vIHNraXAgZmlyc3Qgb2YgZXZlcnkgMyBjbGlja3NcbiAqICAgbWVyZ2VBbGwoKSAgICAgICAgICAgICAgICAgICAgIC8vIGZsYXR0ZW4gdGhlIE9ic2VydmFibGUtb2YtT2JzZXJ2YWJsZXNcbiAqICk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICogYGBgXG4gKlxuICogSWdub3JlIGV2ZXJ5IDNyZCBjbGljayBldmVudCwgc3RhcnRpbmcgZnJvbSB0aGUgdGhpcmQgb25lXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZyb21FdmVudCwgd2luZG93Q291bnQsIG1lcmdlQWxsIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgY2xpY2tzID0gZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIGNvbnN0IHJlc3VsdCA9IGNsaWNrcy5waXBlKFxuICogICB3aW5kb3dDb3VudCgyLCAzKSxcbiAqICAgbWVyZ2VBbGwoKSAvLyBmbGF0dGVuIHRoZSBPYnNlcnZhYmxlLW9mLU9ic2VydmFibGVzXG4gKiApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqIGBgYFxuICpcbiAqIEBzZWUge0BsaW5rIHdpbmRvd31cbiAqIEBzZWUge0BsaW5rIHdpbmRvd1RpbWV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dUb2dnbGV9XG4gKiBAc2VlIHtAbGluayB3aW5kb3dXaGVufVxuICogQHNlZSB7QGxpbmsgYnVmZmVyQ291bnR9XG4gKlxuICogQHBhcmFtIHdpbmRvd1NpemUgVGhlIG1heGltdW0gbnVtYmVyIG9mIHZhbHVlcyBlbWl0dGVkIGJ5IGVhY2ggd2luZG93LlxuICogQHBhcmFtIHN0YXJ0V2luZG93RXZlcnkgSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc3RhcnQgYSBuZXcgd2luZG93LiBGb3IgZXhhbXBsZVxuICogaWYgYHN0YXJ0V2luZG93RXZlcnlgIGlzIGAyYCwgdGhlbiBhIG5ldyB3aW5kb3cgd2lsbCBiZSBzdGFydGVkIG9uIGV2ZXJ5XG4gKiBvdGhlciB2YWx1ZSBmcm9tIHRoZSBzb3VyY2UuIEEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlXG4gKiBzb3VyY2UgYnkgZGVmYXVsdC5cbiAqIEByZXR1cm4gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSBvZiB3aW5kb3dzLCB3aGljaCBpbiB0dXJuIGFyZVxuICogT2JzZXJ2YWJsZSBvZiB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aW5kb3dDb3VudDxUPih3aW5kb3dTaXplOiBudW1iZXIsIHN0YXJ0V2luZG93RXZlcnk6IG51bWJlciA9IDApOiBPcGVyYXRvckZ1bmN0aW9uPFQsIE9ic2VydmFibGU8VD4+IHtcbiAgY29uc3Qgc3RhcnRFdmVyeSA9IHN0YXJ0V2luZG93RXZlcnkgPiAwID8gc3RhcnRXaW5kb3dFdmVyeSA6IHdpbmRvd1NpemU7XG5cbiAgcmV0dXJuIG9wZXJhdGUoKHNvdXJjZSwgc3Vic2NyaWJlcikgPT4ge1xuICAgIGxldCB3aW5kb3dzID0gW25ldyBTdWJqZWN0PFQ+KCldO1xuICAgIGxldCBzdGFydHM6IG51bWJlcltdID0gW107XG4gICAgbGV0IGNvdW50ID0gMDtcblxuICAgIC8vIE9wZW4gdGhlIGZpcnN0IHdpbmRvdy5cbiAgICBzdWJzY3JpYmVyLm5leHQod2luZG93c1swXS5hc09ic2VydmFibGUoKSk7XG5cbiAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyKFxuICAgICAgICBzdWJzY3JpYmVyLFxuICAgICAgICAodmFsdWU6IFQpID0+IHtcbiAgICAgICAgICAvLyBFbWl0IHRoZSB2YWx1ZSB0aHJvdWdoIGFsbCBjdXJyZW50IHdpbmRvd3MuXG4gICAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBjcmVhdGUgYSBuZXcgd2luZG93IHlldCwgd2VcbiAgICAgICAgICAvLyBkbyB0aGF0IGFzIHNvb24gYXMgd2UgY2xvc2Ugb25lLlxuICAgICAgICAgIGZvciAoY29uc3Qgd2luZG93IG9mIHdpbmRvd3MpIHtcbiAgICAgICAgICAgIHdpbmRvdy5uZXh0KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gSGVyZSB3ZSdyZSB1c2luZyB0aGUgc2l6ZSBvZiB0aGUgd2luZG93IGFycmF5IHRvIGZpZ3VyZVxuICAgICAgICAgIC8vIG91dCBpZiB0aGUgb2xkZXN0IHdpbmRvdyBoYXMgZW1pdHRlZCBlbm91Z2ggdmFsdWVzLiBXZSBjYW4gZG8gdGhpc1xuICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNpemUgb2YgdGhlIHdpbmRvdyBhcnJheSBpcyBhIGZ1bmN0aW9uIG9mIHRoZSB2YWx1ZXNcbiAgICAgICAgICAvLyBzZWVuIGJ5IHRoZSBzdWJzY3JpcHRpb24uIElmIGl0J3MgdGltZSB0byBjbG9zZSBpdCwgd2UgY29tcGxldGVcbiAgICAgICAgICAvLyBpdCBhbmQgcmVtb3ZlIGl0LlxuICAgICAgICAgIGNvbnN0IGMgPSBjb3VudCAtIHdpbmRvd1NpemUgKyAxO1xuICAgICAgICAgIGlmIChjID49IDAgJiYgYyAlIHN0YXJ0RXZlcnkgPT09IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKSEuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBMb29rIHRvIHNlZSBpZiB0aGUgbmV4dCBjb3VudCB0ZWxscyB1cyBpdCdzIHRpbWUgdG8gb3BlbiBhIG5ldyB3aW5kb3cuXG4gICAgICAgICAgLy8gVE9ETzogV2UgbmVlZCB0byBmaWd1cmUgb3V0IGlmIHRoaXMgcmVhbGx5IG1ha2VzIHNlbnNlLiBXZSdyZSB0ZWNobmljYWxseVxuICAgICAgICAgIC8vIGVtaXR0aW5nIHdpbmRvd3MgKmJlZm9yZSogd2UgaGF2ZSBhIHZhbHVlIHRvIGVtaXQgdGhlbSBmb3IuIEl0J3MgcHJvYmFibHlcbiAgICAgICAgICAvLyBtb3JlIGV4cGVjdGVkIHRoYXQgd2Ugc2hvdWxkIGJlIGVtaXR0aW5nIHRoZSB3aW5kb3cgd2hlbiB0aGUgc3RhcnRcbiAgICAgICAgICAvLyBjb3VudCBpcyByZWFjaGVkIC0tIG5vdCBiZWZvcmUuXG4gICAgICAgICAgaWYgKCsrY291bnQgJSBzdGFydEV2ZXJ5ID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCB3aW5kb3cgPSBuZXcgU3ViamVjdDxUPigpO1xuICAgICAgICAgICAgd2luZG93cy5wdXNoKHdpbmRvdyk7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQod2luZG93LmFzT2JzZXJ2YWJsZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB3aGlsZSAod2luZG93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB3aW5kb3dzLnNoaWZ0KCkhLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgIHdoaWxlICh3aW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvd3Muc2hpZnQoKSEuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgc3RhcnRzID0gbnVsbCE7XG4gICAgICAgICAgd2luZG93cyA9IG51bGwhO1xuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfSk7XG59XG4iXX0=
