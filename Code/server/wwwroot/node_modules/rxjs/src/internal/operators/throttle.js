import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function throttle(s,m){return operate((r,e)=>{let{leading:t=!0,trailing:o=!1}=m??{},l=!1,i=null,n=null,b=!1,c=()=>{n?.unsubscribe(),n=null,o&&(p(),b)&&e.complete()},u=()=>{n=null,b&&e.complete()},a=r=>n=innerFrom(s(r)).subscribe(createOperatorSubscriber(e,c,u)),p=()=>{var r;l&&(l=!1,r=i,i=null,e.next(r),b||a(r))};r.subscribe(createOperatorSubscriber(e,r=>{l=!0,i=r,n&&!n.closed||(t?p():a(r))},()=>{b=!0,o&&l&&n&&!n.closed||e.complete()}))})}export{throttle};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvdGhyb3R0bGUudHMiXSwibmFtZXMiOlsib3BlcmF0ZSIsImNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciIsImlubmVyRnJvbSIsInRocm90dGxlIiwiZHVyYXRpb25TZWxlY3RvciIsImNvbmZpZyIsInNvdXJjZSIsInN1YnNjcmliZXIiLCJsZWFkaW5nIiwidHJhaWxpbmciLCJoYXNWYWx1ZSIsInNlbmRWYWx1ZSIsInRocm90dGxlZCIsImlzQ29tcGxldGUiLCJlbmRUaHJvdHRsaW5nIiwidW5zdWJzY3JpYmUiLCJzZW5kIiwiY29tcGxldGUiLCJjbGVhbnVwVGhyb3R0bGluZyIsInN0YXJ0VGhyb3R0bGUiLCJ2YWx1ZSIsInN1YnNjcmliZSIsIm5leHQiLCJjbG9zZWQiXSwibWFwcGluZ3MiOiJPQUdTQSxPQUE2QixLQUFkLHNCQUNmQyx3QkFBc0QsS0FBdEIsOEJBQ2hDQyxTQUEwQyxLQUF6QiwwQkE4RXBCLFNBQVVDLFNBQVlDLEVBQXNEQyxHQUNoRixPQUFPTCxRQUFRLENBQUNNLEVBQVFDLEtBQ3RCLEdBQU0sQ0FBRUMsUUFBQUEsRUFBVSxDQUFBLEVBQU1DLFNBQUFBLEVBQVcsQ0FBQSxDQUFLLEVBQUtKLEdBQVUsR0FDbkRLLEVBQVcsQ0FBQSxFQUNYQyxFQUFzQixLQUN0QkMsRUFBaUMsS0FDakNDLEVBQWEsQ0FBQSxFQUVYQyxFQUFnQixLQUNwQkYsR0FBV0csWUFBVyxFQUN0QkgsRUFBWSxLQUNSSCxJQUNGTyxFQUFJLEVBQ0pILElBQWNOLEVBQVdVLFNBQVEsQ0FFckMsRUFFTUMsRUFBb0IsS0FDeEJOLEVBQVksS0FDWkMsR0FBY04sRUFBV1UsU0FBUSxDQUNuQyxFQUVNRSxFQUFnQixHQUNuQlAsRUFBWVYsVUFBVUUsRUFBaUJnQixDQUFLLENBQUMsRUFBRUMsVUFBVXBCLHlCQUF5Qk0sRUFBWU8sRUFBZUksQ0FBaUIsQ0FBQyxFQUU1SEYsRUFBTyxLQUNYLElBS1FJLEVBTEpWLElBSUZBLEVBQVcsQ0FBQSxFQUNMVSxFQUFRVCxFQUNkQSxFQUFZLEtBRVpKLEVBQVdlLEtBQUtGLENBQUssRUFDcEJQLEdBQWNNLEVBQWNDLENBQUssRUFFdEMsRUFFQWQsRUFBT2UsVUFDTHBCLHlCQUNFTSxFQU1BLElBQ0VHLEVBQVcsQ0FBQSxFQUNYQyxFQUFZUyxFQUNWUixHQUFjQSxDQUFBQSxFQUFVVyxTQUFZZixFQUFVUSxFQUFJLEVBQUtHLEVBQWNDLENBQUssRUFDOUUsRUFDQSxLQUNFUCxFQUFhLENBQUEsRUFDWEosR0FBWUMsR0FBWUUsR0FBY0EsQ0FBQUEsRUFBVVcsUUFBV2hCLEVBQVdVLFNBQVEsQ0FDbEYsQ0FBQyxDQUNGLENBRUwsQ0FBQyxDQUNILFFBM0RnQmQsUUEyRGhCIiwiZmlsZSI6Im5vZGVfbW9kdWxlcy9yeGpzL3NyYy9pbnRlcm5hbC9vcGVyYXRvcnMvdGhyb3R0bGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuXG5pbXBvcnQgeyBNb25vVHlwZU9wZXJhdG9yRnVuY3Rpb24sIE9ic2VydmFibGVJbnB1dCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuXG4vKipcbiAqIEFuIG9iamVjdCBpbnRlcmZhY2UgdXNlZCBieSB7QGxpbmsgdGhyb3R0bGV9IG9yIHtAbGluayB0aHJvdHRsZVRpbWV9IHRoYXQgZW5zdXJlXG4gKiBjb25maWd1cmF0aW9uIG9wdGlvbnMgb2YgdGhlc2Ugb3BlcmF0b3JzLlxuICpcbiAqIEBzZWUge0BsaW5rIHRocm90dGxlfVxuICogQHNlZSB7QGxpbmsgdGhyb3R0bGVUaW1lfVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRocm90dGxlQ29uZmlnIHtcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlIHdpbGwgZW1pdCB0aGUgZmlyc3QgdmFsdWUgZnJvbSB0aGUgc291cmNlXG4gICAqIE9ic2VydmFibGUgYXQgdGhlICoqc3RhcnQqKiBvZiB0aGUgXCJ0aHJvdHRsaW5nXCIgcHJvY2VzcyAod2hlbiBzdGFydGluZyBhblxuICAgKiBpbnRlcm5hbCB0aW1lciB0aGF0IHByZXZlbnRzIG90aGVyIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UgdG8gcGFzcyB0aHJvdWdoKS5cbiAgICogSWYgYGZhbHNlYCwgaXQgd2lsbCBub3QgZW1pdCB0aGUgZmlyc3QgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYXQgdGhlXG4gICAqIHN0YXJ0IG9mIHRoZSBcInRocm90dGxpbmdcIiBwcm9jZXNzLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvOiBgdHJ1ZWAuXG4gICAqL1xuICBsZWFkaW5nPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIHJlc3VsdGluZyBPYnNlcnZhYmxlIHdpbGwgZW1pdCB0aGUgbGFzdCB2YWx1ZSBmcm9tIHRoZSBzb3VyY2VcbiAgICogT2JzZXJ2YWJsZSBhdCB0aGUgKiplbmQqKiBvZiB0aGUgXCJ0aHJvdHRsaW5nXCIgcHJvY2VzcyAod2hlbiBlbmRpbmcgYW4gaW50ZXJuYWxcbiAgICogdGltZXIgdGhhdCBwcmV2ZW50cyBvdGhlciBlbWlzc2lvbnMgZnJvbSB0aGUgc291cmNlIHRvIHBhc3MgdGhyb3VnaCkuXG4gICAqIElmIGBmYWxzZWAsIGl0IHdpbGwgbm90IGVtaXQgdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgYXQgdGhlXG4gICAqIGVuZCBvZiB0aGUgXCJ0aHJvdHRsaW5nXCIgcHJvY2Vzcy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0bzogYGZhbHNlYC5cbiAgICovXG4gIHRyYWlsaW5nPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBFbWl0cyBhIHZhbHVlIGZyb20gdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB0aGVuIGlnbm9yZXMgc3Vic2VxdWVudCBzb3VyY2VcbiAqIHZhbHVlcyBmb3IgYSBkdXJhdGlvbiBkZXRlcm1pbmVkIGJ5IGFub3RoZXIgT2JzZXJ2YWJsZSwgdGhlbiByZXBlYXRzIHRoaXNcbiAqIHByb2Nlc3MuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkl0J3MgbGlrZSB7QGxpbmsgdGhyb3R0bGVUaW1lfSwgYnV0IHRoZSBzaWxlbmNpbmdcbiAqIGR1cmF0aW9uIGlzIGRldGVybWluZWQgYnkgYSBzZWNvbmQgT2JzZXJ2YWJsZS48L3NwYW4+XG4gKlxuICogIVtdKHRocm90dGxlLnN2ZylcbiAqXG4gKiBgdGhyb3R0bGVgIGVtaXRzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSB2YWx1ZXMgb24gdGhlIG91dHB1dCBPYnNlcnZhYmxlXG4gKiB3aGVuIGl0cyBpbnRlcm5hbCB0aW1lciBpcyBkaXNhYmxlZCwgYW5kIGlnbm9yZXMgc291cmNlIHZhbHVlcyB3aGVuIHRoZSB0aW1lclxuICogaXMgZW5hYmxlZC4gSW5pdGlhbGx5LCB0aGUgdGltZXIgaXMgZGlzYWJsZWQuIEFzIHNvb24gYXMgdGhlIGZpcnN0IHNvdXJjZVxuICogdmFsdWUgYXJyaXZlcywgaXQgaXMgZm9yd2FyZGVkIHRvIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZSwgYW5kIHRoZW4gdGhlIHRpbWVyXG4gKiBpcyBlbmFibGVkIGJ5IGNhbGxpbmcgdGhlIGBkdXJhdGlvblNlbGVjdG9yYCBmdW5jdGlvbiB3aXRoIHRoZSBzb3VyY2UgdmFsdWUsXG4gKiB3aGljaCByZXR1cm5zIHRoZSBcImR1cmF0aW9uXCIgT2JzZXJ2YWJsZS4gV2hlbiB0aGUgZHVyYXRpb24gT2JzZXJ2YWJsZSBlbWl0cyBhXG4gKiB2YWx1ZSwgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCBhbmQgdGhpcyBwcm9jZXNzIHJlcGVhdHMgZm9yIHRoZVxuICogbmV4dCBzb3VyY2UgdmFsdWUuXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIEVtaXQgY2xpY2tzIGF0IGEgcmF0ZSBvZiBhdCBtb3N0IG9uZSBjbGljayBwZXIgc2Vjb25kXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZyb21FdmVudCwgdGhyb3R0bGUsIGludGVydmFsIH0gZnJvbSAncnhqcyc7XG4gKlxuICogY29uc3QgY2xpY2tzID0gZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIGNvbnN0IHJlc3VsdCA9IGNsaWNrcy5waXBlKHRocm90dGxlKCgpID0+IGludGVydmFsKDEwMDApKSk7XG4gKlxuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqIGBgYFxuICpcbiAqIEBzZWUge0BsaW5rIGF1ZGl0fVxuICogQHNlZSB7QGxpbmsgZGVib3VuY2V9XG4gKiBAc2VlIHtAbGluayBkZWxheVdoZW59XG4gKiBAc2VlIHtAbGluayBzYW1wbGV9XG4gKiBAc2VlIHtAbGluayB0aHJvdHRsZVRpbWV9XG4gKlxuICogQHBhcmFtIGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdmFsdWUgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBmb3IgY29tcHV0aW5nIHRoZSBzaWxlbmNpbmcgZHVyYXRpb24gZm9yIGVhY2ggc291cmNlIHZhbHVlLFxuICogcmV0dXJuZWQgYXMgYW4gYE9ic2VydmFibGVJbnB1dGAuXG4gKiBAcGFyYW0gY29uZmlnIEEgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gZGVmaW5lIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYFxuICogYmVoYXZpb3IuIERlZmF1bHRzIHRvIGB7IGxlYWRpbmc6IHRydWUsIHRyYWlsaW5nOiBmYWxzZSB9YC5cbiAqIEByZXR1cm4gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IHBlcmZvcm1zIHRoZSB0aHJvdHRsZVxuICogb3BlcmF0aW9uIHRvIGxpbWl0IHRoZSByYXRlIG9mIGVtaXNzaW9ucyBmcm9tIHRoZSBzb3VyY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZTxUPihkdXJhdGlvblNlbGVjdG9yOiAodmFsdWU6IFQpID0+IE9ic2VydmFibGVJbnB1dDxhbnk+LCBjb25maWc/OiBUaHJvdHRsZUNvbmZpZyk6IE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbjxUPiB7XG4gIHJldHVybiBvcGVyYXRlKChzb3VyY2UsIHN1YnNjcmliZXIpID0+IHtcbiAgICBjb25zdCB7IGxlYWRpbmcgPSB0cnVlLCB0cmFpbGluZyA9IGZhbHNlIH0gPSBjb25maWcgPz8ge307XG4gICAgbGV0IGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgbGV0IHNlbmRWYWx1ZTogVCB8IG51bGwgPSBudWxsO1xuICAgIGxldCB0aHJvdHRsZWQ6IFN1YnNjcmlwdGlvbiB8IG51bGwgPSBudWxsO1xuICAgIGxldCBpc0NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICBjb25zdCBlbmRUaHJvdHRsaW5nID0gKCkgPT4ge1xuICAgICAgdGhyb3R0bGVkPy51bnN1YnNjcmliZSgpO1xuICAgICAgdGhyb3R0bGVkID0gbnVsbDtcbiAgICAgIGlmICh0cmFpbGluZykge1xuICAgICAgICBzZW5kKCk7XG4gICAgICAgIGlzQ29tcGxldGUgJiYgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBjbGVhbnVwVGhyb3R0bGluZyA9ICgpID0+IHtcbiAgICAgIHRocm90dGxlZCA9IG51bGw7XG4gICAgICBpc0NvbXBsZXRlICYmIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc3RhcnRUaHJvdHRsZSA9ICh2YWx1ZTogVCkgPT5cbiAgICAgICh0aHJvdHRsZWQgPSBpbm5lckZyb20oZHVyYXRpb25TZWxlY3Rvcih2YWx1ZSkpLnN1YnNjcmliZShjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgZW5kVGhyb3R0bGluZywgY2xlYW51cFRocm90dGxpbmcpKSk7XG5cbiAgICBjb25zdCBzZW5kID0gKCkgPT4ge1xuICAgICAgaWYgKGhhc1ZhbHVlKSB7XG4gICAgICAgIC8vIEVuc3VyZSB3ZSBjbGVhciBvdXQgb3VyIHZhbHVlIGFuZCBoYXNWYWx1ZSBmbGFnXG4gICAgICAgIC8vIGJlZm9yZSB3ZSBlbWl0LCBvdGhlcndpc2UgcmVlbnRyYW50IGNvZGUgY2FuIGNhdXNlXG4gICAgICAgIC8vIGlzc3VlcyBoZXJlLlxuICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHNlbmRWYWx1ZSE7XG4gICAgICAgIHNlbmRWYWx1ZSA9IG51bGw7XG4gICAgICAgIC8vIEVtaXQgdGhlIHZhbHVlLlxuICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAhaXNDb21wbGV0ZSAmJiBzdGFydFRocm90dGxlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc291cmNlLnN1YnNjcmliZShcbiAgICAgIGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihcbiAgICAgICAgc3Vic2NyaWJlcixcbiAgICAgICAgLy8gUmVnYXJkaW5nIHRoZSBwcmVzZW5jZSBvZiB0aHJvdHRsZWQuY2xvc2VkIGluIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgLy8gY29uZGl0aW9ucywgaWYgYSBzeW5jaHJvbm91cyBkdXJhdGlvbiBzZWxlY3RvciBpcyBzcGVjaWZpZWQgLSB3ZWlyZCxcbiAgICAgICAgLy8gYnV0IGxlZ2FsIC0gYW4gYWxyZWFkeS1jbG9zZWQgc3Vic2NyaXB0aW9uIHdpbGwgYmUgYXNzaWduZWQgdG9cbiAgICAgICAgLy8gdGhyb3R0bGVkLCBzbyB0aGUgc3Vic2NyaXB0aW9uJ3MgY2xvc2VkIHByb3BlcnR5IG5lZWRzIHRvIGJlIGNoZWNrZWQsXG4gICAgICAgIC8vIHRvby5cbiAgICAgICAgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgIHNlbmRWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICEodGhyb3R0bGVkICYmICF0aHJvdHRsZWQuY2xvc2VkKSAmJiAobGVhZGluZyA/IHNlbmQoKSA6IHN0YXJ0VGhyb3R0bGUodmFsdWUpKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGlzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICEodHJhaWxpbmcgJiYgaGFzVmFsdWUgJiYgdGhyb3R0bGVkICYmICF0aHJvdHRsZWQuY2xvc2VkKSAmJiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9KTtcbn1cbiJdfQ==
