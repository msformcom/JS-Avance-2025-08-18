import{EMPTY}from"../observable/empty";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";import{timer}from"../observable/timer";function repeat(e){let l=1/0,p;return null!=e&&("object"==typeof e?{count:l=1/0,delay:p}=e:l=e),l<=0?()=>EMPTY:operate((r,t)=>{let o=0,b,i=()=>{if(null!=b&&b.unsubscribe(),(b=null)!=p){var r="number"==typeof p?timer(p):innerFrom(p(o));let e=createOperatorSubscriber(t,()=>{e.unsubscribe(),m()});r.subscribe(e)}else m()},m=()=>{let e=!1;b=r.subscribe(createOperatorSubscriber(t,void 0,()=>{++o<l?b?i():e=!0:t.complete()})),e&&i()};m()})}export{repeat};