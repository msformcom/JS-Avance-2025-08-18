import{Subscription}from"../Subscription";import{operate}from"../util/lift";import{innerFrom}from"../observable/innerFrom";import{createOperatorSubscriber}from"./OperatorSubscriber";import{noop}from"../util/noop";import{arrRemove}from"../util/arrRemove";function bufferToggle(e,b){return operate((r,t)=>{let i=[];innerFrom(e).subscribe(createOperatorSubscriber(t,r=>{let e=[],o=(i.push(e),new Subscription);o.add(innerFrom(b(r)).subscribe(createOperatorSubscriber(t,()=>{arrRemove(i,e),t.next(e),o.unsubscribe()},noop)))},noop)),r.subscribe(createOperatorSubscriber(t,r=>{for(var e of i)e.push(r)},()=>{for(;0<i.length;)t.next(i.shift());t.complete()}))})}export{bufferToggle};