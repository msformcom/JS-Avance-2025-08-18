import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function throttle(s,m){return operate((r,e)=>{let{leading:t=!0,trailing:l=!1}=null!=m?m:{},o=!1,n=null,i=null,u=!1,b=()=>{null!=i&&i.unsubscribe(),i=null,l&&(p(),u)&&e.complete()},c=()=>{i=null,u&&e.complete()},a=r=>i=innerFrom(s(r)).subscribe(createOperatorSubscriber(e,b,c)),p=()=>{var r;o&&(o=!1,r=n,n=null,e.next(r),u||a(r))};r.subscribe(createOperatorSubscriber(e,r=>{o=!0,n=r,i&&!i.closed||(t?p():a(r))},()=>{u=!0,l&&o&&i&&!i.closed||e.complete()}))})}export{throttle};