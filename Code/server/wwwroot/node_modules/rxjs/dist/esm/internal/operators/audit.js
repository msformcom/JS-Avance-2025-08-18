import{operate}from"../util/lift";import{innerFrom}from"../observable/innerFrom";import{createOperatorSubscriber}from"./OperatorSubscriber";function audit(b){return operate((r,e)=>{let t=!1,o=null,l=null,u=!1,i=()=>{var r;null!=l&&l.unsubscribe(),l=null,t&&(t=!1,r=o,o=null,e.next(r)),u&&e.complete()},n=()=>{l=null,u&&e.complete()};r.subscribe(createOperatorSubscriber(e,r=>{t=!0,o=r,l||innerFrom(b(r)).subscribe(l=createOperatorSubscriber(e,i,n))},()=>{u=!0,t&&l&&!l.closed||e.complete()}))})}export{audit};