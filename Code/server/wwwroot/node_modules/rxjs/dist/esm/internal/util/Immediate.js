let nextHandle=1,resolved,activeHandles={};function findAndClearHandle(e){return e in activeHandles&&(delete activeHandles[e],!0)}let Immediate={setImmediate(e){let n=nextHandle++;return activeHandles[n]=!0,(resolved=resolved||Promise.resolve()).then(()=>findAndClearHandle(n)&&e()),n},clearImmediate(e){findAndClearHandle(e)}},TestTools={pending(){return Object.keys(activeHandles).length}};export{Immediate,TestTools};