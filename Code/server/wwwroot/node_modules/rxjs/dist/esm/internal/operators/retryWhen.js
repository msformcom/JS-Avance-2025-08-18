import{innerFrom}from"../observable/innerFrom";import{Subject}from"../Subject";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function retryWhen(n){return operate((r,e)=>{let t,o=!1,b,i=()=>{t=r.subscribe(createOperatorSubscriber(e,void 0,void 0,r=>{b||(b=new Subject,innerFrom(n(b)).subscribe(createOperatorSubscriber(e,()=>t?i():o=!0))),b&&b.next(r)})),o&&(t.unsubscribe(),t=null,o=!1,i())};i()})}export{retryWhen};