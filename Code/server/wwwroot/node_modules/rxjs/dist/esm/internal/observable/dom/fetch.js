import{__rest}from"tslib";import{createOperatorSubscriber}from"../../operators/OperatorSubscriber";import{Observable}from"../../Observable";import{innerFrom}from"../../observable/innerFrom";function fromFetch(n,e={}){let i=e.selector,l=__rest(e,["selector"]);return new Observable(r=>{let t=new AbortController,o=t.signal,b=!0,a=l.signal;if(a)if(a.aborted)t.abort();else{let e=()=>{o.aborted||t.abort()};a.addEventListener("abort",e),r.add(()=>a.removeEventListener("abort",e))}var e=Object.assign(Object.assign({},l),{signal:o});let s=e=>{b=!1,r.error(e)};return fetch(n,e).then(e=>{i?innerFrom(i(e)).subscribe(createOperatorSubscriber(r,void 0,()=>{b=!1,r.complete()},s)):(b=!1,r.next(e),r.complete())}).catch(s),()=>{b&&t.abort()}})}export{fromFetch};