import{Subject}from"../Subject";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function windowWhen(i){return operate((r,e)=>{let t,o,b=r=>{t.error(r),e.error(r)},n=()=>{null!=o&&o.unsubscribe(),null!=t&&t.complete(),t=new Subject,e.next(t.asObservable());let r;try{r=innerFrom(i())}catch(r){return void b(r)}r.subscribe(o=createOperatorSubscriber(e,n,n,b))};n(),r.subscribe(createOperatorSubscriber(e,r=>t.next(r),()=>{t.complete(),e.complete()},b,()=>{null!=o&&o.unsubscribe(),t=null}))})}export{windowWhen};