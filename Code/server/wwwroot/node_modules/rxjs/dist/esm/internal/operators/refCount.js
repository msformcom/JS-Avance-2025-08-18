import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function refCount(){return operate((o,t)=>{let u=null;o._refCount++;var r=createOperatorSubscriber(t,void 0,void 0,void 0,()=>{var r,e;!o||o._refCount<=0||0<--o._refCount?u=null:(r=o._connection,e=u,u=null,!r||e&&r!==e||r.unsubscribe(),t.unsubscribe())});o.subscribe(r),r.closed||(u=o.connect())})}export{refCount};