import{innerFrom}from"../observable/innerFrom";import{executeSchedule}from"../util/executeSchedule";import{createOperatorSubscriber}from"./OperatorSubscriber";function mergeInternals(e,t,o,c,n,u,i,r){let l=[],b=0,s=0,m=!1,a=()=>{!m||l.length||b||t.complete()},p=e=>b<c?h(e):l.push(e),h=e=>{u&&t.next(e),b++;let r=!1;innerFrom(o(e,s++)).subscribe(createOperatorSubscriber(t,e=>{null!=n&&n(e),u?p(e):t.next(e)},()=>{r=!0},void 0,()=>{if(r)try{for(b--;l.length&&b<c;){let e=l.shift();i?executeSchedule(t,i,()=>h(e)):h(e)}a()}catch(e){t.error(e)}}))};return e.subscribe(createOperatorSubscriber(t,p,()=>{m=!0,a()})),()=>{null!=r&&r()}}export{mergeInternals};