import{operate}from"../util/lift";import{noop}from"../util/noop";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function bufferWhen(i){return operate((r,e)=>{let o=null,t=null,n=()=>{null!=t&&t.unsubscribe();var r=o;o=[],r&&e.next(r),innerFrom(i()).subscribe(t=createOperatorSubscriber(e,n,noop))};n(),r.subscribe(createOperatorSubscriber(e,r=>null==o?void 0:o.push(r),()=>{o&&e.next(o),e.complete()},void 0,()=>o=t=null))})}export{bufferWhen};