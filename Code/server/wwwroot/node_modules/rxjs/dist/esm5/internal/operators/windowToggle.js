import{__values}from"tslib";import{Subject}from"../Subject";import{Subscription}from"../Subscription";import{operate}from"../util/lift";import{innerFrom}from"../observable/innerFrom";import{createOperatorSubscriber}from"./OperatorSubscriber";import{noop}from"../util/noop";import{arrRemove}from"../util/arrRemove";function windowToggle(e,u){return operate(function(r,i){function n(r){for(;0<c.length;)c.shift().error(r);i.error(r)}var c=[];innerFrom(e).subscribe(createOperatorSubscriber(i,function(r){var e,o=new Subject,t=(c.push(o),new Subscription);try{e=innerFrom(u(r))}catch(r){return void n(r)}i.next(o.asObservable()),t.add(e.subscribe(createOperatorSubscriber(i,function(){arrRemove(c,o),o.complete(),t.unsubscribe()},noop,n)))},noop)),r.subscribe(createOperatorSubscriber(i,function(r){var e,o,t=c.slice();try{for(var i=__values(t),n=i.next();!n.done;n=i.next())n.value.next(r)}catch(r){e={error:r}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}},function(){for(;0<c.length;)c.shift().complete();i.complete()},n,function(){for(;0<c.length;)c.shift().unsubscribe()}))})}export{windowToggle};