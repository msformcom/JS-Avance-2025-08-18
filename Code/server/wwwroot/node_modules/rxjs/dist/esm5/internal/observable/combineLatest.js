import{Observable}from"../Observable";import{argsArgArrayOrObject}from"../util/argsArgArrayOrObject";import{from}from"./from";import{identity}from"../util/identity";import{mapOneOrManyArgs}from"../util/mapOneOrManyArgs";import{popResultSelector,popScheduler}from"../util/args";import{createObject}from"../util/createObject";import{createOperatorSubscriber}from"../operators/OperatorSubscriber";import{executeSchedule}from"../util/executeSchedule";function combineLatest(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=popScheduler(e),o=popResultSelector(e),i=argsArgArrayOrObject(e),n=i.args,c=i.keys;return 0===n.length?from([],t):(i=new Observable(combineLatestInit(n,t,c?function(e){return createObject(c,e)}:identity)),o?i.pipe(mapOneOrManyArgs(o)):i)}function combineLatestInit(a,u,m){return void 0===m&&(m=identity),function(c){maybeSchedule(u,function(){for(var e=a.length,o=new Array(e),i=e,n=e,r=0;r<e;r++)(t=>{maybeSchedule(u,function(){var e=from(a[t],u),r=!1;e.subscribe(createOperatorSubscriber(c,function(e){o[t]=e,r||(r=!0,n--),n||c.next(m(o.slice()))},function(){--i||c.complete()}))},c)})(r)},c)}}function maybeSchedule(e,r,t){e?executeSchedule(t,e,r):r()}export{combineLatest,combineLatestInit};