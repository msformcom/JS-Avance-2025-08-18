import{__asyncValues,__awaiter,__generator,__values}from"tslib";import{isArrayLike}from"../util/isArrayLike";import{isPromise}from"../util/isPromise";import{Observable}from"../Observable";import{isInteropObservable}from"../util/isInteropObservable";import{isAsyncIterable}from"../util/isAsyncIterable";import{createInvalidObservableTypeError}from"../util/throwUnobservableError";import{isIterable}from"../util/isIterable";import{isReadableStreamLike,readableStreamLikeToAsyncGenerator}from"../util/isReadableStreamLike";import{isFunction}from"../util/isFunction";import{reportUnhandledError}from"../util/reportUnhandledError";import{observable as Symbol_observable}from"../symbol/observable";function innerFrom(r){if(r instanceof Observable)return r;if(null!=r){if(isInteropObservable(r))return fromInteropObservable(r);if(isArrayLike(r))return fromArrayLike(r);if(isPromise(r))return fromPromise(r);if(isAsyncIterable(r))return fromAsyncIterable(r);if(isIterable(r))return fromIterable(r);if(isReadableStreamLike(r))return fromReadableStreamLike(r)}throw createInvalidObservableTypeError(r)}function fromInteropObservable(t){return new Observable(function(r){var e=t[Symbol_observable]();if(isFunction(e.subscribe))return e.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(t){return new Observable(function(r){for(var e=0;e<t.length&&!r.closed;e++)r.next(t[e]);r.complete()})}function fromPromise(r){return new Observable(function(e){r.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,reportUnhandledError)})}function fromIterable(i){return new Observable(function(r){var e,t;try{for(var o=__values(i),n=o.next();!n.done;n=o.next()){var a=n.value;if(r.next(a),r.closed)return}}catch(r){e={error:r}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r.complete()})}function fromAsyncIterable(r){return new Observable(function(e){process(r,e).catch(function(r){return e.error(r)})})}function fromReadableStreamLike(r){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(r))}function process(t,o){var n,a,i,s;return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(r){switch(r.label){case 0:r.trys.push([0,5,6,11]),n=__asyncValues(t),r.label=1;case 1:return[4,n.next()];case 2:if((a=r.sent()).done)return[3,4];if(e=a.value,o.next(e),o.closed)return[2];r.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return e=r.sent(),i={error:e},[3,11];case 6:return(r.trys.push([6,,9,10]),a&&!a.done&&(s=n.return))?[4,s.call(n)]:[3,8];case 7:r.sent(),r.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return o.complete(),[2]}})})}export{innerFrom,fromInteropObservable,fromArrayLike,fromPromise,fromIterable,fromAsyncIterable,fromReadableStreamLike};