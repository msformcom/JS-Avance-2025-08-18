import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function refCount(){return operate(function(o,t){var n=null,r=(o._refCount++,createOperatorSubscriber(t,void 0,void 0,void 0,function(){var r,e;!o||o._refCount<=0||0<--o._refCount?n=null:(r=o._connection,e=n,n=null,!r||e&&r!==e||r.unsubscribe(),t.unsubscribe())}));o.subscribe(r),r.closed||(n=o.connect())})}export{refCount};