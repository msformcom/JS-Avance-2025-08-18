import{__read,__spreadArray}from"tslib";import{Observable}from"../Observable";import{innerFrom}from"./innerFrom";import{argsOrArgArray}from"../util/argsOrArgArray";import{EMPTY}from"./empty";import{createOperatorSubscriber}from"../operators/OperatorSubscriber";import{popResultSelector}from"../util/args";function zip(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i=popResultSelector(r),a=argsOrArgArray(r);return a.length?new Observable(function(t){for(var n=a.map(function(){return[]}),o=a.map(function(){return!1}),r=(t.add(function(){n=o=null}),0);!t.closed&&r<a.length;r++)(e=>{innerFrom(a[e]).subscribe(createOperatorSubscriber(t,function(r){n[e].push(r),n.every(function(r){return r.length})&&(r=n.map(function(r){return r.shift()}),t.next(i?i.apply(void 0,__spreadArray([],__read(r))):r),n.some(function(r,e){return!r.length&&o[e]}))&&t.complete()},function(){o[e]=!0,n[e].length||t.complete()}))})(r);return function(){n=o=null}}):EMPTY}export{zip};