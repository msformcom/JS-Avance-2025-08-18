import{__assign,__rest}from"tslib";import{createOperatorSubscriber}from"../../operators/OperatorSubscriber";import{Observable}from"../../Observable";import{innerFrom}from"../../observable/innerFrom";function fromFetch(b,r){var c=(r=void 0===r?{}:r).selector,m=__rest(r,["selector"]);return new Observable(function(e){function t(r){i=!1,e.error(r)}var r,o=new AbortController,n=o.signal,i=!0,a=m.signal,s=(a&&(a.aborted?o.abort():(a.addEventListener("abort",r=function(){n.aborted||o.abort()}),e.add(function(){return a.removeEventListener("abort",r)}))),__assign(__assign({},m),{signal:n}));return fetch(b,s).then(function(r){c?innerFrom(c(r)).subscribe(createOperatorSubscriber(e,void 0,function(){i=!1,e.complete()},t)):(i=!1,e.next(r),e.complete())}).catch(t),function(){i&&o.abort()}})}export{fromFetch};