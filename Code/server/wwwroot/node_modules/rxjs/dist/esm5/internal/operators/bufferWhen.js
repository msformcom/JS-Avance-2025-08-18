import{operate}from"../util/lift";import{noop}from"../util/noop";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function bufferWhen(u){return operate(function(r,e){var n=null,o=null,t=function(){null!=o&&o.unsubscribe();var r=n;n=[],r&&e.next(r),innerFrom(u()).subscribe(o=createOperatorSubscriber(e,t,noop))};t(),r.subscribe(createOperatorSubscriber(e,function(r){return null==n?void 0:n.push(r)},function(){n&&e.next(n),e.complete()},void 0,function(){return n=o=null}))})}export{bufferWhen};