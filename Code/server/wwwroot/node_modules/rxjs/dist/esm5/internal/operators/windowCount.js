import{__values}from"tslib";import{Subject}from"../Subject";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function windowCount(c,r){var l=0<(r=void 0===r?0:r)?r:c;return operate(function(r,i){var u=[new Subject],a=0;i.next(u[0].asObservable()),r.subscribe(createOperatorSubscriber(i,function(r){try{for(var e=__values(u),t=e.next();!t.done;t=e.next())t.value.next(r)}catch(r){o={error:r}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(o)throw o.error}}var o,n=a-c+1;0<=n&&n%l==0&&u.shift().complete(),++a%l==0&&(o=new Subject,u.push(o),i.next(o.asObservable()))},function(){for(;0<u.length;)u.shift().complete();i.complete()},function(r){for(;0<u.length;)u.shift().error(r);i.error(r)},function(){u=null}))})}export{windowCount};