import{innerFrom}from"../observable/innerFrom";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function switchMap(b,a){return operate(function(r,o){function i(){e&&!u&&o.complete()}var u=null,c=0,e=!1;r.subscribe(createOperatorSubscriber(o,function(e){null!=u&&u.unsubscribe();var t=0,n=c++;innerFrom(b(e,n)).subscribe(u=createOperatorSubscriber(o,function(r){return o.next(a?a(e,r,n,t++):r)},function(){u=null,i()}))},function(){e=!0,i()}))})}export{switchMap};