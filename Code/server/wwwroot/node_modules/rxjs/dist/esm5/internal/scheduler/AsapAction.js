import{__extends}from"tslib";import{AsyncAction}from"./AsyncAction";import{immediateProvider}from"./immediateProvider";var AsapAction=(r=>{function e(e,t){var i=r.call(this,e,t)||this;return i.scheduler=e,i.work=t,i}return __extends(e,r),e.prototype.requestAsyncId=function(e,t,i){return null!==(i=void 0===i?0:i)&&0<i?r.prototype.requestAsyncId.call(this,e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=immediateProvider.setImmediate(e.flush.bind(e,void 0))))},e.prototype.recycleAsyncId=function(e,t,i){if(null!=(i=void 0===i?0:i)?0<i:0<this.delay)return r.prototype.recycleAsyncId.call(this,e,t,i);var i=e.actions;null!=t&&(null==(i=i[i.length-1])?void 0:i.id)!==t&&(immediateProvider.clearImmediate(t),e._scheduled===t)&&(e._scheduled=void 0)},e})(AsyncAction);export{AsapAction};