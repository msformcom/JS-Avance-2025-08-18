import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{innerFrom}from"../observable/innerFrom";function throttle(m,d){return operate(function(r,e){var t=null!=d?d:{},n=t.leading,o=void 0===n||n,n=t.trailing,i=void 0!==n&&n,l=!1,u=null,c=null,b=!1,a=function(){null!=c&&c.unsubscribe(),c=null,i&&(f(),b)&&e.complete()},p=function(){c=null,b&&e.complete()},s=function(r){return c=innerFrom(m(r)).subscribe(createOperatorSubscriber(e,a,p))},f=function(){var r;l&&(l=!1,r=u,u=null,e.next(r),b||s(r))};r.subscribe(createOperatorSubscriber(e,function(r){l=!0,u=r,c&&!c.closed||(o?f():s(r))},function(){b=!0,i&&l&&c&&!c.closed||e.complete()}))})}export{throttle};