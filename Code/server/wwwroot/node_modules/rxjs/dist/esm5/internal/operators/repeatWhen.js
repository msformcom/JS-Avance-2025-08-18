import{innerFrom}from"../observable/innerFrom";import{Subject}from"../Subject";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";function repeatWhen(a){return operate(function(r,e){var t,n,o=!1,i=!1,u=!1,c=function(){return u&&i&&(e.complete(),!0)},b=function(){return n||(n=new Subject,innerFrom(a(n)).subscribe(createOperatorSubscriber(e,function(){t?p():o=!0},function(){i=!0,c()}))),n},p=function(){u=!1,t=r.subscribe(createOperatorSubscriber(e,void 0,function(){u=!0,c()||b().next()})),o&&(t.unsubscribe(),t=null,o=!1,p())};p()})}export{repeatWhen};