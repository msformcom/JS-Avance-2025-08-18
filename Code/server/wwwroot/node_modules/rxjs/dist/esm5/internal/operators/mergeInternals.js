import{innerFrom}from"../observable/innerFrom";import{executeSchedule}from"../util/executeSchedule";import{createOperatorSubscriber}from"./OperatorSubscriber";function mergeInternals(e,n,t,o,u,c,i,r){var f=[],a=0,b=0,l=!1,s=function(){!l||f.length||a||n.complete()},m=function(e){return a<o?p(e):f.push(e)},p=function(e){c&&n.next(e),a++;var r=!1;innerFrom(t(e,b++)).subscribe(createOperatorSubscriber(n,function(e){null!=u&&u(e),c?m(e):n.next(e)},function(){r=!0},void 0,function(){if(r)try{a--;for(;f.length&&a<o;)(()=>{var e=f.shift();i?executeSchedule(n,i,function(){return p(e)}):p(e)})();s()}catch(e){n.error(e)}}))};return e.subscribe(createOperatorSubscriber(n,m,function(){l=!0,s()})),function(){null!=r&&r()}}export{mergeInternals};