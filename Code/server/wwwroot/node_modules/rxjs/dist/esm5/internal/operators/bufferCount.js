import{__values}from"tslib";import{operate}from"../util/lift";import{createOperatorSubscriber}from"./OperatorSubscriber";import{arrRemove}from"../util/arrRemove";function bufferCount(m,y){return y=null!=(y=void 0===y?null:y)?y:m,operate(function(r,v){var p=[],s=0;r.subscribe(createOperatorSubscriber(v,function(r){var e,t,o,n,l=null;s++%y==0&&p.push([]);try{for(var a=__values(p),u=a.next();!u.done;u=a.next())(c=u.value).push(r),m<=c.length&&(l=null!=l?l:[]).push(c)}catch(r){e={error:r}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}if(l)try{for(var i=__values(l),f=i.next();!f.done;f=i.next()){var c=f.value;arrRemove(p,c),v.next(c)}}catch(r){o={error:r}}finally{try{f&&!f.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}},function(){var e,r;try{for(var t=__values(p),o=t.next();!o.done;o=t.next()){var n=o.value;v.next(n)}}catch(r){e={error:r}}finally{try{o&&!o.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}v.complete()},void 0,function(){p=null}))})}export{bufferCount};