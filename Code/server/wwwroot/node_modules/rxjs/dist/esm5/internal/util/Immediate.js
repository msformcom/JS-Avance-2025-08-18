var resolved,nextHandle=1,activeHandles={};function findAndClearHandle(e){return e in activeHandles&&(delete activeHandles[e],!0)}var Immediate={setImmediate:function(e){var n=nextHandle++;return activeHandles[n]=!0,(resolved=resolved||Promise.resolve()).then(function(){return findAndClearHandle(n)&&e()}),n},clearImmediate:function(e){findAndClearHandle(e)}},TestTools={pending:function(){return Object.keys(activeHandles).length}};export{Immediate,TestTools};