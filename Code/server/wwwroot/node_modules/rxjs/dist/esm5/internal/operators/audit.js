import{operate}from"../util/lift";import{innerFrom}from"../observable/innerFrom";import{createOperatorSubscriber}from"./OperatorSubscriber";function audit(l){return operate(function(r,e){function t(){var r;null!=i&&i.unsubscribe(),i=null,o&&(o=!1,r=u,u=null,e.next(r)),c&&e.complete()}function n(){i=null,c&&e.complete()}var o=!1,u=null,i=null,c=!1;r.subscribe(createOperatorSubscriber(e,function(r){o=!0,u=r,i||innerFrom(l(r)).subscribe(i=createOperatorSubscriber(e,t,n))},function(){c=!0,o&&i&&!i.closed||e.complete()}))})}export{audit};