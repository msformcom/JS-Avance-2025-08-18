Object.defineProperty(exports,"__esModule",{value:!0}),exports.Observable=void 0;var Subscriber_1=require("./Subscriber"),Subscription_1=require("./Subscription"),observable_1=require("./symbol/observable"),pipe_1=require("./util/pipe"),config_1=require("./config"),isFunction_1=require("./util/isFunction"),errorContext_1=require("./util/errorContext"),Observable=(()=>{function t(r){r&&(this._subscribe=r)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(r,e,t){var i=this,n=isSubscriber(r)?r:new Subscriber_1.SafeSubscriber(r,e,t);return errorContext_1.errorContext(function(){var r=i.operator,e=i.source;n.add(r?r.call(n,e):e?i._subscribe(n):i._trySubscribe(n))}),n},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(i,r){var n=this;return new(r=getPromiseCtor(r))(function(r,e){var t=new Subscriber_1.SafeSubscriber({next:function(r){try{i(r)}catch(r){e(r),t.unsubscribe()}},error:e,complete:r});n.subscribe(t)})},t.prototype._subscribe=function(r){var e;return null==(e=this.source)?void 0:e.subscribe(r)},t.prototype[observable_1.observable]=function(){return this},t.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return pipe_1.pipeFromArray(r)(this)},t.prototype.toPromise=function(r){var i=this;return new(r=getPromiseCtor(r))(function(r,e){var t;i.subscribe(function(r){return t=r},function(r){return e(r)},function(){return r(t)})})},t.create=function(r){return new t(r)},t})();function getPromiseCtor(r){return null!=(r=null!=r?r:config_1.config.Promise)?r:Promise}function isObserver(r){return r&&isFunction_1.isFunction(r.next)&&isFunction_1.isFunction(r.error)&&isFunction_1.isFunction(r.complete)}function isSubscriber(r){return r&&r instanceof Subscriber_1.Subscriber||isObserver(r)&&Subscription_1.isSubscription(r)}exports.Observable=Observable;