Object.defineProperty(exports,"__esModule",{value:!0}),exports.repeatWhen=void 0;var innerFrom_1=require("../observable/innerFrom"),Subject_1=require("../Subject"),lift_1=require("../util/lift"),OperatorSubscriber_1=require("./OperatorSubscriber");function repeatWhen(s){return lift_1.operate(function(e,r){var t,n,u=!1,i=!1,o=!1,b=function(){return o&&i&&(r.complete(),!0)},c=function(){return n||(n=new Subject_1.Subject,innerFrom_1.innerFrom(s(n)).subscribe(OperatorSubscriber_1.createOperatorSubscriber(r,function(){t?a():u=!0},function(){i=!0,b()}))),n},a=function(){o=!1,t=e.subscribe(OperatorSubscriber_1.createOperatorSubscriber(r,void 0,function(){o=!0,b()||c().next()})),u&&(t.unsubscribe(),t=null,u=!1,a())};a()})}exports.repeatWhen=repeatWhen;