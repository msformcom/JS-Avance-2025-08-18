var __read=this&&this.__read||function(e,r){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,i,o=n.call(e),u=[];try{for(;(void 0===r||0<r--)&&!(t=o.next()).done;)u.push(t.value)}catch(e){i={error:e}}finally{try{t&&!t.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},innerFrom_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEvent=void 0,require("../observable/innerFrom")),Observable_1=require("../Observable"),mergeMap_1=require("../operators/mergeMap"),isArrayLike_1=require("../util/isArrayLike"),isFunction_1=require("../util/isFunction"),mapOneOrManyArgs_1=require("../util/mapOneOrManyArgs"),nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(n,t,i,e){if(isFunction_1.isFunction(i)&&(e=i,i=void 0),e)return fromEvent(n,t,i).pipe(mapOneOrManyArgs_1.mapOneOrManyArgs(e));var e=__read(isEventTarget(n)?eventTargetMethods.map(function(r){return function(e){return n[r](t,e,i)}}):isNodeStyleEventEmitter(n)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(n,t)):isJQueryStyleEventEmitter(n)?jqueryMethods.map(toCommonHandlerRegistry(n,t)):[],2),r=e[0],o=e[1];if(!r&&isArrayLike_1.isArrayLike(n))return mergeMap_1.mergeMap(function(e){return fromEvent(e,t,i)})(innerFrom_1.innerFrom(n));if(r)return new Observable_1.Observable(function(n){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.next(1<e.length?e:e[0])}return r(e),function(){return o(e)}});throw new TypeError("Invalid event target")}function toCommonHandlerRegistry(n,t){return function(r){return function(e){return n[r](t,e)}}}function isNodeStyleEventEmitter(e){return isFunction_1.isFunction(e.addListener)&&isFunction_1.isFunction(e.removeListener)}function isJQueryStyleEventEmitter(e){return isFunction_1.isFunction(e.on)&&isFunction_1.isFunction(e.off)}function isEventTarget(e){return isFunction_1.isFunction(e.addEventListener)&&isFunction_1.isFunction(e.removeEventListener)}exports.fromEvent=fromEvent;