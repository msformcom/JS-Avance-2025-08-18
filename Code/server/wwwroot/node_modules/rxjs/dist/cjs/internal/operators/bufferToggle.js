var __values=this&&this.__values||function(r){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&r[e],t=0;if(o)return o.call(r);if(r&&"number"==typeof r.length)return{next:function(){return{value:(r=r&&t>=r.length?void 0:r)&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Subscription_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.bufferToggle=void 0,require("../Subscription")),lift_1=require("../util/lift"),innerFrom_1=require("../observable/innerFrom"),OperatorSubscriber_1=require("./OperatorSubscriber"),noop_1=require("../util/noop"),arrRemove_1=require("../util/arrRemove");function bufferToggle(e,n){return lift_1.operate(function(r,t){var i=[];innerFrom_1.innerFrom(e).subscribe(OperatorSubscriber_1.createOperatorSubscriber(t,function(r){var e=[],o=(i.push(e),new Subscription_1.Subscription);o.add(innerFrom_1.innerFrom(n(r)).subscribe(OperatorSubscriber_1.createOperatorSubscriber(t,function(){arrRemove_1.arrRemove(i,e),t.next(e),o.unsubscribe()},noop_1.noop)))},noop_1.noop)),r.subscribe(OperatorSubscriber_1.createOperatorSubscriber(t,function(r){var e,o;try{for(var t=__values(i),n=t.next();!n.done;n=t.next())n.value.push(r)}catch(r){e={error:r}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(e)throw e.error}}},function(){for(;0<i.length;)t.next(i.shift());t.complete()}))})}exports.bufferToggle=bufferToggle;