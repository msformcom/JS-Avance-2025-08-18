Object.defineProperty(exports,"__esModule",{value:!0}),exports.bufferWhen=void 0;var lift_1=require("../util/lift"),noop_1=require("../util/noop"),OperatorSubscriber_1=require("./OperatorSubscriber"),innerFrom_1=require("../observable/innerFrom");function bufferWhen(i){return lift_1.operate(function(r,e){var n=null,u=null,o=function(){null!=u&&u.unsubscribe();var r=n;n=[],r&&e.next(r),innerFrom_1.innerFrom(i()).subscribe(u=OperatorSubscriber_1.createOperatorSubscriber(e,o,noop_1.noop))};o(),r.subscribe(OperatorSubscriber_1.createOperatorSubscriber(e,function(r){return null==n?void 0:n.push(r)},function(){n&&e.next(n),e.complete()},void 0,function(){return n=u=null}))})}exports.bufferWhen=bufferWhen;