var __values=this&&this.__values||function(r){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&r[e],t=0;if(o)return o.call(r);if(r&&"number"==typeof r.length)return{next:function(){return{value:(r=r&&t>=r.length?void 0:r)&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Subject_1=(Object.defineProperty(exports,"__esModule",{value:!0}),exports.windowToggle=void 0,require("../Subject")),Subscription_1=require("../Subscription"),lift_1=require("../util/lift"),innerFrom_1=require("../observable/innerFrom"),OperatorSubscriber_1=require("./OperatorSubscriber"),noop_1=require("../util/noop"),arrRemove_1=require("../util/arrRemove");function windowToggle(e,c){return lift_1.operate(function(r,n){function i(r){for(;0<u.length;)u.shift().error(r);n.error(r)}var u=[];innerFrom_1.innerFrom(e).subscribe(OperatorSubscriber_1.createOperatorSubscriber(n,function(r){var e,o=new Subject_1.Subject,t=(u.push(o),new Subscription_1.Subscription);try{e=innerFrom_1.innerFrom(c(r))}catch(r){return void i(r)}n.next(o.asObservable()),t.add(e.subscribe(OperatorSubscriber_1.createOperatorSubscriber(n,function(){arrRemove_1.arrRemove(u,o),o.complete(),t.unsubscribe()},noop_1.noop,i)))},noop_1.noop)),r.subscribe(OperatorSubscriber_1.createOperatorSubscriber(n,function(r){var e,o,t=u.slice();try{for(var n=__values(t),i=n.next();!i.done;i=n.next())i.value.next(r)}catch(r){e={error:r}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}},function(){for(;0<u.length;)u.shift().complete();n.complete()},i,function(){for(;0<u.length;)u.shift().unsubscribe()}))})}exports.windowToggle=windowToggle;